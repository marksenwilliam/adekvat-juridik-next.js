"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="09d2212d-189f-588a-9007-a7c9686072c1")}catch(e){}}();
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[62893],{18957:(e,t,a)=>{a.d(t,{hr:()=>u,nY:()=>m,ye:()=>d,zO:()=>s});var n=a(24990),r=a(66871),l=a(95192),i=a(7473),o=a(64433);let s=(e,t,a)=>{let n={};if(e.holderName.value){let r=(0,i.o$)(e.holderName.value);n={billingAddress:{firstName:r.firstName,lastName:r.lastName,addressLine1:null==a?void 0:a.address,city:null==a?void 0:a.city,stateCode:null==a?void 0:a.state,countryCode:null==a?void 0:a.country,zip:null==a?void 0:a.zip},email:t}}return n},u=(e,t)=>{let{isValidChargeBeeForm:a,errorMessages:i}=((e,t)=>{if(t){let t=Object.entries(e).reduce((e,t)=>{let a=t[1],n=t[0],r=a.errorMessage||(a.isEmpty?l.LW:void 0);return r&&e.push({[n]:r}),e},[]),a=Object.values(e).every(e=>e.isValid&&!e.isEmpty);return{isValidChargeBeeForm:!t.length&&a,errorMessages:t}}return{isValidChargeBeeForm:!0,errorMessages:null}})(e,t);return a||r.default.trigger(n.QI.TRIGGER_VALIDATION),{isValidChargeBeeForm:a,errorMessages:i}},d=e=>{let{creditCardMappedErrorData:t,t:a}=e,n={isLoading:!1,isSuccess:!1};return null!=t&&t.title&&null!=t&&t.body?{...n,errorDetails:{title:a(l.n4,{mappedCreditCardErrorTitle:t.title}),body:a(l.bs,{mappedCreditCardErrorBody:t.body})}}:{...n,errorCode:o.O4["3DS"]}},m=e=>({stageName:e.stageName??"payment initialize",stageNumber:e.stageNumber??"1",stageSource:e.stageSource??"errorCreditCardMappedError"})},32769:(e,t,a)=>{a.d(t,{N:()=>l});var n=a(46766),r=a(95996);let l=()=>{let e=(0,r.r)(n.r.unifiedSignupCheckout.name,n.r.unifiedSignupCheckout.variations),t=e.isVariationActive(n.r.unifiedSignupCheckout.variations.test);return{...e,isFeatureEnabled:t}}},54446:(e,t,a)=>{a.d(t,{x:()=>l});var n=a(1494),r=a(38564);let l=()=>(0,r.u)(n.q.holidayPromotion2025)},54511:(e,t,a)=>{a.d(t,{_:()=>d});var n=a(72466),r=a(97335),l=a(76468),i=a(41935);let o=i.z.object({seatingCapacity:i.z.number(),usedSeatingCapacity:i.z.number()});var s=a(22875),u=a(32638);let d=e=>{let t=(0,s.useQueryClient)(),{isLoading:a,data:i}=(0,u.useQuery)({queryKey:["team-metadata"],queryFn:()=>(0,l.A)({method:"GET",apiURL:n.fb,apiServiceHost:r.AH,endpointVersion:"v1",endpoint:"/teams/metadata"}).then(e=>{let t=o.safeParse(e.data);if(t.success){let e;return{seatingCapacity:(e=t.data).seatingCapacity,usedSeatingCapacity:e.usedSeatingCapacity}}return null}),staleTime:6e4,enabled:e});return{teamMetaData:i,isLoadingTD:a,getIsOneMemberToInvite:()=>!!i&&i.seatingCapacity-i.usedSeatingCapacity==1,refetch:async()=>t.invalidateQueries({queryKey:["team-metadata"]})}}},63838:(e,t,a)=>{a.d(t,{B:()=>c});var n=a(22875),r=a(32638),l=a(14590),i=a(91608),o=a(55029),s=a(21797),u=a(87992),d=a(2338);let m="billingInformation",c=e=>{let t=(0,n.useQueryClient)(),a="authenticated"===(0,s.useSession)().status,{data:c}=(0,u.J)(),p=null==c?void 0:c.legacyUserDetails.userData.isPaid,_=(0,i.md)(o.yu),y=!!p&&!!a||!!a&&!!_,v=async e=>{let{billingInformation:t,billingUserData:a}=e,n=(0,d.I0)(t,a);return(0,d.Hd)(n)};return{getBillingInformationQuery:()=>(0,r.useQuery)({queryKey:[m,a,_,p],queryFn:async()=>(0,d.aE)(),onError:e=>console.error(e.message),enabled:y&&!(null!=e&&e.disableQuery)}),setBillingInformationMutation:(0,l.useMutation)(e=>{let{billingInformation:t,billingUserData:a}=e;return v({billingInformation:t,billingUserData:a})},{onSuccess:()=>{t.invalidateQueries([m])},onError:e=>console.error(e.message)})}}},70243:(e,t,a)=>{var n;a.d(t,{U:()=>r});let r=((n={}).BUTTON_CLICKED="button clicked",n.SUBSCRIBE_CLICKED="subscribe clicked",n.PAYMENT_ATTEMPTED="payment attempted",n.PAYMENT_REJECTED="payment rejected",n.PAYMENT_SUCCEED="payment succeed",n.POST_ERROR_EVENT="sendPostSubscriptionErrorEvent",n.PAYPAL_CLOSED_POPUP="paypal popup closed",n.GOOGLE_PAY_CLOSED_POPUP="google pay popup closed",n.APPLE_PAY_CLOSED_POPUP="apple pay popup closed",n.PAYMENT_METHOD_UPDATED="new payment method successfully updated",n.PAYMENT_METHOD_FAILED="new payment method update failed",n.PAYMENT_METHOD_CLICKED="update payment method clicked",n.PAYMENT_METHODS_VIEWED="payment methods viewed",n.INPUT_INTERACTED="input interacted",n.SEND_THANK_YOU_PAGE="send thank you page events",n.INPUT_FILLED="input filled",n.VAT_VIEWED="vat viewed",n.ITEM_CLICKED="item clicked",n.TOOLTIP_OPEN="tooltip open",n.TOOLTIP_CLOSED="tooltip closed",n.PAYMENT_INITIALIZE="payment initialize",n.PAYMENT_3DS="payment 3DS",n.UPGRADE_PAGE_PLAN_SWITCHED="upgrade plan switched",n.ACTION_COMPLETED="action completed",n.DEBUG_PAYPAL_BUTTON="debug paypal button",n)},79566:(e,t,a)=>{a.d(t,{F:()=>u});var n=a(16596),r=a(5172),l=a(95192),i=a(70243);class o{get fire(){return this}constructor(){this.paymentAttempted=e=>{n.default.track({name:i.U.PAYMENT_ATTEMPTED,eventData:{is_external_billing:!1,is_vat_eligible:!1,...e}})},this.paymentRejected=e=>{n.default.track({name:i.U.PAYMENT_REJECTED,eventData:{is_external_billing:!0,reason:"3DS",...e}})},this.paymentSucceed=e=>{n.default.track({name:i.U.PAYMENT_SUCCEED,eventData:{is_external_billing:!0,...e}})},this.updatePaymentMethodFailedEvent=e=>{n.default.track({name:i.U.PAYMENT_METHOD_FAILED,eventData:{failure_reason:"paymentMethods/tempToken api failed",new_payment_method:e.new_payment_method,old_payment_method:e.old_payment_method}})},this.updatePaymentMethodSucceededEvent=e=>{n.default.track({name:i.U.PAYMENT_METHOD_UPDATED,eventData:{payment_id:e.payment_id,new_payment_method:l.Se[e.new_payment_method],old_payment_method:l.Se[e.old_payment_method],click_source:null==e?void 0:e.click_source}})},this.updatePaymentMethodClickedEvent=e=>{n.default.track({name:i.U.PAYMENT_METHOD_CLICKED,eventData:{buttonName:"update payment method",new_payment_method:e.new_payment_method,old_payment_method:e.old_payment_method,click_source:null==e?void 0:e.click_source,error_message:null==e?void 0:e.error_message,view_type:null==e?void 0:e.view_type}})},this.vatViewed=e=>n.default.track({name:i.U.VAT_VIEWED,eventData:e}),this.buttonClicked=e=>{n.default.track({name:i.U.BUTTON_CLICKED,eventData:{...e}})},this.subscribeClickedEvent=e=>{n.default.track({name:i.U.SUBSCRIBE_CLICKED,eventData:e})},this.paypalPopupClosedEvent=e=>{n.default.track({name:i.U.PAYPAL_CLOSED_POPUP,eventData:e})},this.applePayPopupClosedEvent=e=>{n.default.track({name:i.U.APPLE_PAY_CLOSED_POPUP,eventData:e})},this.googlePayPopupClosedEvent=e=>{n.default.track({name:i.U.GOOGLE_PAY_CLOSED_POPUP,eventData:e})},this.gtmRenewalForm=e=>{n.default.track({name:"gtmPaymentRenewalForm",eventData:{data:e,isChargeBeeUser:!0}})},this.gtmEventSubscribeNowClick=()=>{r.h.subscribeNowClick("Payment page")},this.sendThankYouPageUpgradeEvent=e=>{let{paymentStatusData:t}=e;n.default.track({name:i.U.SEND_THANK_YOU_PAGE,eventData:{isUpgradable:!0,paymentStatusData:t}})},this.sendThankYouPageSubscribeEvent=e=>{let{paymentStatusData:t}=e;n.default.track({name:i.U.SEND_THANK_YOU_PAGE,eventData:{isUpgradable:!1,paymentStatusData:t}})},this.sendCCInputInteractedEvent=e=>{n.default.track({name:i.U.INPUT_INTERACTED,eventData:e})},this.sendCCInputFilledEvent=e=>{n.default.track({name:i.U.INPUT_FILLED,eventData:e})},this.planSwitchedEvent=e=>{let{isVatEligible:t,fromPlan:a,toPlan:r}=e;n.default.track({name:i.U.UPGRADE_PAGE_PLAN_SWITCHED,eventData:{from_plan:a,to_plan:r,is_vat_eligible:t}})},this.sendTooltipOpen=e=>{n.default.track({name:i.U.TOOLTIP_OPEN,eventData:e})},this.sendTooltipClosed=e=>{n.default.track({name:i.U.TOOLTIP_CLOSED,eventData:e})},this.needMoreSeatsEvent=()=>{n.default.track({name:i.U.ITEM_CLICKED,eventData:{item:"enterprise plan",button_name:"enterprise plan",click_source:"team seating pick page",component:"need more seats for your team ?"}})},this.paymentMethodSwitched=e=>{n.default.track({name:i.U.BUTTON_CLICKED,eventData:{...e}})},this.paymentInitialize=e=>{n.default.track({name:i.U.PAYMENT_INITIALIZE,eventData:{...e}})},this.payment3DS=e=>{n.default.track({name:i.U.PAYMENT_3DS,eventData:{...e}})},this.paymentMethodsViewed=e=>{n.default.track({name:i.U.PAYMENT_METHODS_VIEWED,eventData:{...e}})},this.debugPaypalButton=e=>{n.default.track({name:i.U.DEBUG_PAYPAL_BUTTON,eventData:{...e}})}}}let s=new o,u=()=>({eventsHandler:s})},82621:(e,t,a)=>{a.d(t,{f:()=>R});var n=a(91608),r=a(84768),l=a(439),i=a(93696),o=a.n(i),s=a(12960),u=a(55029),d=a(21797),m=a(24990),c=a(32769),p=a(27919),_=a(58067),y=a(55760),v=a(87992),E=a(66871),g=a(16596),P=a(5172),h=a(72988),T=a(78349),N=a(72466),I=a(97335),f=a(76468);let A=async e=>{let{userId:t,subscriptionId:a}=e;return(0,f.A)({method:"GET",apiURL:N.fb,apiServiceHost:I.T4,endpointVersion:"v1",endpoint:"/transactions",headers:{userId:t,subscriptionId:a,application:"artlist"}}).then(e=>{var t;let a;return[null==(a=null==(t=e.data.data)?void 0:t[0])?void 0:a.subscription_id,null]}).catch(e=>[null,e])};var b=a(85593),D=a(7344);let S=async e=>{let{price:t,successOrderId:a,planId:n,visitorId:r}=e;return(0,f.A)({method:"GET",endpoint:"subscribe/pap-tracker",params:{price:t,successOrderId:a,planId:n,visitorId:r},headers:{application:"artlist"}})};var C=a(36969),U=a(2338),k=a(95192),O=a(79566),L=a(64433),M=a(18957),w=a(184);let B=(e,t,a)=>{let n=e.toLowerCase().replace(/\s+/g,"-"),r=/(?:monthly|yearly|annual)/.test(n);if(!r&&a){let e=a.toLowerCase();return"month"===e?e="monthly":"year"===e&&(e="yearly"),`${n}-${e}`}return r||a||w.e$.error("GTM Payment Event - Missing period information",{planEventName:e,fullPlanId:t,periodUnit:a,tags:{component:"use-paying-helpers",event_type:"gtm_payment_tracking"}}),n},R=()=>{let{t:e}=(0,l.Bd)("payments"),{isFeatureEnabled:t}=(0,c.N)(),a=(0,d.useSession)(),i=(0,D.r)(),N=JSON.parse(r.A.get(m.ZC)??"null"),I=r.A.get("PAPVisitorId"),f=o()(),w=(0,n.md)(u.yu),{geoData:R}=(0,y.M)(),{currencyCode:Y}=(0,_.E_)(),{data:G}=(0,v.J)(),{eventsHandler:J}=(0,O.F)(),{leadJourneyQuery:V}=(0,T.T)(),F=async n=>{var r,l,i,o,s,u,d,m;let{paymentResponse:c,token:p,afterPaymentPayload:_}=n,{onPaymentSuccess:y,onPaymentError:v,totalBill:E,planEventName:T,paymentMethod:I,seatingCapacity:f,shouldShowVat:D,paymentFlow:S,taxPercent:C,billingData:U,processorType:O,planBI:M,addonId:w,periodUnit:R}=_,{id:Y}=(null==c?void 0:c.subscription)??{},F=G??b.P.user,[H,j]=await A({userId:(null==F?void 0:F.id)??"",subscriptionId:Y});if(j){J.paymentRejected({amount:E,processor_type:O,message:j.message,payment_type:K({paymentFlow:S}),payment_method:I,plan:M,planEventName:T,fullPlanId:null==c?void 0:c.fullPlanId,periodUnit:R,vat_value:`${C}%${null==U?void 0:U.country}`,...f&&{number_of_members:f},is_vat_eligible:D,click_source:W({paymentFlow:S}),error_group_type:(null==j||null==(r=j.response)||null==(l=r.data)||null==(i=l.error)||null==(o=i.payload)?void 0:o.errorGroupType)??k.SW.Unknown,...(null==U?void 0:U.vatNumber)&&{artlist_ABN:U.vatNumber},...(null==U?void 0:U.companyName)&&{company_name:U.companyName},error_stage_name:"payment attempted",error_stage_number:"3",error_source:"externalBillingError",addon_name:w}),console.error(j.message),v({isLoading:!1,isSuccess:!1,errorDetails:{title:e(k.xd),body:e(k.dn)}});return}g.default.track({name:"subscribe before payment succeed",eventData:{countryFromBilling:null==U?void 0:U.country,amount:E,paymentMethod:I}}),J.paymentSucceed({payment_id:Y,amount:E,isPAP:!!(null!=N&&N.isPAP),affiliate_id:null==N?void 0:N.affiliateId,successOrderId:H,processor_type:O,payment_method:I,payment_method_token:p??"",payment_type:K({paymentFlow:S}),is_checkout_includes_registration:t&&"authenticated"!==a.status,plan:M,planEventName:T,fullPlanId:null==c?void 0:c.fullPlanId,periodUnit:R,number_of_members:f,vat_value:`${C}%${null==U?void 0:U.country}`,is_vat_eligible:D,click_source:W({paymentFlow:S}),...(null==U?void 0:U.vatNumber)&&{artlist_ABN:U.vatNumber},...(null==U?void 0:U.companyName)&&{company_name:U.companyName},addon_name:w}),q({planId:B(T,c.fullPlanId,R),totalAmount:E,successOrderId:H}),await ee(`${H}`,E,T);let z=await $();if(z){J.paymentRejected({amount:E,processor_type:O,message:z.message,payment_type:K({paymentFlow:S}),payment_method:I,plan:M,planEventName:T,fullPlanId:null==c?void 0:c.fullPlanId,periodUnit:R,vat_value:`${C}%${null==U?void 0:U.country}`,...f&&{number_of_members:f},is_vat_eligible:D,click_source:W({paymentFlow:S}),error_group_type:(null==j||null==(s=j.response)||null==(u=s.data)||null==(d=u.error)||null==(m=d.payload)?void 0:m.errorGroupType)??k.SW.Unknown,...(null==U?void 0:U.vatNumber)&&{artlist_ABN:U.vatNumber},...(null==U?void 0:U.companyName)&&{company_name:U.companyName},error_stage_name:"payment attempted",error_stage_number:"3",error_source:"refreshTokenError",addon_name:w}),v({isLoading:!1,isSuccess:!1,errorDetails:{title:e(k.xd),body:e(k.dn)}});return}y({isLoading:!1,isSuccess:!0,successOrderId:H});let{data:X}=await V.refetch();if(X&&((0,h.r5)({previousLeadJourney:X.previousJourney,updatedLeadJourney:X.updatedLeadJourney,hasJourneyChanged:X.hasJourneyChanged,trigger:"B2C purchase",clickSource:L.SU.SUBSCRIBE}),X.isUqlJourney)){let e=G??b.P.user;P.h.subscriptionPurchaseFlow(null==e?void 0:e.id)}},H=async n=>{var r,l,i,o,s,u,d,m;let{paymentResponse:c,token:p,afterPaymentPayload:_}=n,{onPaymentSuccess:y,onPaymentError:v,totalBill:E,planEventName:P,paymentMethod:h,seatingCapacity:T,shouldShowVat:N,paymentFlow:I,taxPercent:f,billingData:D,processorType:S,planBI:C,addonId:U,periodUnit:O}=_,{id:M}=(null==c?void 0:c.subscription)??{},w=G??b.P.user,[R,Y]=await A({userId:(null==w?void 0:w.id)??"",subscriptionId:M});if(Y){I!==L.XJ.UPDATE_PAYMENT_METHOD&&J.paymentRejected({amount:E,message:Y.message,processor_type:S,payment_type:K({paymentFlow:I}),payment_method:h,plan:C,planEventName:P,fullPlanId:null==c?void 0:c.fullPlanId,periodUnit:O,vat_value:`${f}%${null==D?void 0:D.country}`,...T&&{number_of_members:T},is_vat_eligible:N,click_source:W({paymentFlow:I}),error_group_type:(null==Y||null==(r=Y.response)||null==(l=r.data)||null==(i=l.error)||null==(o=i.payload)?void 0:o.errorGroupType)??k.SW.Unknown,...(null==D?void 0:D.vatNumber)&&{artlist_ABN:D.vatNumber},...(null==D?void 0:D.companyName)&&{company_name:D.companyName},error_stage_name:"payment attempted",error_stage_number:"3",error_source:"externalBillingError",addon_name:U}),console.error(Y.message),v({isLoading:!1,isSuccess:!1,errorDetails:{title:e(k.xd),body:e(k.dn)}});return}g.default.track({name:"upgrade before payment succeed",eventData:{countryFromBilling:null==D?void 0:D.country,is_checkout_includes_registration:t&&"authenticated"!==a.status,amount:E}}),I!==L.XJ.UPDATE_PAYMENT_METHOD&&J.paymentSucceed({payment_id:M,amount:E,processor_type:S,payment_method:h,payment_method_token:p??"",payment_type:K({paymentFlow:I}),plan:C,planEventName:P,fullPlanId:null==c?void 0:c.fullPlanId,periodUnit:O,number_of_members:T,vat_value:`${f}%${null==D?void 0:D.country}`,is_vat_eligible:N,click_source:W({paymentFlow:I}),...(null==D?void 0:D.vatNumber)&&{artlist_ABN:D.vatNumber},...(null==D?void 0:D.companyName)&&{company_name:D.companyName},addon_name:U}),Z({planId:B(P,c.fullPlanId,O),totalAmount:E,successOrderId:R});let V=await $();if(V){I!==L.XJ.UPDATE_PAYMENT_METHOD&&J.paymentRejected({amount:E,periodUnit:O,processor_type:S,message:V.message,payment_type:K({paymentFlow:I}),payment_method:h,plan:C,planEventName:P,fullPlanId:null==c?void 0:c.fullPlanId,vat_value:`${f}%${null==D?void 0:D.country}`,...T&&{number_of_members:T},is_vat_eligible:N,click_source:W({paymentFlow:I}),error_group_type:(null==Y||null==(s=Y.response)||null==(u=s.data)||null==(d=u.error)||null==(m=d.payload)?void 0:m.errorGroupType)??k.SW.Unknown,...(null==D?void 0:D.vatNumber)&&{artlist_ABN:D.vatNumber},...(null==D?void 0:D.companyName)&&{company_name:D.companyName},error_stage_name:"payment attempted",error_stage_number:"3",error_source:"refreshTokenError",addon_name:U}),v({isLoading:!1,isSuccess:!1,errorDetails:{title:e(k.xd),body:e(k.dn)}});return}J.sendThankYouPageUpgradeEvent({paymentStatusData:R}),y({isLoading:!1,isSuccess:!0,successOrderId:R})},$=async()=>{try{await i()}catch(e){return e}},W=e=>{let{paymentFlow:t}=e;switch(t){case L.XJ.UPGRADE:return L.SU.UPGRADE;case L.XJ.REACTIVATION:return L.SU.REACTIVATE;case L.XJ.SUBSCRIBE:return L.SU.SUBSCRIBE;case L.XJ.TEAMS_INVITE:return L.SU.TEAMS;case L.XJ.MANUAL_RENEWAL:return L.SU.MANUAL_RENEWAL;default:return L.SU.SUBSCRIBE}},K=e=>{let{paymentFlow:t}=e;switch(t){case L.XJ.UPGRADE:return m.dm.upgrade;case L.XJ.REACTIVATION:return m.dm.reactivate;case L.XJ.SUBSCRIBE:return w?m.dm.newSubscriptionChurned:m.dm.newSubscription;case L.XJ.TEAMS_INVITE:return m.dm.teamsInvite;case L.XJ.MANUAL_RENEWAL:return m.dm.newSubscriptionChurned;default:return m.dm.newSubscription}},j=e=>{let{token:t,planId:a,seatingCapacity:n,periodUnit:r,paymentMethod:l,isNewCustomer:i,billingData:o,addonId:s}=e,u=G??b.P.user,d=(null==u?void 0:u.id)??"";return{method:l,planId:a,periodUnit:r,userID:d,seatingCapacity:n,addonId:s,customer:(e=>{let{billingData:t,isNewCustomer:a}=e,n=G??b.P.user;return a?(0,U.I0)(t,{firstName:(null==n?void 0:n.details.firstName)??"",lastName:(null==n?void 0:n.details.lastName)??"",email:(null==n?void 0:n.details.email)??""}):{vatId:null==t?void 0:t.vatNumber,billingAddress:{company:null==t?void 0:t.companyName}}})({billingData:o,isNewCustomer:!!i}),...i&&{customer_id:d.toString()},...t&&{token:t}}},z=async e=>{let{paymentInitializeResponse:t,chargeBeeFormState:a,cardRef:n,billingData:r}=e,l=G??b.P.user,i=(0,M.zO)(a,(null==l?void 0:l.details.email)??"",r);try{var o;let e=await (null==(o=n.current)?void 0:o.authorizeWith3ds(t,i));if(!e)throw Error("No token from credit card");return null==e?void 0:e.id}catch(t){g.default.track({name:"3DS full error",eventData:{error:t}});let e=t instanceof Error?t:"object"==typeof t&&null!==t&&"message"in t?Error(String(t.message??"")):Error(String(t));throw e.is3dsError=!0,e.stageName="payment 3D",e.stageNumber="2",e.stageSource="authorizeWith3ds",e}},X=async e=>{let{paymentInitializeResponse:t,chargeBeeFormState:a,cardRef:n,billingData:r,staticPayloadForGetPaymentData:l,seatingCapacity:i,isNewCustomer:o=!0}=e;try{J.payment3DS({planEventName:l.planEventName,payment_method:l.paymentMethod,payment_type:K({paymentFlow:l.paymentFlow}),processor_type:t.gateway,periodUnit:l.periodUnit});let e=await z({paymentInitializeResponse:t,chargeBeeFormState:a,cardRef:n,billingData:r});return[j({...l,token:e,isNewCustomer:o,billingData:r,seatingCapacity:i}),null]}catch(e){return[null,e]}},x=(e,t,a,n)=>({country:a,operatingSystem:null==f?void 0:f.os,emailType:(0,p.B)(e)?"gmail":"not-gmail",device:(null==f?void 0:f.device.type)||"desktop",userEmail:n??e,userId:`${t}`,email:e}),Q=e=>{let{planId:t,totalAmount:a,successOrderId:n}=e,r=G??b.P.user;return{country:null==R?void 0:R.countryCode,plan:t,email:(null==r?void 0:r.details.email)??"",isReactivated:!!w,userId:(null==r?void 0:r.id)??"",is_external_billing:!0,currency:Y||"US",transaction_id:n,items:{price:(null==a?void 0:a.toString())??"",item_name:t}}},q=e=>{var t;let a,n,{planId:r,totalAmount:l,successOrderId:i}=e;t=Q({planId:r,totalAmount:l,successOrderId:i}),a=(0,p.j)(t.email),(n=x(t.email,t.userId,t.country,a)).value=t.value,n.currency=t.currency,n.event="payment-complete-2",n.planType=t.plan,n.renewal=t.isReactivated,P.h.paymentComplete(t),n.purchaseType="purchase",J.gtmRenewalForm(n)},Z=e=>{var t;let a,n,{planId:r,totalAmount:l,successOrderId:i}=e;t=Q({planId:r,totalAmount:l,successOrderId:i}),a=(0,p.j)(t.email),(n=x(t.email,t.userId,t.country,a)).value=t.value,n.currency=t.currency,n.event="payment-complete-2",n.planType=t.plan,P.h.upgradePayment(t),n.purchaseType="upgrade",J.gtmRenewalForm(n)},ee=async(e,t,a)=>{I&&e&&(g.default.track({name:"sendPostAffTracker",eventData:{successOrderId:e,price:t,visitorId:I}}),await S({price:t,successOrderId:e,planId:a,visitorId:I}),g.default.track({name:"PostAffTracker finished",eventData:{successOrderId:e,planId:a,price:t,visitorId:I}}))};return{getPaymentData:j,getClickSourcePage:W,sendGTMPaymentSubscribe:q,sendGTMPaymentUpgrade:Z,getPaymentType:K,refreshTokenAfterSubscribeWithError:$,onSubscribeAfterPayment:F,onUpgradeAfterPayment:H,sendPostAffiliateTracker:ee,getIsValidChargeBeeForm:e=>{let{chargeBeeFormState:t,shouldValidateChargeBeeForm:a}=e;return(0,M.hr)(t,a)},validateBillingInformationForm:async e=>{let{isBillingDataValid:t}=e;t||E.default.trigger(C.Vz.TRIGGER_VALIDATION)},getPaymentDataWithToken:X,gtmMemberJoinTeam:(e,t)=>{let a=(0,p.j)(e),n=x(e,t,a);s.I.trackEvent({event:"team-member-join",data:n})},sendGTMEvents:e=>{e.forEach(e=>{s.I.trackEvent({event:e})})}}}}}]);
//# sourceMappingURL=62893-d5d00446fa87dc31.js.map
//# debugId=09d2212d-189f-588a-9007-a7c9686072c1
