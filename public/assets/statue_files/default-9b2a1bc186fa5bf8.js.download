
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="8a2ca72b-3f3b-5ee1-ba4a-91ba164c4812")}catch(e){}}();
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[15566],{1494:(e,t,a)=>{"use strict";a.d(t,{q:()=>r});let r={songLicenseForChurnedUsers:"ff_song-license-for-churned",pendingTeamMember:"ff__pending-team-member",businessFreeTrial:"ff__business-free-trial",switchToMonthly:"ff__switch-to-monthly",firstAssetInArtboardPopup:"ff__first_asset_in_artboard_popup",kickedUserPopup:"ff__kicked-user-popup",songMatchYoutube:"ff__song-match-youtube",pendingActions:"ff__pending-actions",browserFingerprinting:"ff__browser-fingerprinting",veo31Model:"ff__veo31-model",trendingSongsRemoveYouTubeViolationChanges:"ff__trending-songs-remove-youtube-violation-changes",holidayPromotion2025:"ff__holiday-promotion-2025",newTeamInvitationMessage:"ff__new-team-invitation-message",visualAiMobile:"ff__visual-ai-mobile",teamAICreditUsage:"ff__team_ai_credit_usage",textToImageModelSelect:"ff__text-to-image-model-select",madeWithAi:"ff__made-with-ai",contactSalesNewField:"ff__contact-sales-new-field",toolkitNav:"ff__toolkit-nav",pricingPageRedesign:"ff__pricing-page-redesign",aiModelsDynamicConfiguration:"ff__ai-models-dynamic-configuration",autoAspectRatio:"ff__auto-aspect-ratio"}},2716:(e,t,a)=>{"use strict";a.d(t,{K:()=>y,Y:()=>x});var r=a(8897),i=a(9940),n=a(49089),s=a(75643),o=a(86789),l=a(3548),d=a(11161),c=a(80752),u=a(62511),p=a(17208),m=a(98512),g=a(54568);let h=()=>(0,g.jsxs)("div",{className:"relative flex items-center justify-center w-4 h-4",children:[(0,g.jsx)("div",{className:"absolute rounded-sm border border-solid border-black aspect-[16/9] w-4"}),(0,g.jsx)("div",{className:"absolute rounded-sm border border-solid border-black aspect-[9/16] w-[9px]"})]}),x=e=>{let{aspectRatio:t}=e;return(0,g.jsx)("div",{className:"relative flex aspect-square w-7 shrink-0 items-center justify-center rounded bg-gray-50",children:(0,l.YW)(t).with(c.gl.AUTO,()=>(0,g.jsx)(h,{})).otherwise(()=>(0,g.jsx)(o.P.div,{layout:!0,style:{aspectRatio:(0,l.YW)(t).with(c.gl.LANDSCAPE_16X9,()=>"16 / 9").with(c.gl.SQUARE,()=>"1").with(c.gl.PORTRAIT_9X16,()=>"9 / 16").with(c.gl.PORTRAIT_2X3,()=>"2 / 3").with(c.gl.LANDSCAPE_3X2,()=>"3 / 2").exhaustive(),width:(0,l.YW)(t).with(c.gl.LANDSCAPE_16X9,()=>16).with(c.gl.SQUARE,()=>16).with(c.gl.PORTRAIT_9X16,()=>9).with(c.gl.PORTRAIT_2X3,()=>11).with(c.gl.LANDSCAPE_3X2,()=>16).exhaustive()},className:"absolute rounded-sm border border-solid border-black will-change-transform"}))})},y=Object.assign(e=>(0,g.jsx)(p.Do,{ariaLabelPrefix:"aspect ratio",renderValue:e=>(0,g.jsxs)("div",{className:"inline-flex items-center gap-2 pr-2",children:[e?(0,g.jsx)(x,{aspectRatio:e}):null,(0,u.Hj)(e)]}),...e}),{MenuItem:e=>{let{children:t,...a}=e;return(0,g.jsxs)(n.A,{role:"option",...a,className:"flex gap-3 p-3 font-medium text-gray-100",sx:e=>({[`.${r.A.root}`]:{opacity:0,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shortest})},[`&.${s.A.selected} .${r.A.root}`]:{opacity:1}}),children:[t,(0,g.jsx)(i.A,{className:"flex flex-grow justify-end",children:(0,g.jsx)(d.N,{})})]})},AspectRatioIcon:m.B})},4709:(e,t,a)=>{"use strict";a.d(t,{A9:()=>M,Bt:()=>R,Ct:()=>j,EE:()=>A,Es:()=>G,Fi:()=>w,Fn:()=>P,L:()=>h,Lc:()=>$,MS:()=>T,No:()=>v,RN:()=>g,SH:()=>C,Uv:()=>D,ZZ:()=>k,ac:()=>B,cP:()=>m,gR:()=>E,jh:()=>I,mw:()=>O,o4:()=>b,qw:()=>f,sp:()=>N,tx:()=>L,uP:()=>u,x5:()=>S,x6:()=>p,zz:()=>_});var r,i,n,s=a(41935),o=a(72466),l=a(24990),d=a(97335),c=a(76468);let u={[l.E7.footage]:l.qy.Clip,[l.E7.templates]:l.qy.Template,[l.E7.sfx]:l.qy.Track,[l.E7.music]:l.qy.Song,[l.E7.LUTs]:l.qy.Lut,[l.E7.aiMedia]:l.qy.AIMedia,[l.E7.aiImage]:l.qy.AIImage,[l.E7.aiVideo]:l.qy.AIVideo,[l.E7.album]:l.qy.Album,[l.E7.artist]:l.qy.Artist,[l.E7.voiceover]:l.qy.Voiceover},p=s.z.object({id:s.z.string(),assetId:s.z.string(),assetType:s.z.nativeEnum(l.qy),createdAt:s.z.string(),updatedAt:s.z.string(),addedBy:s.z.string().nullish(),hasActiveThreads:s.z.boolean().nullish()}),m=((r={}).ALPHABETICAL="alphabetical",r.LAST_UPDATED="lastUpdated",r.CREATED_AT="createdAt",r),g=((i={}).ASC="ASC",i.DESC="DESC",i),h=((n={}).ByMe="ByMe",n.ByAnyMember="ByAnyMember",n.AsAbleToEdit="AsAbleToEdit",n),x=e=>{let{assets:t,directoryTypeName:a,directoryId:r}=e;return(0,c.A)({method:"POST",apiURL:o.bN,apiServiceHost:d.VL,endpointVersion:"v1",endpoint:"/asset",data:{assetItems:t,directoryTypeName:a,directoryId:r}})},y=e=>{let{assetId:t,assetType:a,directoryTypeName:r,directoryId:i}=e;return(0,c.A)({method:"DELETE",apiURL:o.bN,apiServiceHost:d.VL,endpointVersion:"v1.1",endpoint:"/asset",data:{assetId:t,assetType:a,directoryTypeName:r,directoryId:i}})},f=e=>{let{assetTypes:t,take:a,skip:r,orderByKey:i=m.LAST_UPDATED,orderDirection:n=g.DESC,ownedBy:s}=e;return(e=>{let{directoryType:t,assetTypes:a,take:r,skip:i,orderByKey:n,orderDirection:s,ownedBy:l}=e;return(0,c.A)({method:"GET",apiURL:o.bN,apiServiceHost:d.VL,endpointVersion:"v1",endpoint:"/directory",params:{directoryType:t,directoryAssetTypes:a,take:r,skip:i,orderByKey:n,orderByDirection:s,ownedBy:l}})})({directoryType:"FOLDER",assetTypes:t,take:a,skip:r,orderByKey:i,orderDirection:n,ownedBy:s}).then(e=>e.data)},j=(e,t)=>(e=>{let{directoryTypeName:t,assetId:a,assetType:r}=e;return(0,c.A)({method:"GET",apiURL:o.bN,apiServiceHost:d.VL,endpointVersion:"v1",endpoint:"/asset/directories",params:{directoryTypeName:t,assetId:a,assetType:r}})})({directoryTypeName:"FOLDER",assetId:e,assetType:t}).then(e=>e.data),v=(e,t)=>(e=>{let{name:t,description:a,directoryTypeName:r}=e;return(0,c.A)({method:"POST",apiURL:o.bN,apiServiceHost:d.VL,endpointVersion:"v1",endpoint:"/directory",data:{name:t,description:a,directoryTypeName:r}})})({name:e,description:t,directoryTypeName:"FOLDER"}).then(e=>e.data),b=e=>(e=>{let{collectionId:t}=e;return(0,c.A)({method:"DELETE",apiURL:o.bN,apiServiceHost:d.VL,endpointVersion:"v1",endpoint:`/directory/${t}`,_endpointMask:"/directory/:collectionId"})})({collectionId:e}).then(e=>e.data),w=(e,t)=>(e=>{let{collectionId:t,collectionName:a,collectionDescription:r,collectionTags:i}=e;return(0,c.A)({method:"PATCH",apiURL:o.bN,apiServiceHost:d.VL,endpointVersion:"v1",endpoint:`/directory/${t}`,_endpointMask:"/directory/:collectionId",data:{name:a,...r&&{description:r},...i&&{tags:i}}})})({collectionId:e,...t}).then(e=>e.data),_=e=>(e=>{let{assets:t,directoryTypeName:a,toDictionaryResponse:r=!0}=e;return(0,c.A)({method:"POST",apiURL:o.bN,apiServiceHost:d.VL,endpointVersion:"v1",endpoint:"/asset/by-ids",data:{directoryTypeName:a,assetItems:t,toDictionaryResponse:r}})})({assets:e,directoryTypeName:"FAVORITE",toDictionaryResponse:!1}),C=function(e){let{take:t,skip:a,order:r,orderByKey:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(e=>{let{directoryTypeName:t,assetTypes:a,take:r,skip:i,order:n,orderByKey:s}=e;return(0,c.A)({method:"GET",apiURL:o.bN,apiServiceHost:d.VL,endpointVersion:"v1.1",endpoint:"/asset",params:{directoryTypeName:t,assetTypes:a.toString(),take:r,skip:i,order:n,orderByKey:s}})})({directoryTypeName:"FAVORITE",assetTypes:e,take:t,skip:a,order:r,orderByKey:i})},T=e=>x({assets:e,directoryTypeName:"FAVORITE"}),I=(e,t)=>x({assets:e,directoryTypeName:"FOLDER",directoryId:t}),E=(e,t)=>I([{id:e,type:l.qy.Song}],t),A=(e,t)=>I([{id:e,type:l.qy.Track}],t),k=(e,t)=>I([{id:e,type:l.qy.Clip}],t),N=(e,t)=>y({assetId:e,assetType:t,directoryTypeName:"FAVORITE"}),S=(e,t,a)=>y({assetId:e,assetType:t,directoryTypeName:"FOLDER",directoryId:a}),M=(e,t)=>S(e,l.qy.Song,t),O=(e,t)=>S(e,l.qy.Track,t),L=(e,t)=>S(e,l.qy.Clip,t),P=(e,t)=>S(e,l.qy.Template,t),R=(e,t)=>S(e,l.qy.Voiceover,t),G=(e,t)=>S(e,l.qy.Lut,t),B=(e,t,a)=>S(e,a,t),U=s.z.object({name:s.z.string(),assetType:s.z.string()}),F=s.z.object({assets:s.z.array(p),folderName:s.z.string(),folderDescription:s.z.string().nullable().optional(),ownerName:s.z.string().nullish(),ownerEmail:s.z.string().nullish(),isCollaborative:s.z.boolean().nullish(),numberOfCollaborators:s.z.number().nullish(),tags:s.z.array(U.optional()).optional(),hasActiveThreads:s.z.boolean().nullish()}),$=async e=>{let{folderId:t,accessToken:a}=e,r=await (0,c.A)({method:"GET",headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"},endpointVersion:"v1",endpoint:"/get-shared-folder-assets",params:{folderId:t},accessToken:a}),i=F.safeParse(r.data);if(!i.success)return i;let n=i.data,s=[...n.assets].reverse();return{...i,data:{...n,assets:s}}},D=e=>{let{dataType:t}=e;return(0,c.A)({method:"GET",apiURL:o.bN,apiServiceHost:d.VL,endpointVersion:"v1",endpoint:`/recommendation/weights/${t}`})}},7375:(e,t,a)=>{"use strict";a.d(t,{e:()=>o});var r=a(7620),i=a(93696),n=a.n(i),s=a(24990);let o=()=>(0,r.useMemo)(()=>{if(s.S$)return{browser:{name:"",version:""},operatingSystem:{name:"",version:""},device:{type:"desktop",model:""},userAgent:""};let{userAgent:e}=window.navigator,t=new(n())(e),a=t.getBrowser(),r=t.getOS(),i=t.getDevice();return{browser:{name:a.name||"",version:a.version||""},operatingSystem:{name:r.name||"",version:r.version||""},device:{type:i.type||"desktop",model:i.model||""},userAgent:e}},[])},9798:(e,t,a)=>{"use strict";a.d(t,{F:()=>n});var r=a(32638),i=a(87790);let n=()=>(0,r.useQuery)({queryKey:["gen-ai-image-to-image-style-default"],queryFn:async()=>{let e=await (0,i.p)({page:1,assetType:"generatedImage",feature:"imageToImage"});return(null==e?void 0:e[0])||{id:"9f26a474-80c9-4a53-b610-48fc9926d5a4",imageGenerationCost:0,name:""}},refetchOnWindowFocus:!1,staleTime:1/0})},11098:(e,t,a)=>{"use strict";a.d(t,{m:()=>o});var r=a(7620),i=a(64779),n=a(65667),s=a(54568);let o=(0,r.forwardRef)((e,t)=>{let a,{children:o,text:l,placement:d="top",id:c,onHoverFn:u,sx:p,arrowSx:m,childrenContainerClassName:g="",disabled:h,onClose:x,withArrow:y=!1,popperProps:f,disableInteractive:j=!0}=e,v=(0,r.useRef)((0,n.A)());return c&&(a=`${c}-${v.current}`),(0,s.jsx)(i.A,{"data-testid":"Tooltip",arrow:y,placement:d,title:l,id:a,disableInteractive:j,onOpen:u,onClose:x,disableFocusListener:h,disableHoverListener:h,disableTouchListener:h,slotProps:{tooltip:{sx:{bgcolor:"common.black",fontSize:"small",paddingX:"0.875rem",paddingY:"0.5rem",borderRadius:"0.5rem",...p}},arrow:{sx:m},popper:f},children:(0,s.jsx)("div",{ref:t,className:g,children:o})})})},13764:(e,t,a)=>{"use strict";a.d(t,{OH:()=>d,Qs:()=>c});var r=a(7620),i=a(53549),n=a(24990),s=a(54568);let o={isReady:!1,isXS:!1,isAboveSM:!1,isBelowSM:!1,isSM:!1,isAboveMD:!1,isBelowMD:!1,isMD:!1,isAboveLG:!1,isBelowLG:!1,isLG:!1,isAboveXL:!1,isBelowXL:!1,isXL:!1,isAboveXXL:!1,isBelowXXL:!1,isXXL:!1,isAbove2XL:!1,isBelow2XL:!1,is2XL:!1,isAbove3XL:!1,isBelow3XL:!1,is3XL:!1,isAbove4XL:!1,isBelow4XL:!1,is4XL:!1,isTouchDevice:!0},l=(0,r.createContext)(o),d=e=>{var t;let{children:a}=e,[d,c]=(0,r.useState)(!1),u=(0,i.Ub)({minWidth:n.UZ.SM_UP}),p=(0,i.Ub)({minWidth:n.UZ.MD_UP}),m=(0,i.Ub)({minWidth:n.UZ.LG_UP}),g=(0,i.Ub)({minWidth:n.UZ.XL_UP}),h=(0,i.Ub)({minWidth:n.UZ.XXL_UP}),x=(0,i.Ub)({minWidth:n.UZ["2.5XL_UP"]}),y=(0,i.Ub)({minWidth:n.UZ["3XL_UP"]}),f=(0,i.Ub)({minWidth:n.UZ["4XL_UP"]}),j={isReady:d,isXS:!u,isAboveSM:u,isBelowSM:!u,isSM:u&&!p,isAboveMD:p,isBelowMD:!p,isMD:p&&!m,isAboveLG:m,isBelowLG:!m,isLG:m&&!g,isAboveXL:g,isBelowXL:!g,isXL:g&&!h,isAboveXXL:h,isBelowXXL:!h,isXXL:h&&!x,isAbove2XL:x,isBelow2XL:!x,is2XL:x&&!y,isAbove3XL:y,isBelow3XL:!y,is3XL:y&&!f,isAbove4XL:f,isBelow4XL:!f,is4XL:f,isTouchDevice:!n.S$&&(null==(t=window)?void 0:t.ontouchstart)!==void 0};(0,r.useEffect)(()=>{c(!0)},[]);let v=(0,r.useMemo)(()=>!d||n.S$?o:j,[d,j]);return(0,s.jsx)(l.Provider,{value:v,children:a})},c=()=>{let e=(0,r.useContext)(l);if(!e)throw Error("useResponsive must be used within a ResponsiveProvider");return e}},14969:(e,t,a)=>{"use strict";a.d(t,{r:()=>l});var r=a(7620),i=a(38271),n=a(65736),s=a(11098),o=a(54568);let l=(0,r.forwardRef)((e,t)=>{let{onClick:a,label:r,children:l,tooltipText:d,tooltipPlacement:c,className:u=""}=e,p=(0,o.jsx)(i.A,{ref:t,onClick:a,"aria-label":r,type:"button",className:(0,n.cn)("pointer-events-auto flex aspect-square w-8 shrink-0 cursor-pointer items-center justify-center rounded-full border-none bg-lowest-emphasis/80 text-white shadow-none outline-none transition-all duration-100 hover:bg-gray-400/80 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent active:scale-95 md:w-9",u),children:l});return d?(0,o.jsx)(s.m,{placement:c,text:d,children:p}):p})},17077:(e,t,a)=>{Promise.resolve().then(a.bind(a,77184))},17208:(e,t,a)=>{"use strict";a.d(t,{Do:()=>y,gU:()=>f,rK:()=>j,sN:()=>v});var r=a(8897),i=a(9940),n=a(30377),s=a(49089),o=a(75643),l=a(5601),d=a(94599),c=a(1108),u=a(86789),p=a(11161),m=a(65736),g=a(54568);let h=e=>(0,g.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.29289 6.29289C4.68342 5.90237 5.31658 5.90237 5.70711 6.29289L9 9.58579L12.2929 6.29289C12.6834 5.90237 13.3166 5.90237 13.7071 6.29289C14.0976 6.68342 14.0976 7.31658 13.7071 7.70711L9.70711 11.7071C9.31658 12.0976 8.68342 12.0976 8.29289 11.7071L4.29289 7.70711C3.90237 7.31658 3.90237 6.68342 4.29289 6.29289Z",fill:"currentColor"})}),x=u.P.create(l.A),y=e=>{let{ariaLabelPrefix:t,paperProps:a,listProps:r,...i}=e;return(0,g.jsx)(x,{disableUnderline:!0,variant:"standard",IconComponent:h,MenuProps:{PaperProps:a||{sx:e=>({maxHeight:240,padding:0,background:e.palette.grey["600"],scrollbarWidth:"thin",scrollbarColor:`${e.palette.grey["300"]} ${e.palette.grey["500"]} `})},MenuListProps:{"aria-label":`${t} options`,className:(0,m.cn)("scrollbar-thin scrollbar-track-gray-600 scrollbar-thumb-gray-400"),sx:{gap:0},...r},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{horizontal:"left",vertical:-8}},inputProps:{className:"focus-ring",tabIndex:0,"aria-label":`${t} select`},sx:e=>({height:"44px",boxShadow:"none",background:e.palette.grey["400"],transition:e.transitions.create("background",{duration:e.transitions.duration.shortest}),"&:hover":{background:e.palette.grey["300"]},color:e.palette.common.white,textTransform:"capitalize",fontWeight:e.typography.fontWeightMedium,borderRadius:1.5,[`& .${d.A.icon}`]:{color:e.palette.common.white,marginRight:"0.5rem"},[`& .${d.A.select}`]:{paddingTop:e.spacing(1),paddingRight:e.spacing(1.5),paddingLeft:e.spacing(1.5),paddingBottom:e.spacing(1),display:"flex",borderRadius:1.5}}),...i})},f=(0,c.Ay)(n.A)(e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",color:t.palette.text.lowEmphasis.main,backgroundColor:t.palette.grey[400],height:"40px",lineHeight:"20px"}}),j=e=>{let{children:t,...a}=e;return(0,g.jsxs)(s.A,{role:"option",...a,sx:e=>({textTransform:"none",color:"#B2B2B2",display:"flex",gap:"0.75rem",fontWeight:500,height:"40px",paddingTop:e.spacing(1),paddingBottom:e.spacing(1),paddingRight:e.spacing(2),paddingLeft:e.spacing(2),[`&.${o.A.selected}.${o.A.focusVisible}`]:{backgroundColor:e.palette.grey[400]},[`.${r.A.root}`]:{opacity:0,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shortest})},[`&.${o.A.selected} .${r.A.root}`]:{opacity:1}}),children:[t,(0,g.jsx)(i.A,{className:"flex flex-grow justify-end",children:(0,g.jsx)(p.N,{})})]})},v=e=>{let{children:t,text:a="Subscribe",...i}=e;return(0,g.jsxs)(s.A,{role:"option",...i,className:"flex gap-3 font-medium text-gray-300",sx:e=>({height:"40px",paddingTop:e.spacing(1),paddingBottom:e.spacing(1),paddingRight:e.spacing(2),paddingLeft:e.spacing(2),[`.${r.A.root}`]:{opacity:0,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shortest})},[`&.${o.A.selected} .${r.A.root}`]:{opacity:1}}),children:[t,(0,g.jsx)("span",{className:"flex flex-grow justify-end text-yellow-500",children:a})]})}},18838:(e,t,a)=>{"use strict";a.d(t,{d:()=>i});var r=a(82377);let i=(0,a(1108).Ay)(r.A)(e=>{let{theme:t}=e;return{width:24,height:16,padding:1,display:"flex","&:active":{"& .MuiSwitch-thumb":{width:10},"& .MuiSwitch-switchBase.Mui-checked":{transform:"translateX(8px)"}},"& .MuiSwitch-switchBase":{padding:3,"&.Mui-checked":{transform:"translateX(8px)",color:"#fff","& + .MuiSwitch-track":{opacity:1,backgroundColor:"#FFDA2A"}}},"& .MuiSwitch-thumb":{width:10,height:10,borderRadius:100,transition:t.transitions.create(["width"],{duration:200})},"& .MuiSwitch-track":{borderRadius:100,opacity:1,backgroundColor:"#c0c0c0",boxSizing:"border-box"}}})},26538:(e,t,a)=>{"use strict";a.d(t,{VS:()=>l,fP:()=>d,wr:()=>o});var r,i=a(72466),n=a(76468);class s{constructor(e){let{baseUrl:t}=e;this.baseUrl=t}async query(e,t,a,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,n.A)({method:"POST",apiURL:this.baseUrl,endpointVersion:(null==a?void 0:a.version)||"v1",endpoint:"/graphql",timeout:null==a?void 0:a.timeout,data:{query:e,variables:t},sendMethod:"raw",headers:r,shouldAttachAnonymousIdHeader:!0,shouldAttachUserIdHeader:!0,shouldAttachUserStatusHeader:!0,shouldAttachPreReleaseHeader:null==a?void 0:a.shouldAttachPreReleaseHeader}).then(e=>{var t;return i?e:null==e||null==(t=e.data)?void 0:t.data})}}let o=function(e){let{baseUrl:t}=e;return new s({baseUrl:t})}({baseUrl:i.uG}),l=((r={}).V1="v1",r.V2="v2",r),d={getArtistSongs:(e,t,a,r,s)=>(0,n.A)({method:"GET",apiURL:i.uG,endpointVersion:"v1",endpoint:"/songs/artist-songs",params:{artistId:e,take:t,skip:a,albumId:r},shouldAttachPreReleaseHeader:s}),getArtistSfx:function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return(0,n.A)({method:"GET",apiURL:i.uG,endpointVersion:"v1",endpoint:"/sfx/artistSfxs",params:{artistId:e,take:t,page:a,albumId:r}})}}},27170:(e,t,a)=>{"use strict";a.d(t,{A:()=>n}),a(7620);var r=a(65736),i=a(54568);let n=e=>{let{children:t,childClassName:a,overwriteClassName:n,...s}=e;return(0,i.jsx)("div",{"data-testid":"LoadingPlaceholder",...s,children:(0,i.jsxs)("div",{className:(0,r.cn)("relative h-full w-full overflow-hidden rounded",a),children:[(0,i.jsx)("div",{className:(0,r.cn)("absolute top-0 left-0 h-[inherit] w-[inherit] overflow-hidden bg-gray-600",n)}),(0,i.jsx)("div",{className:"absolute top-0 left-0 h-full w-[200%] animate-shimmer bg-gradient-to-r from-gray-600 via-gray-300 to-gray-600 opacity-20"}),t]})})}},31504:(e,t,a)=>{"use strict";a.d(t,{Ux:()=>g,XO:()=>h});var r=a(7620),i=a(16923),n=a(14590),s=a(54940),o=a(21797),l=a(184),d=a(75230),c=a(74826),u=a(35724),p=a(28948);let m=["suggest-prompt"],g=()=>0!==(0,i.useIsMutating)({mutationKey:m}),h=()=>{let{dispatch:e}=(0,p.kt)(),t=(0,r.useRef)(void 0),a=(0,o.useSession)(),{trackImageGenEvent:i}=(0,c.W)(),{state:g}=(0,p.Cm)(),{modelGroupId:h}=g,x=(0,u._M)();return(0,n.useMutation)({mutationKey:m,mutationFn:e=>{var r,i;if(!(null!=(r=a.data)&&r.accessToken))throw l.e$.error("No access token when trying to suggest prompt.",{userId:null==(i=a.data)?void 0:i.user.id}),Error("No access token when trying to suggest prompt.");return t.current&&t.current.abort(),t.current=new AbortController,(0,d.n2)(e,{signal:t.current.signal,accessToken:a.data.accessToken})},onSuccess:t=>{e({type:"promptSuggested",payload:t}),i({name:"suggested prompt viewed",generate_type:"image to video",gen_ai_model:(0,u.Gl)(h,x.imageToVideo)})},onSettled:s.gq})}},32139:(e,t,a)=>{"use strict";a.d(t,{I:()=>i});var r=a(3548);let i=e=>(0,r.YW)(e).with("HD",()=>({short:"720p",long:"720p (HD)"})).with("FULL_HD",()=>({short:"1080p",long:"1080p (Full HD)"})).with("4K",()=>({short:"2160p",long:"2160p (4K)"})).with("2K",()=>({short:"1440p",long:"1440p (2K)"})).exhaustive()},38564:(e,t,a)=>{"use strict";a.d(t,{u:()=>n});var r=a(3548),i=a(99316);let n=(e,t)=>{let{isReady:a,getTreatment:n}=(0,i.O)(e,t),s=n();return(0,r.YW)({isReady:a,treatmentWithConfig:s}).with({isReady:!1},()=>({isReady:!1,isFeatureEnabled:!1,status:"pending"})).with({isReady:!0,treatmentWithConfig:{treatment:"on"}},()=>({isReady:!0,isFeatureEnabled:!0,status:"enabled"})).with({isReady:!0,treatmentWithConfig:r.P.union({treatment:r.P.string},void 0)},()=>({isReady:!0,isFeatureEnabled:!1,status:"disabled"})).exhaustive()}},42218:(e,t,a)=>{"use strict";a.d(t,{yj:()=>p,mu:()=>x,fc:()=>j,KB:()=>c,QB:()=>m,Iu:()=>b,n8:()=>d,RI:()=>g,zd:()=>u,Bk:()=>v,f4:()=>h,zM:()=>y,Ie:()=>o,h5:()=>f,Bx:()=>l});var r=a(72466),i=a(54568);let n=e=>{let{className:t}=e;return(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none",className:t,children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.849469 11.4677C0.309542 10.4023 0 9.20011 0 7.91873C0 6.63732 0.309542 5.43513 0.849469 4.36969C2.15244 1.77813 4.82322 0 7.91873 0C10.0568 0 11.8421 0.784666 13.2171 2.06608L10.9494 4.33371C10.1216 3.55622 9.08492 3.15308 7.91873 3.15308C5.85986 3.15308 4.11053 4.54247 3.48424 6.41417C3.32587 6.8893 3.23226 7.39319 3.23226 7.91873C3.23226 8.44424 3.32587 8.94817 3.48424 9.42329L3.47487 9.43047H3.48424C4.11053 11.3022 5.85986 12.6916 7.91873 12.6916C8.98414 12.6916 9.884 12.4036 10.5895 11.9285C11.4318 11.367 11.9933 10.5319 12.1804 9.54566H7.91873V6.47894H15.3767C15.4703 6.99728 15.5207 7.53718 15.5207 8.0987C15.5207 10.5103 14.6568 12.5404 13.1595 13.9226C11.8493 15.132 10.0568 15.8374 7.91873 15.8374C4.82322 15.8374 2.15244 14.0593 0.849469 11.475V11.4677Z",fill:"currentColor"})})},s=`${r.u5}/artlist/visitor-home-page`,o={src:`${s}/chatGpt-icon.svg?auto=format`,svg:e=>{let{className:t}=e;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",className:t,children:[(0,i.jsx)("g",{clipPath:"url(#clip0_171_103465)",children:(0,i.jsx)("path",{d:"M7.59767 7.31867V5.44599C7.59767 5.28803 7.6567 5.16996 7.79499 5.09124L11.5595 2.92338C12.0722 2.62766 12.6828 2.48991 13.3136 2.48991C15.6788 2.48991 17.177 4.32324 17.177 6.2741C17.177 6.41185 17.177 6.56981 17.1573 6.72724L13.2545 4.44078C13.0179 4.30302 12.7817 4.30302 12.545 4.44078L7.59767 7.31867ZM16.3883 14.6115V10.137C16.3883 9.86097 16.2697 9.66364 16.0335 9.52589L11.0861 6.648L12.7025 5.7215C12.8402 5.64278 12.9588 5.64278 13.0966 5.7215L16.8611 7.88936C17.945 8.52014 18.6742 9.86043 18.6742 11.1614C18.6742 12.6591 17.7876 14.0393 16.3877 14.6105L16.3883 14.6115ZM6.43449 10.6694L4.81817 9.72321C4.68041 9.6445 4.62085 9.52589 4.62085 9.36846V5.03221C4.62085 2.92338 6.23717 1.32673 8.42524 1.32673C9.25335 1.32673 10.0219 1.60277 10.6724 2.09527L6.78924 4.34238C6.55256 4.48013 6.43449 4.67745 6.43449 4.95349V10.6694ZM9.91339 12.6798L7.59714 11.3789V8.6196L9.91339 7.31867L12.2291 8.6196V11.3789L9.91339 12.6798ZM11.4015 18.6718C10.5734 18.6718 9.80489 18.3957 9.15442 17.9032L13.0375 15.6561C13.2742 15.5184 13.3923 15.321 13.3923 15.045V9.3291L15.0283 10.2753C15.166 10.354 15.2251 10.4726 15.2251 10.63V14.9663C15.2251 17.0751 13.5891 18.6718 11.4015 18.6718ZM6.7302 14.2765L2.9657 12.1086C1.88176 11.4778 1.15258 10.1375 1.15258 8.8366C1.15258 7.31867 2.05941 5.95871 3.45873 5.38749V9.88118C3.45873 10.1572 3.5768 10.3545 3.81348 10.4923L8.74117 13.35L7.12484 14.2765C6.98709 14.3552 6.86796 14.3552 6.7302 14.2765ZM6.5132 17.5091C4.28577 17.5091 2.64977 15.8338 2.64977 13.7643C2.64977 13.6069 2.66945 13.4489 2.68913 13.2915L6.57224 15.5386C6.80892 15.6763 7.0456 15.6763 7.28174 15.5386L12.2291 12.6809V14.5536C12.2291 14.711 12.1701 14.8296 12.0318 14.9083L8.26728 17.0767C7.75457 17.3724 7.14399 17.5102 6.5132 17.5102V17.5091ZM11.4015 19.8546C13.7864 19.8546 15.7771 18.1596 16.2308 15.9125C18.438 15.3407 19.8576 13.2713 19.8576 11.1624C19.8576 9.78278 19.2662 8.44249 18.2019 7.47663C18.3003 7.06285 18.3599 6.64853 18.3599 6.23474C18.3599 3.41641 16.0734 1.30706 13.4322 1.30706C12.9003 1.30706 12.3876 1.38577 11.8749 1.56341C10.9877 0.695948 9.76553 0.144409 8.42577 0.144409C6.04091 0.144409 4.05016 1.83945 3.59648 4.08656C1.38873 4.65831 -0.0302734 6.72778 -0.0302734 8.8366C-0.0302734 10.2162 0.561155 11.5565 1.62541 12.5224C1.52701 12.9362 1.46745 13.3505 1.46745 13.7643C1.46745 16.5826 3.75391 18.692 6.39513 18.692C6.92699 18.692 7.43971 18.6133 7.95242 18.4356C8.83956 19.3031 10.0612 19.8546 11.4015 19.8546Z",fill:"currentColor"})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_171_103465",children:(0,i.jsx)("rect",{width:"20",height:"20",fill:"currentColor"})})})]})},alt:"Sora",aspectRatio:26.657/29.328},l={src:`${s}/google-icon.svg?auto=format`,svg:n,alt:"Veo",aspectRatio:21.329/29.328},d={src:`${s}/google-icon.svg?auto=format`,svg:n,alt:"Nano Banana",aspectRatio:21.328/29.328},c={src:`${s}/kling-icon.svg?auto=format`,svg:e=>{let{className:t}=e;return(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",className:t,children:(0,i.jsx)("path",{d:"M9.39506 0.0269398C9.8995 -0.000516998 10.19 -0.00498672 10.6302 0.00459125C12.8646 0.105479 16.0591 1.41702 17.4155 3.23492C18.7739 5.05473 17.3416 8.25569 16.207 9.90885L20 13.6628C17.4162 19.0622 10.6516 21.7134 5.13843 18.7991C4.28775 18.3496 2.81657 17.3318 2.3627 16.4979C1.32205 14.5842 2.72126 11.7797 3.75024 10.1081L0 6.43843V6.24751C0.560851 4.67417 1.83816 3.26876 3.18161 2.25031C4.91733 0.934293 7.02003 0.207644 9.39506 0.0269398ZM14.5763 2.23753C14.3053 2.19411 14.0971 1.99362 13.8631 1.88762C9.86903 0.0748297 5.09693 1.36275 2.33418 4.62564C2.1442 4.84977 1.25008 6.0004 1.30519 6.20154L4.50302 9.36546C6.68547 6.55528 9.84439 3.57526 13.3774 2.55425C13.7418 2.44889 14.1043 2.42399 14.4492 2.33331C14.5095 2.31735 14.5951 2.31735 14.5763 2.23753ZM15.484 9.42995C16.9734 7.52393 18.6922 2.65322 14.4875 3.00888C13.1116 3.12509 11.6916 3.91304 10.5265 4.5918C10.437 4.72142 10.6367 4.62436 10.6802 4.61543C14.0537 3.91432 16.205 6.15875 15.484 9.42995ZM11.6482 5.1205C8.63256 5.26928 5.53459 8.17524 5.071 11.0703C4.58406 14.1104 6.88063 15.5062 9.70369 14.6678C12.4107 13.8639 15.176 10.7638 14.9569 7.87832C14.8207 6.08468 13.4364 5.03239 11.6482 5.1205ZM9.39376 15.4143C7.73196 15.7667 6.00337 15.4934 4.98671 14.0465C4.2871 13.0511 4.31045 12.0013 4.46152 10.8539C4.46735 10.8073 4.51663 10.578 4.40511 10.6706C3.43578 12.0696 1.75452 15.7067 3.82092 16.7833C5.40491 17.6083 8.05421 16.3574 9.39376 15.4143ZM5.37703 17.706C6.08247 18.2008 7.04921 18.5629 7.90313 18.7557C12.1377 19.7109 16.6719 17.5578 18.7045 13.8531L15.4529 10.7032C14.101 12.5089 12.4425 14.1647 10.5797 15.4653C9.0767 16.5151 7.23595 17.531 5.37703 17.706Z",fill:"currentColor"})})},alt:"Kling",aspectRatio:26.656/29.328},u={src:`${s}/bytedance-icon.svg?auto=format`,svg:e=>{let{className:t}=e;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 16",fill:"currentColor",className:t,children:[(0,i.jsx)("path",{d:"M3.06965 14.0137L6.10352e-05 14.803V0.817383L3.06965 1.6067V14.0137Z",fill:"currentColor"}),(0,i.jsx)("path",{d:"M17.8982 14.8334L14.8228 15.6228V0L17.8982 0.783475V14.8334Z",fill:"currentColor"}),(0,i.jsx)("path",{d:"M7.94179 14.4414L4.87219 15.2308V6.99255L7.94179 7.78184V14.4414Z",fill:"currentColor"}),(0,i.jsx)("path",{d:"M9.94312 5.77012L13.0185 4.98077V13.219L9.94312 12.4296V5.77012Z",fill:"currentColor"})]})},alt:"Seedance",aspectRatio:23.992/29.328},p={src:`${s}/fluxKontext-icon.svg?auto=format`,svg:e=>{let{className:t}=e;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 16",fill:"none",className:t,children:[(0,i.jsx)("path",{d:"M17.9596 16H16.0338L11.0392 8.32983H12.965L17.9596 16Z",fill:"currentColor"}),(0,i.jsx)("path",{d:"M0 15.9589L10.5558 0L21.0909 16H19.1136C19.083 15.9271 19.0342 15.8491 18.9905 15.7831C16.1713 11.5237 13.38 7.24563 10.5558 2.9896L3.0688 14.3299H13.7173L14.7634 15.9321L14.7882 16H0V15.9589Z",fill:"currentColor"}),(0,i.jsx)("path",{d:"M17.3732 8.08232C17.3678 8.08109 17.333 8.05198 17.3524 8.04146L19.2369 5.25763L21.0821 8.04043C21.1003 8.05302 21.0628 8.08253 21.0601 8.08253H17.3732V8.08232Z",fill:"currentColor"}),(0,i.jsx)("path",{d:"M7.08521 12.5154L8.92855 9.77289L10.7309 12.5154H7.08521Z",fill:"currentColor"})]})},alt:"Flux Kontext",aspectRatio:29.33/29},m={src:`${s}/minimax-icon.svg?auto=format`,svg:e=>{let{className:t}=e;return(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 20",fill:"none",className:t,children:(0,i.jsx)("path",{d:"M16.9562 0C18.1604 0 19.1365 0.926999 19.1365 2.07V14.571C19.1448 14.7625 19.2303 14.9434 19.3748 15.0757C19.5194 15.2079 19.7118 15.2812 19.9115 15.28C20.111 15.2809 20.3031 15.2076 20.4474 15.0754C20.5917 14.9431 20.6771 14.7623 20.6854 14.571V7.09899C20.6869 6.82846 20.7439 6.56087 20.8531 6.3115C20.9624 6.06212 21.1217 5.83583 21.322 5.64556C21.5223 5.4553 21.7597 5.30477 22.0207 5.20258C22.2816 5.10039 22.5609 5.04854 22.8427 5.04999C23.1246 5.04854 23.404 5.10043 23.665 5.20268C23.926 5.30493 24.1634 5.45554 24.3638 5.64592C24.5641 5.83629 24.7234 6.06269 24.8326 6.31219C24.9417 6.56168 24.9986 6.82938 25 7.09999V13.661C24.9989 13.8329 24.9268 13.9974 24.7994 14.1184C24.6721 14.2393 24.5 14.3068 24.3208 14.306C24.2321 14.3065 24.144 14.2902 24.0618 14.2581C23.9796 14.226 23.9047 14.1786 23.8416 14.1187C23.7784 14.0588 23.7282 13.9876 23.6937 13.909C23.6592 13.8305 23.6412 13.7462 23.6406 13.661V7.09999C23.6401 6.99992 23.619 6.90094 23.5786 6.80869C23.5382 6.71644 23.4793 6.63273 23.4052 6.56234C23.3311 6.49196 23.2433 6.43627 23.1468 6.39846C23.0503 6.36065 22.9469 6.34146 22.8427 6.34199C22.7385 6.34146 22.6351 6.36065 22.5386 6.39846C22.4421 6.43627 22.3543 6.49196 22.2802 6.56234C22.2061 6.63273 22.1472 6.71644 22.1068 6.80869C22.0664 6.90094 22.0453 6.99992 22.0448 7.09999V14.572C22.0433 14.8395 21.9869 15.1041 21.8789 15.3507C21.7709 15.5973 21.6133 15.821 21.4152 16.0091C21.2171 16.1973 20.9824 16.3461 20.7243 16.4471C20.4663 16.5482 20.1901 16.5994 19.9115 16.598C19.6328 16.5994 19.3566 16.5482 19.0986 16.4471C18.8406 16.3461 18.6058 16.1973 18.4077 16.0091C18.2096 15.821 18.052 15.5973 17.944 15.3507C17.836 15.1041 17.7796 14.8395 17.7781 14.572V2.072C17.7695 1.86888 17.6791 1.67689 17.526 1.53645C17.3729 1.396 17.169 1.31805 16.9573 1.319C16.7455 1.31778 16.5415 1.39548 16.3882 1.53574C16.2349 1.676 16.1443 1.86788 16.1354 2.071L16.1344 17.975C16.1311 18.515 15.9045 19.0318 15.5044 19.4115C15.1044 19.7912 14.5636 20.0029 14.001 20C13.7224 20.0014 13.4462 19.9502 13.1882 19.8491C12.9301 19.7481 12.6954 19.5993 12.4973 19.4111C12.2992 19.223 12.1416 18.9993 12.0336 18.7527C11.9256 18.5061 11.8692 18.2415 11.8677 17.974V16.04C11.8677 15.684 12.1719 15.395 12.5469 15.395C12.9219 15.395 13.226 15.684 13.226 16.04V17.974C13.226 18.237 13.374 18.48 13.6135 18.612C13.8531 18.743 14.149 18.743 14.3885 18.612C14.5061 18.548 14.6039 18.4552 14.672 18.3432C14.74 18.2311 14.7759 18.1037 14.776 17.974V2.07C14.776 0.926999 15.7521 0 16.9562 0ZM11.0458 0C12.25 0 13.226 0.926999 13.226 2.07V13.593C13.2256 13.6782 13.2077 13.7624 13.1734 13.841C13.139 13.9195 13.0888 13.9908 13.0258 14.0507C12.9627 14.1106 12.8879 14.1579 12.8057 14.1901C12.7236 14.2222 12.6356 14.2385 12.5469 14.238C12.4581 14.2385 12.3702 14.2222 12.288 14.1901C12.2058 14.1579 12.1311 14.1106 12.068 14.0507C12.0049 13.9908 11.9547 13.9195 11.9204 13.841C11.886 13.7624 11.8681 13.6782 11.8677 13.593V2.07C11.8663 1.86198 11.779 1.66298 11.6249 1.51673C11.4708 1.37048 11.2625 1.28893 11.0458 1.29C10.8291 1.28893 10.6209 1.37048 10.4668 1.51673C10.3127 1.66298 10.2253 1.86198 10.224 2.07V16.083C10.2207 16.629 9.99168 17.1514 9.58737 17.5354C9.18305 17.9194 8.63646 18.1336 8.06771 18.131C7.49877 18.1339 6.95192 17.9198 6.54738 17.5358C6.14283 17.1517 5.91372 16.6291 5.91042 16.083V7.09999C5.90987 6.99992 5.8888 6.90094 5.8484 6.80869C5.80801 6.71644 5.74908 6.63273 5.67499 6.56234C5.6009 6.49196 5.51309 6.43627 5.41657 6.39846C5.32006 6.36065 5.21674 6.34146 5.1125 6.34199C5.00826 6.34146 4.90494 6.36065 4.80843 6.39846C4.71191 6.43627 4.6241 6.49196 4.55001 6.56234C4.47592 6.63273 4.41699 6.71644 4.3766 6.80869C4.3362 6.90094 4.31513 6.99992 4.31458 7.09999V10.9C4.31308 11.1705 4.25609 11.4381 4.14686 11.6875C4.03764 11.9369 3.87831 12.1631 3.67799 12.3534C3.47767 12.5437 3.24027 12.6942 2.97934 12.7964C2.71842 12.8986 2.43909 12.9504 2.15729 12.949C1.8755 12.9504 1.59616 12.8986 1.33524 12.7964C1.07432 12.6942 0.836917 12.5437 0.636593 12.3534C0.436269 12.1631 0.276946 11.9369 0.167719 11.6875C0.0584916 11.4381 0.00150072 11.1705 0 10.9L0 9.52199C0 9.16499 0.304167 8.87599 0.679167 8.87599C1.05417 8.87599 1.35937 9.16599 1.35937 9.52199V10.9C1.35937 11.318 1.71667 11.657 2.15729 11.657C2.59792 11.657 2.95521 11.318 2.95521 10.9V7.09899C2.95851 6.55299 3.18748 6.03058 3.5918 5.64657C3.99612 5.26255 4.54271 5.04833 5.11146 5.05099C5.68039 5.04807 6.22725 5.26216 6.63179 5.64621C7.03633 6.03026 7.26544 6.55281 7.26875 7.09899V16.083C7.26875 16.502 7.62604 16.841 8.06771 16.841C8.50833 16.841 8.86562 16.502 8.86562 16.083V2.07C8.86562 0.926999 9.84167 0 11.0458 0Z",fill:"currentColor"})})},alt:"Minimax",aspectRatio:33.32/29.328},g={src:d.src,alt:"Nano Banana"},h={src:u.src,alt:"Seedream 4.0"},x={src:p.src,alt:"Flux Kontext"},y={src:o.src,alt:"Sora 2"},f={src:l.src,alt:"VEO 3.1"},j={src:c.src,alt:"Kling 2.5"},v={src:u.src,alt:"Seedance V1 Pro"},b={src:m.src,alt:"Minimax"}},48060:(e,t,a)=>{"use strict";a.d(t,{a:()=>o}),a(7620);var r=a(10933),i=a.n(r),n=a(65736),s=a(54568);let o=e=>{let{href:t,children:a,isActive:r,onClick:o,disabled:l}=e;return l?(0,s.jsx)("div",{className:"shrink-0 grow flex flex-col gap-1.5 lg:flex-none",children:(0,s.jsx)("p",{className:"text-center text-sm font-normal transition-colors text-gray-200 hover:text-gray-100",children:a})}):(0,s.jsxs)("div",{className:"shrink-0 grow flex flex-col gap-1.5 lg:flex-none",children:[(0,s.jsx)(i(),{scroll:!1,role:"tab","aria-selected":r,href:t,onClick:o,className:(0,n.cn)("text-center text-sm font-normal transition-colors",r?"text-white sm:text-gray-50":"text-gray-100 sm:text-gray-200"),children:a}),r?(0,s.jsx)("div",{className:"h-[1.5px] w-full bg-white lg:bg-gray-50"}):null]})}},50527:(e,t,a)=>{"use strict";a.d(t,{f:()=>r});let r=e=>e.replace("v1","V1")},51786:(e,t,a)=>{"use strict";a.d(t,{l:()=>r});let r=()=>{}},52367:(e,t,a)=>{"use strict";a.d(t,{C:()=>i});var r=a(7620);let i=()=>{let e=(0,r.useRef)(void 0),t=(0,r.useRef)(!1);return{applyUnscrollableStyleToBody:()=>{t.current||(e.current={overflow:document.body.style.overflow,position:document.body.style.position,top:document.body.style.top,scrollYOffset:window.scrollY},document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`${window.scrollY}px`,t.current=!0)},restoreScrollableStyleToBody:()=>{if(e.current&&t.current){var a;a=e.current,document.body.style.overflow=a.overflow??"",document.body.style.position=a.position??"",document.body.style.top=a.top??"",a.scrollYOffset&&window.scrollTo(0,a.scrollYOffset),t.current=!1}}}}},53820:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(7620),i=a(62596),n=a(54568);let s=(0,r.forwardRef)((e,t)=>{let{to:a,children:r,...s}=e;return(0,n.jsx)(i.A,{to:a,"aria-label":s.ariaLabel,"data-testid":"Link",...s,ref:t,children:r})})},53926:(e,t,a)=>{"use strict";a.d(t,{i:()=>h,x:()=>x});var r=a(7620),i=a(32638),n=a(21797),s=a(26430),o=a(32097),l=a.n(o),d=a(24990);let c="accountManager",u=e=>{if(!d.S$&&e)try{let t={data:e,timestamp:Date.now()};localStorage.setItem(c,JSON.stringify(t))}catch{}},p=async()=>{let e=await fetch("/api/account-manager");if(!e.ok)throw Error(`Failed to fetch account manager: ${e.status}`);let t=await e.json();return u(t),t},m=()=>{if(d.S$)return;let e=(()=>{if(d.S$)return{};try{let e=localStorage.getItem(c);return e?JSON.parse(e):{}}catch{return{}}})();return null!=e&&e.data&&l()(e.timestamp)&&Date.now()-e.timestamp<864e5?e.data:void localStorage.removeItem(c)},g=["accountManager"],h=()=>{let e="authenticated"===(0,n.useSession)().status,{isEnterpriseForAccountManager:t}=(0,s.f)(),a=e&&t,o=(0,i.useQuery)({initialData:m,queryKey:g,queryFn:p,enabled:a,staleTime:864e5,retry:!1,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchInterval:!!a&&864e5});return(0,r.useEffect)(()=>{o.data&&u(o.data)},[o.data]),{query:o,isAccountManagerEnabled:a}},x=()=>{let{query:e,isAccountManagerEnabled:t}=h();return{accountManager:e.data?e.data:{},isAccountManagerEnabled:t}}},55760:(e,t,a)=>{"use strict";a.d(t,{F:()=>s,M:()=>o});var r=a(7620),i=a(32638),n=a(61608);let s=()=>{let e=(0,i.useQuery)({initialData:n.jH,queryKey:n.TJ,queryFn:()=>(0,n.c$)(),staleTime:1/0,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1});return(0,r.useEffect)(()=>{e.data&&(0,n.U2)(e.data)},[e.data]),e},o=()=>{let e=s();return{geoData:e.data?(0,n.Bj)(e.data):{}}}},59786:(e,t,a)=>{"use strict";a.d(t,{VP:()=>s,ZK:()=>c,gH:()=>m});var r=a(41935),i=a(80752);let n=r.z.string(),s=e=>{let[t,a]=e.toLowerCase().split(/\D+/).map(Number);if(Number.isNaN(t)||Number.isNaN(a))throw Error(`Invalid dimensions format. Expected '{number}{separator}{number}', got '${e}'`);return{width:t,height:a}},o=r.z.object({id:r.z.string(),styleId:r.z.string(),prompt:r.z.string(),imageUrl:r.z.string().url(),displayOrder:r.z.number().int(),dimensions:r.z.string().transform(s),aspectRatio:i.h7}).transform(e=>({...e,variant:"imageShowcaseExample"})),l=r.z.object({videoUrl:r.z.string().url(),videoResolution:i.Cg}).and(o).transform(e=>({...e,variant:"videoShowcaseExample"})),d=r.z.object({id:r.z.string(),coverImageUrl:r.z.string(),name:r.z.string(),upscaleCost:r.z.number().nullable(),videoGenerationFullHdCost:r.z.number().nullable(),videoGenerationHdCost:r.z.number().nullable(),imageGenerationCost:r.z.number(),description:r.z.string(),tags:r.z.array(n).optional().default([]),showcases:r.z.array(r.z.union([l,o])).nullish().default([])});r.z.object({page:r.z.number(),assetType:r.z.enum(["generatedImage","generatedVideo"]).optional(),feature:r.z.enum(["imageToImage","upscaleVideo","generateVideo","generateVideoFromCustomImage"]).optional()});let c=r.z.object({generativeMediaStyleList:r.z.array(d)});r.z.object({id:r.z.string()});let u=r.z.object({generativeMediaStyles:r.z.array(d).length(1)}),p=r.z.object({generativeMediaStyles:r.z.array(d).length(0)}),m=r.z.union([u,p])},62596:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var r=a(7620),i=a(10933),n=a.n(i),s=a(902),o=a(65736),l=a(54568);let d="noopener noreferrer",c=r.forwardRef((e,t)=>{let{to:a,additionalOnClickFn:r,className:i,activeClassName:c,shouldOpenInNewTab:u,isExternalLink:p,shallow:m,noFollow:g,shouldAddHttp:h,children:x,ariaLabel:y,activeRouteMatcher:f,...j}=e,v=(0,s.usePathname)(),b=g?`${d} nofollow`:d;if(p){let e=h?/^https?:\/\//i.test(a)?a:`http://${a}`:a;return(0,l.jsx)("a",{...j,href:e,onClick:r,className:i,rel:b,...u&&{target:"_blank"},"aria-label":y,children:x})}let w=(f?f(v):v===a)?(0,o.cn)(i,c):i;return(0,l.jsx)(n(),{href:a,shallow:m,...j,className:w,onClick:e=>{"function"==typeof r&&r(e)},role:"link",ref:t,...u&&{target:"_blank"},prefetch:!1,children:x})})},68275:(e,t,a)=>{"use strict";a.d(t,{$:()=>c,O:()=>d});var r,i=a(7620),n=a(74706),s=a(65736),o=a(11098),l=a(54568);let d=((r={}).white="white",r.warning="warning",r.gray="gray",r.lightGray="light-gray",r.gradient="gradient",r.default="default",r),c=(0,i.forwardRef)((e,t)=>{let{text:a="",children:r="",type:i="button",variant:c="contained",theme:u=d.default,size:p="md",isFullWidth:m=!1,customSpacingX:g="",customSpacingY:h="",textCase:x="original",textColor:y="",textHoverColor:f="",textAndBorderHoverColor:j="",onClickFn:v=()=>{},onHoverFn:b,onMouseUpFn:w,isHighlighted:_=!1,hasUnderline:C=!1,isDisabled:T=!1,hasPointerCursorWhenDisabled:I=!1,icon:E=null,startIcon:A=null,endIcon:k=null,iconSize:N="1x",iconClassNames:S,isLoaderShown:M=!1,shouldLoaderHideContent:O=!1,hasTooltip:L=!1,tooltipText:P="",tooltipId:R="",tooltipPlacement:G,label:B,classNames:U,autoFocus:F,nativeProps:$={}}=e;if(!a&&!r&&!E)return null;let D=c;E&&"circled"!==D&&(D="text");let V=(0,s.cn)("flex justify-center items-center","text"!==D&&"font-bold","text"!==D&&"rounded-full",m&&"w-full","upper"===x&&"uppercase","lower"===x&&"lowercase","capitalize"===x&&"capitalize",M&&"cursor-wait",I?"disabled:cursor-pointer":"disabled:cursor-not-allowed","disabled:text-invert disabled:bg-gray-300 disabled:border-gray-300","transition-colors"),X="";switch(D){case"circled":X=(0,s.cn)("disabled:text-gray-300 bg-transparent disabled:bg-transparent rounded-full border",E&&`${_?"border-accent":"border-gray-200"}`,E&&`${y||(_?"text-accent":"text-white")}`,u===d.gray&&"!text-white font-bold !bg-gray-400 !border-0 rounded-full hover:bg-gray-300",E&&`${f||(_?"text-primary-dark hover:border-primary-dark":"hover:text-accent hover:border-accent")}`);break;case"text":X=(0,s.cn)("disabled:text-gray-300 bg-transparent disabled:bg-transparent",y||(_?"":"text-white"),E&&`${y||(_?"text-accent":"text-gray-100")} ${f||"hover:text-white"}`,!M&&(f||"hover:text-accent"),C&&"underline");break;case"outlined":X=(0,s.cn)("border disabled:text-gray-300 disabled:bg-transparent",y||"text-white",u===d.default&&!_&&"border-white",u===d.white&&"bg-white rounded-full border border-white hover:text-invert hover:bg-gray-50 hover:border-gray-50",u===d.warning&&"text-white bg-transparent rounded-full border border-error hover:text-error hover:bg-gray-50 hover:border-gray-50",_&&"border-accent","bg-transparent",!M&&(j||"hover:text-invert hover:bg-white"));break;default:X=(0,s.cn)(u===d.default&&"text-primary-contrast bg-primary",!M&&u===d.default&&"transition-all duration-300 hover:bg-primary-dark",u===d.white&&"text-black bg-white rounded-full border border-white hover:text-invert hover:bg-gray-50 hover:border-gray-50",u===d.gradient&&"text-black bg-gradient-to-r from-orange-100 to-yellow-100 rounded-full hover:text-invert hover:bg-gray-50 hover:border-gray-50",u===d.gray&&"text-white font-bold bg-gray-400 rounded-full hover:bg-gray-300",u===d.lightGray&&"text-black bg-gray-50 hover:bg-gray-100")}let W="",z="",K="";switch(p){case"xxs":W=`${h||"py-1"} ${g||"px-5.5"}`,z="text-sm leading-3",E&&(W="w-4 h-4","circled"===D&&(W="w-7 h-7"));break;case"xs":W=`${h||"py-1"} ${g||"px-7"}`,z="text-sm leading-3",E&&(W="w-6 h-6","circled"===D&&(W="w-7 h-7"));break;case"sm":W=`${h||"py-2"} ${g||"px-8"}`,z="text-sm leading-4",E&&(W="w-8 h-8","circled"===D&&(W="w-9 h-9",K="w-4 h-4"));break;case"md":default:W=`${h||"py-2.5"} ${g||"px-12"}`,z="text-sm leading-4",E&&(W="w-10 h-10","circled"===D&&(K="w-6 h-6"));break;case"lg":W=`${h||"py-3"} ${g||"px-13"}`,z="text-base leading-5",E&&(W="w-12 h-12","circled"===D&&(W="w-11 h-11",K="w-7.5 h-7.5"));break;case"xl":W=`${h||"py-4"} ${g||"px-14.5"}`,z="text-lg leading-5",E&&(W="w-14 h-14","circled"===D&&(W="w-13 h-13",K="w-9 h-9"));break;case"2xl":W=`${h||"py-5"} ${g||"px-16"}`,z="text-xl leading-5",E&&(W="w-16 h-16","circled"===D&&(W="w-16 h-16",K="w-11 h-11"));break;case"3xl":W=`${h||"py-7"} ${g||"px-18"}`,z="text-3.5xl leading-6",E&&(W="w-20 h-20","circled"===D&&(W="w-20 h-20",K="w-14 h-14"))}"text"===D&&(W="p-0"),E&&(W=(0,s.cn)(W,"grid place-items-center","circled"!==D&&"p-0"));let H=function(){let{icon:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(M)return(0,l.jsx)("span",{"data-testid":"renderIconOrLoader",className:(0,s.cn)("flex min-h-5 min-w-5 items-center justify-center",!e&&"absolute",!e&&!O&&"-left-6"),children:(0,l.jsx)("svg",{className:"animate-rotateSpinnerWrapper",width:"15px",height:"15px",viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("circle",{fill:"none",strokeWidth:"6",strokeLinecap:"round",strokeDasharray:"187",strokeDashoffset:"0",cx:"33",cy:"33",r:"30",className:(0,s.cn)("origin-center animate-rotateSpinnerInner","contained"===D?"stroke-gray-900":"stroke-white")})})});if(e){let t=(0,s.cn)("flex items-center justify-center");return t="circled"===D?(0,s.cn)(t,K,S):(0,s.cn)(t,"min-w-5 min-h-5",S),(0,l.jsx)("span",{"data-testid":"renderIconOrLoader",className:t,children:(0,l.jsx)(n.g,{icon:e,size:N})})}return null},Y=()=>(0,l.jsxs)("button",{"data-testid":"renderButton",...$,"aria-label":B,type:i,className:(0,s.cn)(V,X,W,z,U),disabled:T,onClick:e=>{M||v(e)},onMouseEnter:e=>{null==b||b(e)},onMouseUp:e=>{"text"===D||M||null==w||w(e)},ref:t,autoFocus:F,children:[O&&M&&(0,l.jsx)("span",{className:"absolute min-h-5 min-w-5",children:H()}),(0,l.jsx)("span",{className:(0,s.cn)("relative flex min-h-5 items-center justify-center gap-1",O&&M&&"opacity-0"),children:E?H({icon:E}):(0,l.jsxs)(l.Fragment,{children:[H({icon:A}),(0,l.jsx)("span",{className:"whitespace-nowrap",children:a||r}),k&&(0,l.jsx)("span",{className:(0,s.cn)("flex min-h-5 min-w-5 items-center justify-center",S),children:(0,l.jsx)(n.g,{icon:k,size:N})})]})})]});return L&&null!=P&&P.trim().length?(0,l.jsx)(o.m,{text:P,id:R,placement:G,children:Y()}):Y()})},72988:(e,t,a)=>{"use strict";a.d(t,{$W:()=>o,C5:()=>h,DC:()=>m,Eb:()=>l,Oz:()=>x,Z:()=>u,bl:()=>c,r5:()=>s,so:()=>d,uv:()=>p,ux:()=>g});var r=a(16596);let i="uql pop up",n="Calendly pop up",s=e=>{r.default.track({name:"LeadInfoUpdated",eventData:{is_lead_type_status_new:e.hasJourneyChanged,existing_lead_journey:e.previousLeadJourney??"",updated_lead_journey:e.updatedLeadJourney??"",trigger:e.trigger,click_source:e.clickSource}})},o=e=>{r.default.track({name:"pop-up open",eventData:{pop_up_name:e.dialogName,click_source:e.clickSource,trigger_button:e.triggerButton}})},l=e=>{r.default.track({name:"pop-up open",eventData:{pop_up_name:n,click_source:e.clickSource??null,modal_title:e.modalTitle}})},d=e=>{r.default.track({name:"pop-up close",eventData:{click_source:i,pop_up_name:e.dialogName,section_title:e.sectionTitle,section_order:e.sectionOrder,trigger_button:e.triggerButton}})},c=e=>{r.default.track({name:"pop-up close",eventData:{pop_up_name:n,click_source:e.clickSource??null,button_name:e.buttonName??null}})},u=e=>{r.default.track({name:"button clicked",eventData:{click_source:i,button_text:e.buttonText,button_name:e.buttonName,component:e.component,section_title:e.sectionTitle,section_order:e.sectionOrder}})},p=e=>{r.default.track({name:"button clicked",eventData:{button_name:"date and time",click_source:e.clickSource??null,modal_title:e.modalTitle}})},m=(e,t)=>e?void r.default.track({name:"checkbox_on",eventData:{click_source:i,checkbox_text:t.checkboxText,pop_up_name:t.popUpName,section_title:t.sectionTitle,section_order:t.sectionOrder}}):void r.default.track({name:"checkbox_off",eventData:{click_source:i,checkbox_text:t.checkboxText,pop_up_name:t.popUpName,section_title:t.sectionTitle,section_order:t.sectionOrder}}),g=e=>{r.default.track({name:"form submitted successfully",eventData:{form_source:"uql form",click_source:i,pop_up_name:e.popUpName,get_in_touch_method:e.getInTouchMethod??null,is_individual:e.isIndividual??!1}})},h=e=>{r.default.track({name:"form submitted successfully",eventData:{form_source:"Calendly form",button_name:"Schedule Event",pop_up_name:n,click_source:e.clickSource??null}})},x=e=>{r.default.track({name:"error_message_pop_up",eventData:{click_source:i,section_title:e.sectionTitle,section_order:e.sectionOrder??null,trigger:e.trigger,get_in_touch_method:e.getInTouchMethod??null,is_individual:e.isIndividual??!1}})}},75087:(e,t,a)=>{"use strict";a.d(t,{CU:()=>s,M5:()=>n,Rs:()=>r,ol:()=>i});let r="control",i={anonymous:"anonymous",user:"user"},n={perAction:"perAction",perAnonymous:"perAnonymous",perSession:"perSession"},s="exp"},77184:(e,t,a)=>{"use strict";a.d(t,{PromptSection:()=>sO});var r=a(7620),i=a(902),n=a(65497),s=a(3548),o=a(86789),l=a(4085),d=a(4168),c=a(64779),u=a(439),p=a(80752),m=a(74826),g=a(70027),h=a(54568);let x=e=>{let{children:t,onClear:a,popoverContents:i}=e,[n,s]=(0,r.useState)(null),o=()=>{s(null)},l=!!n;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"relative group h-10 w-10","aria-owns":l?"image-preview-popover":void 0,"aria-haspopup":"true",onMouseEnter:e=>{s(e.currentTarget)},onMouseLeave:o,children:[t,(0,h.jsx)("button",{type:"button",onClick:a,className:"absolute top-0 left-0 h-full w-full flex items-center justify-center bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-150","aria-label":"Clear image",children:(0,h.jsx)(y,{})})]}),(0,h.jsx)(g.Ay,{id:"image-preview-popover",sx:{pointerEvents:"none"},open:l,anchorEl:n,anchorOrigin:{vertical:-10,horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},onClose:o,disableRestoreFocus:!0,slotProps:{paper:{sx:{padding:0,margin:0}}},marginThreshold:4,children:i})]})},y=()=>(0,h.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("path",{d:"M0.267578 0.267578C0.624456 -0.089145 1.20367 -0.089145 1.56055 0.267578L6.00293 4.70801L10.4395 0.273438C10.7964 -0.0830165 11.3747 -0.0822194 11.7314 0.274414C12.0883 0.631114 12.0892 1.20968 11.7324 1.56641L7.2959 6L11.7324 10.4346C12.0892 10.7913 12.0883 11.3699 11.7314 11.7266C11.3747 12.0831 10.7963 12.0839 10.4395 11.7275L6.00293 7.29199L1.56055 11.7334C1.20368 12.0901 0.624453 12.0901 0.267578 11.7334C-0.0892232 11.3768 -0.0890702 10.7981 0.267578 10.4414L4.70996 6L0.267578 1.55957C-0.0891429 1.20285 -0.0892109 0.624257 0.267578 0.267578Z",fill:"currentColor"})});var f=a(46403),j=a(65736);let v=e=>{let{onDropFiles:t,isDisabled:a,children:i,className:n}=e,[s,o]=(0,r.useState)(!1),l=(0,r.useRef)(null);return a?i:(0,h.jsxs)("div",{ref:l,className:(0,j.cn)("relative",n),onDragOver:e=>{e.preventDefault(),o(!0)},onDragLeave:e=>{l.current&&l.current.contains(e.relatedTarget)||o(!1)},onDrop:e=>{e.preventDefault(),o(!1);let{files:a}=e.dataTransfer;a&&a.length>0&&t(a)},children:[i,s&&(0,h.jsx)("div",{className:"absolute inset-0 text-medium-emphasis bg-black/70 flex items-center justify-center z-10 pointer-events-none p-2 text-center",children:(0,h.jsx)(f.default,{variant:"body-small-short",children:"Drop here"})})]})},b=e=>(0,h.jsxs)("svg",{width:"33",height:"32",viewBox:"0 0 33 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,h.jsx)("path",{d:"M11.6093 20.064L8.11719 24.9529H24.8791L19.2918 17.9688L14.4029 23.5561L11.6093 20.064Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.39683",strokeLinejoin:"round"}),(0,h.jsx)("path",{d:"M17.4287 4.63086H9.22075C6.59629 4.63086 4.46875 6.7584 4.46875 9.38286V24.0709C4.46875 26.6953 6.59629 28.8229 9.22075 28.8229H23.9088C26.5332 28.8229 28.6607 26.6953 28.6607 24.0709V16.2949",stroke:"currentColor",strokeLinecap:"round"}),(0,h.jsx)("path",{d:"M24.875 3.04688L24.875 12.1897",stroke:"currentColor",strokeWidth:"0.831169",strokeLinecap:"round"}),(0,h.jsx)("path",{d:"M29.4492 7.61914L20.3064 7.61914",stroke:"currentColor",strokeWidth:"0.831169",strokeLinecap:"round"})]});var w=a(7701),_=a(30039),C=a(1825),T=a(35067),I=a(42693),E=a(1108),A=a(15523),k=a(85110);let N=Object.assign((0,E.Ay)(C.A)(e=>{let{theme:t}=e;return{padding:0,[`& .${T.A.container}`]:{alignItems:"end",[t.breakpoints.up("sm")]:{alignItems:"center"}},[`& .${T.A.paper}`]:{marginTop:0,maxHeight:"unset",height:"auto",borderRadius:"0px",borderTopLeftRadius:"32px",borderTopRightRadius:"32px",background:t.palette.grey[600],paddingLeft:t.spacing(2.5),paddingRight:t.spacing(2.5),paddingBottom:t.spacing(5),paddingTop:t.spacing(5),gap:t.spacing(3),[t.breakpoints.up("sm")]:{width:"468px",height:"unset",borderRadius:"32px",paddingLeft:t.spacing(6),paddingRight:t.spacing(6),gap:t.spacing(6)}}}}),{Content:(0,E.Ay)(I.A)(e=>{let{theme:t}=e;return{padding:0,display:"flex",flexDirection:"column",gap:t.spacing(1)}}),Title:(0,E.Ay)(f.default)(()=>({fontWeight:500,fontSize:"20px",lineHeight:"32px"})),Description:(0,E.Ay)(f.default)(()=>({fontWeight:400,fontSize:"14px",lineHeight:"150%"})),More:(0,E.Ay)(f.default)(e=>{let{theme:t}=e;return{fontWeight:400,fontSize:"14px",lineHeight:"150%",color:t.palette.grey[100]}}),Link:(0,E.Ay)("a")(()=>({display:"inline",textDecoration:"underline"})),Actions:(0,E.Ay)("div")(e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column-reverse",padding:0,gap:t.spacing(2.5),[t.breakpoints.up("sm")]:{width:"100%",justifyContent:"flex-end",flexDirection:"row",gap:t.spacing(2)}}}),Button:(0,E.Ay)(w.A)(e=>{var t,a,r,i;let{theme:n}=e;return{width:"100%",borderRadius:"8px",height:"40px",fontWeight:500,fontSize:"16px",lineHeight:"20px",[n.breakpoints.up("sm")]:{width:"128px",borderRadius:"100px"},[`&.${_.A.contained}`]:{background:null==(t=n.palette.yellow)?void 0:t[400],borderColor:null==(a=n.palette.yellow)?void 0:a[400],color:n.palette.common.black,"&:hover":{background:null==(r=n.palette.yellow)?void 0:r[500],borderColor:null==(i=n.palette.yellow)?void 0:i[500]},[`&.${_.A.disabled}`]:{background:"transparent",color:n.palette.grey["100"],borderColor:n.palette.grey["100"]}},[`&.${_.A.outlined}`]:{background:"transparent",color:n.palette.common.white,borderColor:n.palette.common.white,"&:hover":{borderColor:n.palette.grey["50"],color:n.palette.grey["50"]},[`&.${_.A.disabled}`]:{background:(0,A.X4)(n.palette.grey["300"],.85),color:n.palette.common.black,borderColor:(0,A.X4)(n.palette.grey["300"],0)}}}}),CloseButton:k.D});var S=a(57217);let M=e=>{let{open:t,onClose:a,onAcceptClick:r,onDeclineClick:i,isSaving:n}=e,{t:s}=(0,u.Bd)("visual-ai"),{trackImageGenEvent:o}=(0,m.W)();return(0,h.jsxs)(N,{open:t,onClose:a,children:[(0,h.jsx)(N.CloseButton,{onClick:a}),(0,h.jsxs)(N.Content,{children:[(0,h.jsx)(N.Title,{children:s("legalTermsDialog.title")}),(0,h.jsx)(N.Description,{children:s("legalTermsDialog.description")}),(0,h.jsxs)(N.More,{children:["For more information, see our"," ",(0,h.jsx)(N.Link,{onClick:()=>o({name:"button clicked",button_name:"Terms of use"}),href:`${S.JZ.privacyTerms}${S.JZ.privacyTermsTermsOfUse}`,target:"_blank",rel:"noopener noreferrer",children:"Terms of Use"})," ","and"," ",(0,h.jsx)(N.Link,{onClick:()=>o({name:"button clicked",button_name:"License"}),href:`${S.JZ.privacyTerms}${S.JZ.privacyTermsLicense}`,target:"_blank",rel:"noopener noreferrer",children:"License."})]})]}),(0,h.jsxs)(N.Actions,{children:[(0,h.jsx)(N.Button,{variant:"outlined",onClick:i,children:"Decline"}),(0,h.jsx)(N.Button,{variant:"contained",disabled:n,onClick:r,children:"Accept"})]})]})};var O=a(10933),L=a.n(O),P=a(18498),R=a(26430),G=a(32638),B=a(14590),U=a(95315),F=a(72466),$=a(21797),D=a(97335),V=a(79061),X=a(41935);let W=X.z.object({success:X.z.boolean(),data:X.z.object({userId:X.z.string(),agreementName:X.z.string(),id:X.z.string(),createdAt:X.z.string(),updatedAt:X.z.string()}).nullable()}),z=U.A.create({baseURL:F.UK,headers:{"service-host":D.qb,"x-new-credits-plan":"true",...V.oG}}),K=e=>{var t,a,r;let i=(0,$.useSession)(),n=null==(t=i.data)?void 0:t.user.id,s=null==(a=i.data)?void 0:a.accessToken,{data:o,refetch:l}=(0,G.useQuery)({queryKey:["user-agreement",n,e],queryFn:async()=>{let t=await z.get(`/v1/user-agreements/${e}`,{headers:{Authorization:`Bearer ${s}`}}),a=W.safeParse(t.data);return a.success?a.data:null},enabled:!!(n&&s),refetchOnWindowFocus:!1}),{mutateAsync:d,isLoading:c}=(0,B.useMutation)({mutationKey:["user-agreement",n,e],mutationFn:async()=>{let t=await z.post("/v1/user-agreements",{agreementName:e},{headers:{Authorization:`Bearer ${s}`}}),a=W.safeParse(t.data);return a.success?a.data:null},retry:1,onSettled:async()=>{await l()}});return{hasUserAgreed:(null==o||null==(r=o.data)?void 0:r.agreementName)||!1,saveAgreement:d,isSaving:c}};var H=a(66871),Y=a(81428),J=a(59572),Q=a(43733),q=a(1393),Z=a(44924),ee=a(65598);let et=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",{data:t,isFetching:a}=(0,ee.Mk)({type:e,created:"all"});return{hasCreations:(null==t?void 0:t.pages[0])&&(null==t?void 0:t.pages[0].total)>0||!1,isFetching:a}};var ea=a(79890),er=a(63665),ei=a(7371);let en=()=>(0,h.jsx)("div",{className:"lg:hidden absolute inset-0 bg-gray-950 z-2 flex items-center justify-center",children:(0,h.jsxs)("div",{className:"flex flex-col gap-3 items-center",children:[(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)(er.A,{size:"45px",variant:"determinate",thickness:4,value:100,sx:e=>({color:e.palette.grey[300]})}),(0,h.jsx)(er.A,{size:"45px",thickness:4,sx:e=>({left:0,position:"absolute",color:e.palette.grey[50],[`& .${ei.A.circle}`]:{strokeLinecap:"round"}})})]}),"Uploading..."]})});var es=a(34044),eo=a(74706);let el=e=>{let{onClick:t}=e,{t:a}=(0,u.Bd)("visual-ai");return(0,h.jsx)("button",{className:"w-7 h-7 absolute top-1.5 right-1.5 lg:top-2.5 lg:right-2.5 lg:h-9 lg:w-9 bg-gray-800/80 rounded-full hover:bg-gray-300 transition-background",type:"button",onClick:t,"aria-label":a("imageToVideo.removeSelectedImage"),children:(0,h.jsx)(eo.g,{icon:es.yY})})},ed=r.memo(()=>(0,h.jsx)("svg",{width:"45",height:"45",viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("g",{children:(0,h.jsx)("path",{d:"M6.53875 42.5C5.38792 42.5 4.42708 42.1146 3.65625 41.3438C2.88542 40.5729 2.5 39.6121 2.5 38.4613V6.53875C2.5 5.38792 2.88542 4.42708 3.65625 3.65625C4.42708 2.88542 5.38792 2.5 6.53875 2.5H22.7887C23.1429 2.5 23.4398 2.62 23.6794 2.86C23.919 3.1 24.0387 3.39729 24.0387 3.75188C24.0387 4.10646 23.919 4.40313 23.6794 4.64188C23.4398 4.88063 23.1429 5 22.7887 5H6.53875C6.09 5 5.72125 5.14417 5.4325 5.4325C5.14417 5.72125 5 6.09 5 6.53875V38.4613C5 38.91 5.14417 39.2788 5.4325 39.5675C5.72125 39.8558 6.09 40 6.53875 40H38.4613C38.91 40 39.2788 39.8558 39.5675 39.5675C39.8558 39.2788 40 38.91 40 38.4613V22.2113C40 21.8571 40.12 21.5602 40.36 21.3206C40.6 21.081 40.8973 20.9613 41.2519 20.9613C41.6065 20.9613 41.9031 21.081 42.1419 21.3206C42.3806 21.5602 42.5 21.8571 42.5 22.2113V38.4613C42.5 39.6121 42.1146 40.5729 41.3438 41.3438C40.5729 42.1146 39.6121 42.5 38.4613 42.5H6.53875ZM9.42312 33.4613H35.5769L27.5 22.6925L20 32.1637L15 26.1537L9.42312 33.4613ZM35 10H31.25C30.8958 10 30.599 9.88 30.3594 9.64C30.1198 9.4 30 9.10271 30 8.74812C30 8.39354 30.1198 8.09687 30.3594 7.85812C30.599 7.61937 30.8958 7.5 31.25 7.5H35V3.75C35 3.39583 35.12 3.09896 35.36 2.85938C35.6 2.61979 35.8973 2.5 36.2519 2.5C36.6065 2.5 36.9031 2.61979 37.1419 2.85938C37.3806 3.09896 37.5 3.39583 37.5 3.75V7.5H41.25C41.6042 7.5 41.901 7.62 42.1406 7.86C42.3802 8.1 42.5 8.39729 42.5 8.75188C42.5 9.10646 42.3802 9.40313 42.1406 9.64188C41.901 9.88063 41.6042 10 41.25 10H37.5V13.75C37.5 14.1042 37.38 14.401 37.14 14.6406C36.9 14.8802 36.6027 15 36.2481 15C35.8935 15 35.5969 14.8802 35.3581 14.6406C35.1194 14.401 35 14.1042 35 13.75V10Z",fill:"currentColor"})})})),ec=()=>{let e=(0,r.useRef)(void 0);return{waitForAgree:async()=>new Promise((t,a)=>{e.current={resolve:t,reject:a}}),decline:()=>{e.current&&e.current.resolve(!1)},accept:()=>{e.current&&e.current.resolve(!0)},agreementPromiseRef:e}},eu="gen-ai-image-upload-agreement",ep=e=>{let{children:t}=e;return(0,h.jsx)("div",{className:"relative flex aspect-square md:h-67 md:w-67 lg:border lg:border-dashed lg:border-gray-400 rounded-lg",children:t})},em=e=>{H.default.trigger(J.yV.SIGN_UP__MODAL__OPEN,{clickSource:e.clickSource,buttonName:e.buttonName,trigger:e.trigger,registerSourceEvent:ea.e.GENERATION_BOX})},eg=e=>{let{isVisitor:t}=(0,R.f)(),{trackImageGenEvent:a}=(0,m.W)();return(0,h.jsx)("button",{type:"button",onClick:()=>{a({name:"button clicked",button_name:"choose"}),t&&em({buttonName:"generate an image",clickSource:"upload image",trigger:"upload image"});let e=document.getElementById("desktop-visual-ai-tabs-scroller");e&&e.scrollIntoView({behavior:"smooth"})},className:"underline cursor-pointer hover:text-gray-50",...e})},eh=e=>{let{children:t}=e,a=(0,q.RZ)();return(0,h.jsx)(L(),{href:a(S.JZ.textToImageAi),className:"underline cursor-pointer hover:text-gray-50 inline",children:t})},ex=r.memo(()=>{let{hasCreations:e,isFetching:t}=et("image"),{t:a}=(0,u.Bd)("visual-ai"),{isVisitor:r}=(0,R.f)(),{trackImageGenEvent:i}=(0,m.W)(),n="image-to-image-ai"===(0,Z.D)()?"prompt.imageToImage.uploadImagePrompt":"imageToVideo.uploadImagePrompt",o=e=>{r&&(e.preventDefault(),em({buttonName:"upload an image",clickSource:"upload image",trigger:"upload image"})),i({name:"button clicked",button_name:"Upload"})};return(0,h.jsx)("span",{children:(0,s.YW)({hasCreations:e,isFetching:t}).with({isFetching:!0},()=>null).with({hasCreations:!1},()=>(0,h.jsx)(u.x6,{i18nKey:"imageToVideo.uploadImagePromptNoCreations",t:a,components:{1:(0,h.jsx)("label",{htmlFor:"image-gen-upload-image-desktop",className:"underline cursor-pointer hover:text-gray-50","aria-label":"Upload",onClick:o}),2:(0,h.jsx)(eh,{}),3:(0,h.jsx)("br",{})}})).with({hasCreations:!0},()=>(0,h.jsx)("span",{children:(0,h.jsx)(u.x6,{i18nKey:n,t:a,components:{1:(0,h.jsx)("label",{htmlFor:"image-gen-upload-image-desktop",className:"underline cursor-pointer hover:text-gray-50","aria-label":"Upload",onClick:o}),2:(0,h.jsx)(eg,{}),3:(0,h.jsx)("br",{})}})})).exhaustive()})}),ey=e=>{let{children:t}=e;return(0,h.jsxs)("div",{"data-testid":"UploadPrompt",className:(0,j.cn)("flex flex-grow items-center justify-center absolute inset-0 lg:opacity-0 transition-opacity lg:hover:opacity-100 lg:bg-black/70 rounded-lg"),children:[t,(0,h.jsxs)("div",{className:"hidden lg:flex flex-col items-center",children:[(0,h.jsx)("div",{className:"text-white mb-4",children:(0,h.jsx)(ed,{})}),(0,h.jsx)("div",{className:"mb-2 text-white text-center",children:(0,h.jsx)(ex,{})}),(0,h.jsx)("div",{className:"text-gray-150 leading-none",children:"JPG/PNG"})]})]})},ef=()=>{let{isFetching:e}=et("image");return e?null:(0,h.jsx)("div",{"data-testid":"UploadPromptNoSelected",className:(0,j.cn)("flex flex-grow items-center justify-center absolute inset-0"),children:(0,h.jsxs)("div",{className:"flex flex-col items-center",children:[(0,h.jsx)("div",{className:"text-gray-300 md:mb-4",children:(0,h.jsx)(ed,{})}),(0,h.jsxs)(P.Dk,{children:[(0,h.jsx)("div",{className:"mb-2 text-center",children:(0,h.jsx)(ex,{})}),(0,h.jsx)("div",{className:"text-gray-200 leading-none",children:"JPG/PNG"})]})]})})},ej=r.memo(e=>{let{isDragOver:t}=e,{t:a}=(0,u.Bd)("visual-ai");return(0,h.jsx)("div",{className:(0,j.cn)("absolute inset-0 pointer-events-none transition-opacity bg-gray-500 flex items-center justify-center font-medium rounded-lg overflow-hidden",t?"opacity-1":"opacity-0"),children:a("imageToVideo.dropImagePrompt")})}),ev=e=>{let{handleInputUpload:t,uploadImageInputId:a}=e;return(0,h.jsx)("input",{hidden:!0,id:`image-gen-upload-image-${a}`,className:"w-full text-center",type:"file",accept:"image/png,image/jpg,image/jpeg",onClick:e=>{let{currentTarget:t}=e;t.value=""},onChange:t})},eb=e=>{let{children:t,setCurrentImage:a,uploadAndValidateImageMutation:i,hasImage:n,removeSelectedImage:o,uploadImageInputId:l,isPromptBeingSuggested:d,isCustomPromptBeingSuggested:c}=e,g=i.isUploading||i.isValidating||d||c,{t:x}=(0,u.Bd)("visual-ai"),[y,f]=(0,r.useState)(!1),{accept:j,decline:v,waitForAgree:b}=ec(),[w,_]=(0,r.useState)(!1),{hasUserAgreed:C,saveAgreement:T,isSaving:I}=K(eu),{trackImageGenEvent:E}=(0,m.W)(),{isVisitor:A}=(0,R.f)(),k="image-to-image-ai"===(0,Z.D)(),N=(0,r.useRef)(null),S=async(e,t)=>{if(o(),i.reset(),!C){E({name:"pop-up open",pop_up_title:x("legalTermsDialog.title"),pop_up_secondary_title:x("legalTermsDialog.description")}),f(!0);let e=await b();if(f(!1),!e)return;await T()}N.current&&i.mutate({files:e,canvas:N.current,uploadSource:t,maxSizeInMb:k?20:10},{onSuccess:e=>{let{downloadUrl:t,image:r}=e;a(t,(0,Q.j)(r).aspectRatio||p.gl.SQUARE)}})},O=async()=>{await T(void 0,{onError:()=>{Y.A.error(x("imageToVideo.agreementFailed"))}}),j(),E({name:"pop-up button clicked",button_name:"Accept",pop_up_title:x("legalTermsDialog.title"),pop_up_secondary_title:x("legalTermsDialog.description")})};return(0,h.jsxs)("div",{children:[(i.isUploading||i.isValidating)&&(0,h.jsx)(en,{}),(0,h.jsx)(ep,{children:(0,h.jsxs)("div",{className:"hidden flex-grow lg:flex relative",onDrop:e=>{e.preventDefault(),e.stopPropagation();let{files:t}=e.dataTransfer;A?em({clickSource:"upload image file drop",trigger:"upload image file drop"}):t.length>0&&S(t,"drop"),_(!1)},onDragOver:e=>{e.preventDefault(),_(!0)},onDragLeave:()=>{_(!1)},children:[t,(0,s.YW)([n,i.isUploading||i.isValidating]).with([!0,!1],()=>(0,h.jsx)(ey,{children:g?null:(0,h.jsx)(el,{onClick:o})})).with([!1,!1],()=>(0,h.jsx)(ef,{})).otherwise(()=>null),(0,h.jsx)(ev,{uploadImageInputId:l,handleInputUpload:e=>{let{files:t}=e.target;t&&t.length&&S(t,"os-dialog")}}),(0,h.jsx)(ej,{isDragOver:w})]})}),(0,h.jsx)("canvas",{ref:N,className:"hidden w-64 h-64 border border-solid"}),(0,h.jsx)(M,{open:y,onClose:()=>{v(),f(!1),E({name:"pop-up closed",pop_up_title:x("legalTermsDialog.title"),pop_up_secondary_title:x("legalTermsDialog.description")})},onAcceptClick:O,onDeclineClick:()=>{v(),E({name:"pop-up button clicked",button_name:"Decline",pop_up_title:x("legalTermsDialog.title"),pop_up_secondary_title:x("legalTermsDialog.description")})},isSaving:I})]})};var ew=a(39362);let e_=e=>{let{children:t}=e;return(0,h.jsx)("div",{className:"group relative w-full rounded-lg border border-gray-500 h-full w-full d:h-[268px] md:w-[268px] overflow-hidden",children:t})},eC=e=>{let{children:t}=e;return(0,h.jsx)("div",{className:"group relative rounded overflow-hidden border border-dashed border-gray-500 size-10",children:t})},eT=e=>{let{children:t}=e;return(0,h.jsx)("div",{className:"group relative rounded overflow-hidden border border-dashed border-gray-500 size-22",children:t})},eI=e=>{let{children:t}=e;return(0,h.jsx)(o.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"h-full w-full",children:t})},eE=e=>{let{children:t}=e;return(0,h.jsx)("div",{className:"backdrop-blur absolute inset-0 flex items-center justify-center",children:t})},eA=e=>{let{src:t}=e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(n.N,{children:t?(0,h.jsx)(eI,{children:(0,h.jsx)(ew.J,{src:t})}):null}),(0,h.jsxs)(eE,{children:[(0,h.jsx)(er.A,{size:"22px",variant:"determinate",thickness:5,value:100,sx:e=>({color:e.palette.grey[300]})}),(0,h.jsx)(er.A,{size:"22px",thickness:5,sx:e=>({position:"absolute",color:e.palette.grey[50],[`& .${ei.A.circle}`]:{strokeLinecap:"round"}})})]})]})},ek=e=>{let{src:t}=e;return(0,h.jsx)(eC,{children:(0,h.jsx)(eA,{src:t})})},eN=e=>{let{src:t}=e;return(0,h.jsx)(eT,{children:(0,h.jsx)(eA,{src:t})})};var eS=a(45869),eM=a(35121);class eO extends Error{constructor(){super(),this.type="NSFWUploadError",this.name="NSFWUploadError",Object.setPrototypeOf(this,eO.prototype)}}var eL=a(89675),eP=a(8499),eR=a(64741),eG=a(10101),eB=a(35724);class eU extends Error{constructor(){super(),this.type="TooManyFilesError",this.name="TooManyFilesError",Object.setPrototypeOf(this,eU.prototype)}}class eF extends Error{constructor(){super(),this.type="IncorrectMimeTypeError",this.name="IncorrectMimeTypeError",Object.setPrototypeOf(this,eF.prototype)}}class e$ extends Error{constructor(e){super(),this.type="ResolutionTooLowError",this.name="ResolutionTooLowError",this.image=e,Object.setPrototypeOf(this,e$.prototype)}}class eD extends Error{constructor(e){super(),this.type="ResolutionTooLargeError",this.name="ResolutionTooLargeError",this.image=e,Object.setPrototypeOf(this,eD.prototype)}}class eV extends Error{constructor(){super(),this.type="FileTooBigError20mb",this.name="FileTooBigError20mb",Object.setPrototypeOf(this,eV.prototype)}}class eX extends Error{constructor(){super(),this.type="FileTooBigError10mb",this.name="FileTooBigError10mb",Object.setPrototypeOf(this,eX.prototype)}}class eW extends Error{constructor(e){super(),this.type="FileContainsAlphaChannelError",this.name="FileContainsAlphaChannelError",this.image=e,Object.setPrototypeOf(this,eW.prototype)}}class ez extends Error{constructor(){super(),this.type="AspectRatioOutOfRangeError",this.name="AspectRatioOutOfRangeError",Object.setPrototypeOf(this,ez.prototype)}}var eK=a(184),eH=a(69043);X.z.object({file:X.z.any().refine(e=>e instanceof File).transform(e=>e)});let eY=X.z.object({success:X.z.boolean(),data:X.z.object({downloadUrl:X.z.string()})});X.z.object({imageUrl:X.z.string()});let eJ=X.z.object({success:X.z.boolean(),error:X.z.object({message:X.z.string(),code:X.z.number(),status:X.z.number()}).optional()}),eQ=async(e,t)=>{let a=await eH.g4.postForm("v1/upload/image-for-video",{file:e.file},{headers:{"Content-Type":e.file.type,Authorization:`Bearer ${t.accessToken}`}}),r=eY.safeParse(a.data);if(!r.success)throw eK.e$.error("Invalid uploadImage data",(0,eK.Xf)(r.error)),Error("Invalid uploadImage data.");return r.data},eq=async(e,t)=>{let a=await eH.i6.post("/v1/generatedImage/custom-image-moderation",{imageUrl:e.imageUrl},{headers:{Authorization:`Bearer ${t.accessToken}`}}).catch(e=>{if((0,eS.F0)(e)){var t,a,r;let i=eJ.safeParse(null==(t=e.response)?void 0:t.data);if(i.success&&null!=(a=i.data.error)&&a.message&&null!=(r=i.data.error)&&r.message.includes("NSFW"))throw new eO}throw e}),r=eJ.safeParse(a.data);if(!r.success)throw eK.e$.error("Invalid validateUploadedImage data",(0,eK.Xf)(r.error)),Error("Invalid validateUploadedImage data.");return r.data};var eZ=a(28948);let e0=e=>{let{t}=(0,eG.T)();return(0,s.YW)(e).with(s.P.instanceOf(eO),()=>t("visual-ai:imageToVideo.NSFWError")).with(s.P.instanceOf(eU),()=>t("visual-ai:imageToVideo.tooManyFilesError")).with(s.P.instanceOf(eF),()=>t("visual-ai:imageToVideo.mimeTypeError")).with(s.P.instanceOf(e$),()=>t("visual-ai:imageToVideo.lowResolutionError")).with(s.P.instanceOf(eD),()=>t("visual-ai:imageToVideo.largeResolutionError")).with(s.P.instanceOf(eX),()=>t("visual-ai:imageToVideo.fileSizeError10mb")).with(s.P.instanceOf(eV),()=>t("visual-ai:imageToVideo.fileSizeError20mb")).with(s.P.instanceOf(eW),()=>t("visual-ai:imageToVideo.alphaError")).with(s.P.instanceOf(eS.pe),()=>t("visual-ai:imageToVideo.genericUploadError")).with(s.P.instanceOf(ez),()=>t("visual-ai:imageToVideo.aspectRatioOutOfRangeError")).exhaustive()},e1=e=>{let t,{supplementalKey:a,imageIndex:r}=e,i=(0,eB._M)(),{trackImageGenEvent:n}=(0,m.W)(),o=(0,Z.D)()===eP.ty?eL.$.IMAGE_TO_VIDEO:eL.$.IMAGE_TO_IMAGE,l=(0,eR.Me)(),d=(0,B.useMutation)({mutationFn:e=>(e=>{let{files:t,canvas:a,maxSizeInMb:r}=e,i=a.getContext("2d");if(!i)throw Error("NO CTX");if(t.length>1)throw new eU;let n=t[0];if(!["image/jpeg","image/png"].includes(n.type))throw new eF;if(n.size/1024/1024>r)if(20===r)throw new eV;else throw new eX;return new Promise((e,t)=>{let r=new FileReader;r.onload=r=>{var s;let o=new Image;o.onload=()=>{let r,s=o.width*o.height/1e6;if(s<.5184)return t(new e$(o));if(s>200)return t(new eD(o));if((r=o.width/o.height)<.4||r>2.5)return t(new ez);a.width=o.width,a.height=o.height,i.drawImage(o,0,0);let{data:l}=i.getImageData(0,0,o.width,o.height);for(let e=0;e<l.length;e+=4)if(l[e+3]<255)return t(new eW(o));e({warning:s<.9216?"RESOLUTION_LOW":null,image:o,file:n})},o.src=null==(s=r.target)?void 0:s.result},r.readAsDataURL(n)})})(e)}),c=(e=>{let{imageIndex:t}=e,a=(0,eB._M)(),{trackImageGenEvent:r}=(0,m.W)(),i=(0,Z.D)(),n=i===eP.ty?eL.$.IMAGE_TO_VIDEO:eL.$.IMAGE_TO_IMAGE,o=(0,eR.Me)(),{state:{lastFrameSource:l}}=(0,eZ.Cm)(),d=(0,$.useSession)();return(0,B.useMutation)({mutationFn:async e=>{var t,a;let{file:r}=e;if(!(null!=(t=d.data)&&t.accessToken))throw eK.e$.error("No access token when trying to upload image.",{userId:null==(a=d.data)?void 0:a.user.id}),Error("No access token when trying to upload image.");return await eQ({file:r},{accessToken:d.data.accessToken})},onMutate:e=>{let{image:i,file:d}=e,c="none"!==l.type;r({name:"photo uploaded start",photo_size:`${(d.size/1024/1024).toFixed(1)}MB`,photo_format:(0,s.YW)(d.type).with("image/jpeg",()=>"jpeg").with("image/jpg",()=>"jpg").with("image/png",()=>"png").otherwise(()=>"unknown"),photo_resolution_width:i.width,photo_resolution_height:i.height,photo_resolution:`${i.width}x${i.height}`,generate_type:n,image_number:t+1,gen_AI_tier:(0,eB.Gl)(o(),a.imageToImage),..."image to video"===n&&{is_end_frame:c}})},onSuccess:(e,d)=>{let{file:c,image:u,uploadSource:p}=d,m="none"!==l.type;r({name:"photo uploaded successfully",photo_size:`${(c.size/1024/1024).toFixed(1)}MB`,photo_format:(0,s.YW)(c.type).with("image/jpeg",()=>"jpeg").with("image/jpg",()=>"jpg").with("image/png",()=>"png").otherwise(()=>"unknown"),upload_source:p,photo_resolution_width:u.width,photo_resolution_height:u.height,photo_resolution:`${u.width}x${u.height}`,generate_type:i===eP.ty?eL.$.IMAGE_TO_VIDEO:eL.$.IMAGE_TO_IMAGE,image_number:t+1,gen_AI_tier:(0,eB.Gl)(o(),a.imageToImage),..."image to video"===n&&{is_end_frame:m}})}})})({imageIndex:r}),u=(t=(0,$.useSession)(),(0,B.useMutation)({mutationFn:async e=>{var a,r;if(!(null!=(a=t.data)&&a.accessToken))throw eK.e$.error("No access token when trying to validate uploaded image.",{userId:null==(r=t.data)?void 0:r.user.id}),Error("No access token when trying to validate uploaded image.");return await eq(e,{accessToken:t.data.accessToken})}}));return{...(0,B.useMutation)({mutationKey:[eM.vd,a],mutationFn:async e=>{let t=await d.mutateAsync(e),a=await c.mutateAsync({file:t.file,image:t.image,uploadSource:e.uploadSource});return await u.mutateAsync({imageUrl:a.data.downloadUrl}),{warning:t.warning,downloadUrl:a.data.downloadUrl,image:t.image}},onError:(e,t)=>{let{files:a,uploadSource:d}=t,c=a[0];n({name:"photo upload failed",generate_type:o,image_number:r+1,error_message:e0(e),photo_size:c?`${(c.size/1024/1024).toFixed(1)}MB`:"unknown",photo_format:(0,s.YW)(null==c?void 0:c.type).with("image/jpeg",()=>"jpeg").with("image/jpg",()=>"jpg").with("image/png",()=>"png").otherwise(()=>"unknown"),upload_source:d,gen_AI_tier:(0,eB.Gl)(l(),i.imageToImage),...(0,s.YW)(e).with(s.P.union(s.P.instanceOf(e$),s.P.instanceOf(eW)),e=>({photo_resolution_width:e.image.width,photo_resolution_height:e.image.height,photo_resolution:`${e.image.width}x${e.image.height}`})).otherwise(()=>({photo_resolution_width:"unknown",photo_resolution_height:"unknown",photo_resolution:"unknown"}))})}}),isUploading:c.isLoading,uploadData:c.data,isValidating:u.isLoading}};var e2=a(87790);let e5=()=>(0,G.useQuery)({queryKey:["gen-ai-style-default"],queryFn:async()=>{let e=await (0,e2.p)({page:1,assetType:"generatedVideo"});return(null==e?void 0:e[0])||null},refetchOnWindowFocus:!1,staleTime:1/0});var e4=a(377);let e6=e=>{let{mutation:t,checkIfCanUpload:a}=e,r=(0,eR.C$)(),i=(0,$.useSession)();return{processFiles:async e=>{if("authenticated"!==i.status)return void H.default.trigger(J.yV.SIGN_UP__MODAL__OPEN,{clickSource:"prompt section",buttonName:"upload",trigger:"prompt section",registerSourceEvent:"prompt section"});if(!await a())return;let n=new OffscreenCanvas(256,256);e&&e.length>0&&(t.reset(),t.mutate({files:e,canvas:n,uploadSource:"os-dialog",maxSizeInMb:20},{onSuccess:e=>{let{downloadUrl:t,image:a}=e;r({type:"urlAdded",payload:{imageUrl:t,aspectRatio:(0,Q.j)(a).aspectRatio||p.gl.SQUARE}})},onError:e=>{let t=e0(e);Y.A.error(t)}}))}}};var e3=a(55506),e7=a(31504),e9=a(51786),e8=a(49089),te=a(82817);let tt=e=>{let{processFiles:t,handleUploadClick:a,openMyCreationsDialog:i,generateType:n,label:s,isLastFrame:o}=e,{t:l}=(0,u.Bd)("visual-ai"),{isVisitor:d}=(0,R.f)(),[p,x]=(0,r.useState)(null),[y,f]=(0,r.useState)(!1),{trackImageGenEvent:v}=(0,m.W)();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.A,{title:s,placement:"top",children:(0,h.jsx)("button",{type:"button",onClick:()=>{f(!y),a()},ref:x,"data-testid":o?"Open upload image dropdown button- End Frame":"Open upload image dropdown button",className:(0,j.cn)("w-10 h-10 rounded border border-dashed flex flex-col items-center justify-center relative shrink-0 text-medium-emphasis"),children:(0,h.jsx)(b,{width:"20px",height:"20px"})})}),(0,h.jsx)(g.Ay,{open:y,anchorEl:p,onClose:()=>f(!1),anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},slotProps:{paper:{sx:{marginLeft:"10px"}}},children:(0,h.jsxs)(te.A,{children:[(0,h.jsxs)(e8.A,{className:"text-medium-emphasis text-sm",onClick:()=>{v({name:"button clicked",button_name:"Upload Images",click_source:`${n} text box`})},children:[(0,h.jsx)("span",{children:l("prompt.imageSourceMenu.upload")}),(0,h.jsx)(ev,{handleInputUpload:e=>{t(e.target.files),f(!1)},uploadImageInputId:"desktop"}),(0,h.jsx)("label",{htmlFor:"image-gen-upload-image-desktop",className:"absolute inset-0 cursor-pointer","aria-label":"Upload"})]}),(0,h.jsx)(e8.A,{className:"text-medium-emphasis text-sm",onClick:()=>{d?H.default.trigger(J.yV.SIGN_UP__MODAL__OPEN,{clickSource:"prompt section",buttonName:"Select from My Creations",trigger:"prompt section",registerSourceEvent:"prompt section"}):i(),f(!1),v({name:"button clicked",button_name:"Select from My Creations",click_source:`${n} text box`})},children:(0,h.jsx)("span",{children:l("prompt.imageSourceMenu.selectFromMyCreation")})})]})})]})},ta=()=>(0,h.jsxs)("div",{className:"flex grow items-center justify-center relative",children:[(0,h.jsx)(er.A,{size:"48px",variant:"determinate",thickness:6,value:100,sx:e=>({color:e.palette.grey[300]})}),(0,h.jsx)(er.A,{size:"48px",thickness:6,sx:e=>({position:"absolute",color:e.palette.grey[50],[`& .${ei.A.circle}`]:{strokeLinecap:"round"}})})]}),tr=()=>{let{fetchNextPage:e,hasNextPage:t,isFetchingNextPage:a,isLoading:i,isFetched:n,data:s}=(0,ee.Mk)({type:"image",created:"all"}),o=(0,r.useRef)(null),l=(0,r.useMemo)(()=>s?s.pages.flatMap(e=>e.history):[],[s]);return{isFetched:n,allImageCreations:l,handleLoadMore:(0,r.useCallback)(()=>{t&&!a&&e()},[e,t,a]),assignScrollContainerRef:(0,r.useCallback)(e=>{o.current=e},[]),scrollContainerRef:o,hasNextPage:t,isLoading:i}};var ti=a(87347);let tn=e=>{let{onLinkClick:t}=e,{t:a}=(0,u.Bd)("visual-ai"),r=(0,q.RZ)();return(0,h.jsxs)("div",{className:"flex h-full flex-grow flex-col items-center justify-center gap-7.5 pr-5",children:[(0,h.jsx)("div",{className:"flex h-20 w-20 items-center justify-center text-gray-300",children:(0,h.jsx)(ti.Q,{})}),(0,h.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2",children:[(0,h.jsx)("div",{className:"text-lg text-gray-50",children:a("creations.loggedOut.title")}),(0,h.jsxs)("div",{className:"text-sm text-gray-100 text-center",children:[a("creations.loggedOut.description")," ",(0,h.jsx)(L(),{href:r("/text-to-image-ai"),onClick:t,className:"inline underline",children:a("creations.noResults.linkLabel")})]})]})]})};var ts=a(73694),to=a.n(ts),tl=a(62511),td=a(35996);let tc=e=>{let{allImageCreations:t,hasNextPage:a,scrollContainerRef:r,handleLoadMore:i,onImageSelect:n,assignScrollContainerRef:s}=e;return(0,h.jsx)("div",{ref:s,className:"flex-1 overflow-y-auto min-h-0 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-900 pr-5",children:(0,h.jsx)(to(),{loadMore:i,hasMore:a,useWindow:!1,getScrollParent:()=>r.current,initialLoad:!1,threshold:120,children:(0,h.jsx)(td.c,{className:"flex-row flex-wrap",itemFlexGrowFactors:{xs:1},itemMinHeights:{sm:220},children:t.map((e,t)=>(0,h.jsx)(td.c.Item,{index:t,aspectRatio:(0,tl.p$)(e.settings.aspectRatio),children:(0,h.jsx)("button",{"aria-label":"Dialog image creation",type:"button",className:"rounded-lg w-full h-full overflow-hidden",onClick:()=>n({imageAssetId:e.id,styleId:e.style.id,imageUrl:e.imageUrl,generationId:e.generationId}),children:(0,h.jsx)(ew.J,{src:e.imageUrl,alt:e.prompt})})},e.id))})})})},tu=e=>{let{isOpen:t,generateType:a,genAiModel:r,closeDialog:i,onImageSelect:n}=e,{t:o}=(0,u.Bd)("visual-ai"),{trackImageGenEvent:l}=(0,m.W)(),{isFetched:d,allImageCreations:c,handleLoadMore:p,assignScrollContainerRef:g,scrollContainerRef:x,hasNextPage:y,isLoading:f}=tr();return(0,h.jsxs)(C.A,{open:t,fullScreen:!0,sx:{"& .MuiDialog-paper":{maxWidth:"1166px",maxHeight:"735px",padding:"40px 20px 40px 40px"}},onClose:()=>{i(),l({name:"my creation modal closed",button_name:null})},children:[(0,h.jsxs)("div",{className:"flex h-full flex-col gap-6",children:[(0,h.jsx)("h2",{className:"text-2xl font-medium",children:o("prompt.myCreationsDialog.title")}),(0,s.YW)({isLoading:f,generateType:a,isEmpty:d&&0===c.length}).with({isLoading:!0},()=>(0,h.jsx)("div",{className:"flex flex-1 items-center justify-center pr-5",children:(0,h.jsx)(ta,{})})).with({isEmpty:!0},()=>(0,h.jsx)(tn,{onLinkClick:i})).with({isEmpty:!1,isLoading:!1,generateType:"image to image"},()=>(0,h.jsx)(tc,{allImageCreations:c.filter(e=>"succeeded"===e.status),hasNextPage:y,onImageSelect:e=>{n(e),l({name:"generated asset chosen",generate_type:"image to image",image_asset_id:e.imageAssetId,component:"My creation modal",flow_type:"choose image flow",generation_id:e.generationId,gen_ai_model:r}),i()},scrollContainerRef:x,handleLoadMore:p,assignScrollContainerRef:g})).with({isEmpty:!1,isLoading:!1,generateType:"image to video"},()=>(0,h.jsx)(tc,{allImageCreations:c.filter(e=>"succeeded"===e.status),onImageSelect:e=>{n(e),l({name:"generated asset chosen",generate_type:"image to video",image_asset_id:e.imageAssetId,component:"My creation modal",flow_type:"choose image flow",generation_id:e.generationId,gen_ai_model:r}),i()},hasNextPage:y,scrollContainerRef:x,handleLoadMore:p,assignScrollContainerRef:g})).exhaustive()]}),(0,h.jsx)(k.D,{"aria-label":"Close",onClick:()=>{i(),l({name:"my creation modal closed",button_name:"x"})},style:{zIndex:1}})]})},tp=()=>{H.default.trigger(J.yV.SIGN_UP__MODAL__OPEN,{clickSource:"prompt section",buttonName:"upload",trigger:"prompt section",registerSourceEvent:"prompt section"})},tm=e=>{let{isEndFrame:t}=e,{accept:a,decline:i,waitForAgree:n}=ec(),{saveAgreement:s,isSaving:o,hasUserAgreed:l}=K(eu),{trackImageGenEvent:d}=(0,m.W)(),{t:c}=(0,u.Bd)("visual-ai"),[p,g]=(0,r.useState)(!1);return{checkIfCanUpload:async()=>{if(l)return!0;d({name:"pop-up open",pop_up_title:c("legalTermsDialog.title"),pop_up_secondary_title:c("legalTermsDialog.description"),...void 0!==t&&{is_end_frame:t}}),g(!0);let e=await n();return g(!1),!!e&&(await s(),!0)},closeDialog:()=>{i(),g(!1),d({name:"pop-up closed",pop_up_title:c("legalTermsDialog.title"),pop_up_secondary_title:c("legalTermsDialog.description"),...void 0!==t&&{is_end_frame:t}})},onAcceptClick:async()=>{await s(void 0,{onError:()=>{Y.A.error(c("imageToVideo.agreementFailed"))}}),a(),d({name:"pop-up button clicked",button_name:"Accept",pop_up_title:c("legalTermsDialog.title"),pop_up_secondary_title:c("legalTermsDialog.description")})},onDeclineClick:()=>{i(),d({name:"pop-up button clicked",button_name:"Decline",pop_up_title:c("legalTermsDialog.title"),pop_up_secondary_title:c("legalTermsDialog.description")})},shouldShowDialog:p,isSaving:o}},tg=e=>{let{mutation:t}=e,{checkIfCanUpload:a,closeDialog:i,onAcceptClick:n,onDeclineClick:o,shouldShowDialog:l,isSaving:d}=tm({}),[c,u]=(0,r.useState)(!1),[p,g]=(0,eR.Uy)(),{isVisitor:x}=(0,R.f)(),{modelGroupId:y}=p,f=(0,eB._M)(),{processFiles:j}=e6({mutation:t,checkIfCanUpload:a}),{trackImageGenEvent:w}=(0,m.W)(),_=()=>{w({name:"button clicked",button_name:"upload",click_source:"image to image text box"})},C=(0,r.useCallback)(()=>{w({name:"my creation modal opened",generate_type:"image to image",gen_ai_model:(0,eB.Gl)(y,f.imageToImage)})},[y,w,f.imageToImage]);return(0,r.useEffect)(()=>{c&&C()},[c,C]),(0,h.jsxs)(h.Fragment,{children:[(0,s.YW)({isUploading:t.isUploading,isValidating:t.isValidating}).with({isUploading:!0,isValidating:!1},()=>(0,h.jsx)(ek,{})).with({isUploading:!1,isValidating:!0},()=>{var e,a;return(0,h.jsx)(ek,{src:null==(e=t.uploadData)||null==(a=e.data)?void 0:a.downloadUrl})}).otherwise(()=>(0,h.jsx)(v,{onDropFiles:j,children:x?(0,h.jsxs)("button",{type:"button",onClick:_,className:"w-10 h-10 rounded border border-dashed flex items-center justify-center relative shrink-0 text-medium-emphasis",children:[(0,h.jsx)(b,{height:20,width:20}),(0,h.jsx)(ev,{handleInputUpload:e=>j(e.target.files),uploadImageInputId:"desktop"}),(0,h.jsx)("label",{htmlFor:"image-gen-upload-image-desktop",className:"absolute inset-0 cursor-pointer","aria-label":"Upload"})]}):(0,h.jsx)(tt,{processFiles:j,handleUploadClick:_,openMyCreationsDialog:()=>{u(!0)},generateType:"image to image"})})),(0,h.jsx)(M,{open:l,onClose:i,onAcceptClick:n,onDeclineClick:o,isSaving:d}),(0,h.jsx)(tu,{isOpen:c,generateType:"image to image",genAiModel:(0,eB.Gl)(y,f.imageToImage),closeDialog:()=>u(!1),onImageSelect:e=>{g({type:"assetAdded",payload:e})}})]})},th=e=>{let{mutation:t,sourceType:a}=e,{t:i}=(0,u.Bd)("visual-ai"),{dispatch:n}=(0,eZ.kt)(),o=(0,r.useRef)(null),l=(0,$.useSession)(),{isVisitor:d}=(0,R.f)(),[g,x]=(0,r.useState)(!1),{data:y}=e5(),f=(0,e3.M6)(),w=(0,e7.XO)(),{state:_}=(0,eZ.Cm)(),{modelGroupId:C,lastFrameSource:T}=_,I=(0,eB._M)(),{checkIfCanUpload:E,closeDialog:A,onAcceptClick:k,onDeclineClick:N,shouldShowDialog:S,isSaving:O}=tm({isEndFrame:"none"!==T.type}),{trackImageGenEvent:L}=(0,m.W)(),P=(0,e4.F)(),G="lastFrame"===a,B=i(G?"prompt.imageToVideoFields.endTooltip":"prompt.imageToVideoFields.startTooltip"),U=()=>{L({name:"button clicked",button_name:G?"End frame":"Start frame",click_source:"image to video text box"})},F=async e=>{"authenticated"!==l.status?tp():!await E()||e&&e.length>0&&o.current&&(t.reset(),t.mutate({files:e,canvas:o.current,uploadSource:"os-dialog",maxSizeInMb:10},{onSuccess:e=>{let{downloadUrl:t,image:a}=e;if(n({type:G?"lastFrameUrlChosen":"urlChosen",payload:{imageUrl:t,aspectRatio:(0,Q.j)(a).aspectRatio||p.gl.SQUARE,styleId:null==y?void 0:y.id}}),y&&!P&&"none"!==_.source.type){if(G)return void f({imageUrl:_.source.imageUrl??"",lastFrameImageUrl:t,styleId:y.id});f({imageUrl:t,styleId:y.id})}},onError:e=>{let t=e0(e);Y.A.error(t)}}))},D=(0,r.useCallback)(()=>{L({name:"my creation modal opened",generate_type:"image to video",gen_ai_model:(0,eB.Gl)(C,I.imageToVideo)})},[C,L,I.imageToVideo]);return(0,r.useEffect)(()=>{g&&D()},[g,D]),(0,h.jsxs)(h.Fragment,{children:[(0,s.YW)({isUploading:t.isUploading,isValidating:t.isValidating}).with({isUploading:!0,isValidating:!1},()=>(0,h.jsx)(ek,{})).with({isUploading:!1,isValidating:!0},()=>{var e,a;return(0,h.jsx)(ek,{src:null==(e=t.uploadData)||null==(a=e.data)?void 0:a.downloadUrl})}).otherwise(()=>(0,h.jsx)(v,{onDropFiles:F,children:d?(0,h.jsx)(c.A,{title:B,placement:"top",children:(0,h.jsxs)("button",{type:"button",onClick:U,className:(0,j.cn)("w-10 h-10 rounded border border-dashed flex items-center justify-center relative shrink-0 text-medium-emphasis"),children:[(0,h.jsx)(b,{height:20,width:20}),(0,h.jsx)(ev,{handleInputUpload:e=>F(e.target.files),uploadImageInputId:"desktop"}),(0,h.jsx)("label",{htmlFor:"image-gen-upload-image-desktop",className:"absolute inset-0 cursor-pointer","aria-label":"Upload"}),(0,h.jsx)("canvas",{ref:o,className:"hidden w-64 h-64"})]})}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tt,{processFiles:F,handleUploadClick:U,openMyCreationsDialog:()=>x(!0),generateType:"image to video",label:B,isLastFrame:G}),(0,h.jsx)("canvas",{ref:o,className:"hidden w-64 h-64"})]})})),(0,h.jsx)(M,{open:S,onClose:A,onAcceptClick:k,onDeclineClick:N,isSaving:O}),(0,h.jsx)(tu,{isOpen:g,generateType:"image to video",genAiModel:(0,eB.Gl)(C,I.imageToVideo),closeDialog:()=>x(!1),onImageSelect:e=>{n({type:G?"lastFrameAssetChosen":"assetChosen",payload:e}),(0,s.YW)({isPromptSuggestionButtonEnabled:P,isLastFrame:G,source:_.source}).with({source:{type:"none"}},{isPromptSuggestionButtonEnabled:!0},e9.l).with({isLastFrame:!1,source:{type:s.P.union("url","asset","showcaseExample")}},()=>w.mutate({imageAssetId:e.imageAssetId})).with({isLastFrame:!0,source:{type:s.P.union("url","asset","showcaseExample")}},t=>{let{source:a}=t;return f({imageUrl:a.imageUrl,lastFrameImageUrl:e.imageUrl,styleId:e.styleId})}).exhaustive()}})]})},tx=()=>{let e=(0,eR.LS)(),[t,a]=(0,eR.Uy)(),{modelGroupId:r}=t,i=(0,eB._M)(),n=e1({supplementalKey:eP.ri,imageIndex:e.length}),{trackImageGenEvent:o}=(0,m.W)();return(0,h.jsxs)(d.A,{direction:"row",gap:1,sx:{alignItems:"start",flexShrink:0},children:[e.map((t,d)=>(0,s.YW)(t).with({type:s.P.union("asset","showcaseExample","url")},t=>(0,h.jsx)(v,{onDropFiles:e=>((e,t)=>{if(!(e&&e.length>0))return;let r=document.createElement("canvas");n.reset(),n.mutate({files:e,canvas:r,uploadSource:"os-dialog",maxSizeInMb:20},{onSuccess:e=>{let{downloadUrl:r,image:i}=e;a({type:"sourceOverwrittenWithUrl",payload:{index:t,imageUrl:r,aspectRatio:(0,Q.j)(i).aspectRatio||p.gl.SQUARE}})},onError:e=>{let t=e0(e);Y.A.error(t)}})})(e,d),children:(0,h.jsx)(x,{onClear:()=>{let t=e[d];a({type:"sourceRemoved",payload:{index:d}}),o({name:"uploaded photo removed",generate_type:"image to image",gen_ai_model:(0,eB.Gl)(r,i.imageToImage),is_uploaded_photo:(null==t?void 0:t.type)==="url"})},popoverContents:(0,h.jsx)("img",{src:t.imageUrl,alt:"Selected",className:"rounded max-h-[150px] max-w-[150px]",loading:"eager"}),children:(0,h.jsx)(l.default,{width:40,unoptimized:!0,height:40,src:t.imageUrl,alt:"Selected",className:"rounded object-cover aspect-square"})})},t.imageUrl)).with({type:"none"},()=>null).exhaustive()),e.length<3&&(0,h.jsx)(tg,{mutation:n})]})},ty=e=>{let{sourceType:t}=e,{dispatch:a}=(0,eZ.kt)(),r=(0,eZ.cb)(t),{trackImageGenEvent:i}=(0,m.W)(),n=(0,$.useSession)(),o=(0,e7.Ux)(),d=(0,e3.XN)(),{data:c}=e5(),{state:u}=(0,eZ.Cm)(),{modelGroupId:g,lastFrameSource:y}=u,f=(0,eB._M)(),j="lastFrame"===t,b=e1({supplementalKey:eP.ty,imageIndex:0}),w=e=>{if("authenticated"!==n.status)return void tp();if(!(e&&e.length>0))return;let t=document.createElement("canvas");b.reset(),b.mutate({files:e,canvas:t,uploadSource:"os-dialog",maxSizeInMb:20},{onSuccess:e=>{let{downloadUrl:t,image:r}=e;a({type:j?"lastFrameUrlChosen":"urlChosen",payload:{imageUrl:t,aspectRatio:(0,Q.j)(r).aspectRatio||p.gl.SQUARE,styleId:null==c?void 0:c.id}})},onError:e=>{let t=e0(e);Y.A.error(t)}})},_=()=>{let e="url"===r.type;a({type:j?"lastFrameImageRemoved":"imageRemoved"}),i({name:"uploaded photo removed",generate_type:"image to video",gen_ai_model:(0,eB.Gl)(g,f.imageToVideo),is_uploaded_photo:e,is_end_frame:"none"!==y.type})};return(0,s.YW)({...r,isPromptBeingSuggested:o||d}).with({type:s.P.union("asset","showcaseExample","url"),isPromptBeingSuggested:!1},e=>(0,h.jsx)(v,{onDropFiles:e=>w(e),children:(0,h.jsx)(x,{onClear:_,popoverContents:(0,h.jsx)("img",{src:e.imageUrl,alt:"Selected",className:"rounded max-h-[150px] max-w-[150px]",loading:"eager"}),children:(0,h.jsx)(l.default,{width:40,unoptimized:!0,height:40,src:e.imageUrl,alt:"Selected",className:"rounded object-cover aspect-square"})})})).with({type:s.P.union("asset","showcaseExample","url"),isPromptBeingSuggested:!0},e=>(0,h.jsx)(v,{onDropFiles:e=>w(e),className:"h-10 w-10",children:(0,h.jsx)(l.default,{width:40,unoptimized:!0,height:40,src:e.imageUrl,alt:"Selected",className:"rounded object-cover aspect-square"})})).with({type:"none"},()=>(0,h.jsx)(th,{mutation:b,sourceType:t})).exhaustive()},tf=()=>(0,h.jsx)(o.P.div,{layout:"position",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:(0,h.jsx)(ty,{sourceType:"lastFrame"})},"last-frame-input");var tj=a(47773),tv=a(63560),tb=a(97436),tw=a(87188);let t_=()=>(0,h.jsx)("img",{src:`${F.u5}/artlist/banana-2.png?auto=format`,alt:"Banana",className:"w-4 h-4 inline"});var tC=a(9940),tT=a(75643),tI=a(50527),tE=a(42218);let tA=()=>(0,h.jsx)("img",{src:tE.yj.src,alt:"Flux",className:"w-4 h-4 inline"}),tk=()=>(0,h.jsx)("img",{src:tE.Ie.src,alt:"GPT 1.5",className:"w-4 h-4 inline"});var tN=a(17208);let tS=()=>(0,h.jsx)("img",{src:tE.f4.src,alt:"Seedream",className:"w-4 h-4 inline"}),tM=(0,E.Ay)(o.P.div)(e=>{let{theme:t}=e;return{paddingRight:t.spacing(1),display:"flex",flexDirection:"row",gap:t.spacing(1),alignItems:"center"}}),tO=(0,E.Ay)("img")(()=>({width:"16px",height:"16px",objectFit:"contain"})),tL=(0,E.Ay)("div")(e=>{let{theme:t}=e;return{display:"flex",flexDirection:"row",gap:t.spacing(1),alignItems:"center"}}),tP=(0,E.Ay)("div")(e=>{let{theme:t}=e;return{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:t.spacing(1),color:t.palette.text.highestEmphasis.main}}),tR=(0,E.Ay)("div")(e=>{let{theme:t}=e;return{backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText,borderRadius:2,fontSize:"10px",fontWeight:700,textTransform:"uppercase",padding:`0 ${t.spacing(.5)}`}}),tG=Object.assign(e=>{let{children:t,...a}=e;return(0,h.jsx)(tN.Do,{ariaLabelPrefix:"modelGroup",listProps:{sx:e=>({padding:e.spacing(2),gap:e.spacing(1.5),display:"grid",overflow:"auto",gridTemplateColumns:"1fr 1fr","&::before":{content:'"Models"',fontSize:e.typography["body-medium-long"].fontSize,fontWeight:e.typography["body-medium-long"].fontWeight,lineHeight:e.typography["body-medium-long"].lineHeight,letterSpacing:e.typography["body-medium-long"].letterSpacing,color:e.palette.text.mediumEmphasis.main,gridColumn:"1 / span 2"},[`${e.breakpoints.down("lg")}`]:{gridTemplateColumns:"1fr"}})},paperProps:{sx:e=>({display:"flex",padding:0,flexDirection:"column",gap:e.spacing(1.5),overflow:"hidden",maxWidth:"748px",maxHeight:"328px"})},renderValue:e=>(0,h.jsxs)(tM,{children:[e.name.toLowerCase().includes("banana")&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(t_,{})," "]}),e.name.toLowerCase().includes("flux")&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tA,{})," "]}),e.name.toLowerCase().includes("seedream")&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tS,{})," "]}),e.name.toLowerCase().includes("gpt")&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tk,{})," "]}),(0,h.jsxs)(o.P.span,{children:[(0,tI.f)(e.name)," Model"]})]}),...a,children:t})},{MenuItem:(0,E.Ay)(e8.A)(e=>{let{theme:t}=e;return{borderWidth:1,borderStyle:"solid",borderColor:t.palette.stroke.mediumLowEmphasis.main,borderRadius:8,width:"100%",textTransform:"none",color:"#B2B2B2",display:"flex",gap:"0.75rem",height:"auto",minHeight:"80px",padding:t.spacing(2),alignItems:"flex-start",transition:t.transitions.create(["border-color","box-shadow"],{duration:t.transitions.duration.shortest}),[`&.${tT.A.selected}`]:{borderColor:t.palette.stroke.highEmphasis.main,backgroundColor:"transparent",boxShadow:"0px 4px 4px 0px rgba(0, 0, 0, 0.25), 0px 8px 12px 6px rgba(0, 0, 0, 0.15)"}}}),MenuItemContainer:(0,E.Ay)("div")(e=>{let{theme:t}=e;return{width:"100%",display:"flex",flexDirection:"column",gap:t.spacing(1)}}),MenuItemName:e=>(0,h.jsx)(f.default,{...e,sx:e=>({whiteSpace:"pre-wrap",letterSpacing:0,color:e.palette.text.highEmphasis.main,display:"inline-flex",alignItems:"center",gap:e.spacing(.25)}),variant:"body-medium-short"}),MenuItemSuffix:e=>(0,h.jsx)(f.default,{...e,sx:e=>({whiteSpace:"pre-wrap",letterSpacing:0,color:e.palette.text.mediumEmphasis.main}),variant:"body-small-short"}),MenuItemNameInnerContainer:tL,MenuItemNameOuterContainer:tP,MenuItemDescription:e=>(0,h.jsx)(f.default,{...e,sx:e=>({whiteSpace:"pre-wrap",letterSpacing:0,color:e.palette.text.mediumEmphasis.main}),variant:"body-medium-long"}),MenuItemCheckIcon:()=>(0,h.jsx)(tC.A,{className:"flex flex-grow justify-end",children:(0,h.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("path",{d:"M6.5625 0C10.1719 0 13.125 2.95312 13.125 6.5625C13.125 10.1992 10.1719 13.125 6.5625 13.125C2.92578 13.125 0 10.1992 0 6.5625C0 2.95312 2.92578 0 6.5625 0ZM9.70703 5.35938C10.0078 5.05859 10.0078 4.59375 9.70703 4.29297C9.40625 3.99219 8.94141 3.99219 8.64062 4.29297L5.6875 7.24609L4.45703 6.04297C4.15625 5.74219 3.69141 5.74219 3.39062 6.04297C3.08984 6.34375 3.08984 6.80859 3.39062 7.10938L5.14062 8.85938C5.27734 9.02344 5.46875 9.07812 5.6875 9.07812C5.87891 9.07812 6.07031 9.02344 6.20703 8.85938L9.70703 5.35938Z",fill:"currentColor"})})}),NotAllowedMenuItem:(0,E.Ay)(e8.A)(e=>{let{theme:t}=e;return{textTransform:"none",color:"#B2B2B2",display:"flex",gap:"0.75rem",borderWidth:1,borderStyle:"solid",borderColor:t.palette.stroke.mediumLowEmphasis.main,borderRadius:8,height:"auto !important",minHeight:"80px",padding:t.spacing(2),alignItems:"flex-start","&:hover":{backgroundColor:t.palette.action.hover}}}),ActionText:e=>{let{isPaid:t,onClick:a}=e;return(0,h.jsx)("button",{className:"flex flex-shrink-0 text-yellow-500 bg-transparent border-none cursor-pointer p-0 font-inherit whitespace-nowrap ml-auto",onClick:a,type:"button",children:t?"Upgrade":"Subscribe"})},ValueContainer:tM,NewTag:tR,IconImage:tO}),tB=e=>({modelGroupId:e.id,name:e.name,description:"description"in e&&e.description||null}),tU=e=>{let{styles:t,value:a,onChange:r}=e,{trackImageGenEvent:i}=(0,m.W)(),{state:n}=(0,tb.A0)(),{isFeatureEnabled:s}=(0,tw.p)(),o=t.map(tB),l=o.find(e=>e.modelGroupId===a)??o[0];return l?(0,h.jsx)(tG,{onChange:e=>{let{target:a}=e,s="string"==typeof a.value?a.value:a.value.modelGroupId,o=t.find(e=>e.id===s),l=t.find(e=>e.id===n.styleId);i({name:"gen AI model switched",new_value:(null==o?void 0:o.name)??"unknown",old_value:(null==l?void 0:l.name)??"unknown",aspect_ratio:(0,tv.PR)(n.aspectRatio),generate_type:"text to image"}),r({target:{value:s}})},onOpen:()=>{i({name:"button clicked",button_name:"gen ai models",gen_AI_tier:s?l.name:"unknown"})},value:l,children:o.map(e=>{let t=l.modelGroupId===e.modelGroupId;return(0,h.jsx)(tG.MenuItem,{value:e,children:(0,h.jsxs)(tG.MenuItemContainer,{children:[(0,h.jsxs)(tG.MenuItemNameOuterContainer,{children:[(0,h.jsx)(tG.MenuItemNameInnerContainer,{children:(0,h.jsxs)(tG.MenuItemName,{children:[e.name.toLowerCase().includes("banana")&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(t_,{})," "]}),e.name.toLowerCase().includes("flux")&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tA,{})," "]}),e.name.toLowerCase().includes("seedream")&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tS,{})," "]}),e.name.toLowerCase().includes("gpt")&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tk,{})," "]}),e.name]})}),t&&(0,h.jsx)(tG.MenuItemCheckIcon,{})]}),e.description&&(0,h.jsx)(tG.MenuItemDescription,{children:e.description})]})},e.modelGroupId)})}):null};var tF=a(11161),t$=a(76495);let tD=["styles"],tV=()=>(0,t$.useInfiniteQuery)({queryKey:tD,queryFn:e=>{let{pageParam:t=1}=e;return(0,e2.p)({page:t})},getNextPageParam:(e,t)=>{if(e.length>0)return t.length+1},keepPreviousData:!0,refetchOnWindowFocus:!1,staleTime:1/0});var tX=a(87455);let tW=e=>(0,h.jsx)(l.default,{sizes:"56px",width:28,height:28,className:"relative flex aspect-square shrink-0 items-center justify-center rounded bg-gray-50 object-cover",...e}),tz=e=>(0,h.jsx)(l.default,{sizes:"80px",width:40,height:40,className:"relative flex aspect-square shrink-0 items-center justify-center rounded bg-gray-50 object-cover",...e}),tK=e=>(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)(l.default,{sizes:"120px",width:60,height:60,className:"flex aspect-square shrink-0 items-center justify-center rounded bg-gray-50 object-cover",...e}),(0,h.jsx)(tC.A,{className:"checkmark-overlay absolute inset-0 flex items-center justify-center",sx:{opacity:0,transition:"opacity 0.2s ease-in-out",backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:"0.5rem",pointerEvents:"none","& svg":{color:"white"}},children:(0,h.jsx)(tF.N,{})})]}),tH=e=>{let{children:t,styleId:a,styleName:r,...i}=e,{t:n}=(0,u.Bd)("visual-ai"),{trackImageGenEvent:s}=(0,m.W)(),{state:o}=(0,tb.A0)(),l=tV(),d=(0,q.RZ)();return(0,h.jsxs)(e8.A,{...i,className:"flex items-center gap-3 px-2 py-2 font-medium text-gray-100",sx:e=>({padding:"0.5rem",borderRadius:"0.5rem",border:"1px solid transparent",transition:e.transitions.create(["border-color","opacity"],{duration:e.transitions.duration.shortest}),[`&.${tT.A.selected}`]:{borderColor:"white",backgroundColor:"transparent","& .checkmark-overlay":{opacity:1}}}),children:[t,(0,h.jsx)(tC.A,{className:"flex flex-grow justify-end items-center gap-2",children:(0,h.jsx)(L(),{href:d(`/text-to-image-ai/style-catalog/${a}`),className:"flex items-center justify-center px-2 py-1.5 text-high-emphasis hover:text-highest-emphasis transition-colors hover:bg-highest-emphasis rounded",onClick:e=>{var t;let a;e.stopPropagation(),a=((null==(t=l.data)?void 0:t.pages.flatMap(e=>e))||[]).find(e=>e.id===o.styleId),s({name:eL.$.MODAL_OPENED,modal_name:eL.$.STYLE_CATALOG_GRID,click_source:eL.$.TEXT_TO_IMAGE_TEXT_BOX,...a&&{style:a.name}}),s({name:eL.$.BUTTON_CLICKED,button_name:"Explore",click_source:eL.$.TEXT_TO_IMAGE_TEXT_BOX,component:"style",style:r,gen_ai_type:"text to image"})},children:(0,h.jsx)(f.default,{variant:"title-small",children:n("styleSelect.explore")})})})]})},tY=e=>{let{styles:t,...a}=e,{t:r}=(0,u.Bd)("visual-ai");return(0,h.jsxs)(tN.Do,{ariaLabelPrefix:"style",renderValue:e=>{let a=t.find(t=>t.id===e);return a?(0,h.jsxs)("div",{className:"inline-flex items-center gap-2 pr-2",children:[(0,h.jsx)(tW,{src:a.coverImageUrl,alt:a.name}),a.name]}):r("styleSelect.selectAStyle")},paperProps:{sx:e=>({padding:"1rem",maxHeight:300,background:e.palette.background.mediumEmphasis,scrollbarWidth:"thin",scrollbarColor:`${e.palette.grey["300"]} ${e.palette.grey["500"]}`,zIndex:e.zIndex.drawer+10})},...a,children:[(0,h.jsx)(f.default,{variant:"body-medium-short",className:"text-low-emphasis mb-4",children:r("styleSelect.selectAStyle")}),t.map(e=>(0,h.jsxs)(tH,{value:e.id,styleId:e.id,styleName:e.name,children:[(0,h.jsx)(tK,{src:e.coverImageUrl,alt:e.name}),(0,h.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,h.jsx)(f.default,{variant:"title-medium",className:"text-white",children:e.name}),e.imageGenerationCost&&(0,h.jsxs)("div",{className:"flex items-center gap-1",children:[(0,h.jsx)(f.default,{variant:"title-small",className:"text-medium-emphasis",children:e.imageGenerationCost}),(0,h.jsx)(tX.v,{className:"w-3 h-3 text-medium-emphasis"})]})]})]},e.id))]})};var tJ=a(1201),tQ=a(62351),tq=a(51561),tZ=a(55583),t0=a(13764),t1=a(78349),t2=a(28832),t5=a(49155),t4=a(73715),t6=a(93287),t3=a(22823);let t7={name:eL.$.BUTTON_CLICKED,button_name:eL.$.GEN_AI_MODELS_AND_SETTINGS,click_source:eL.$.TEXT_TO_VIDEO_TEXT_BOX,component:eL.$.SETTINGS_TEXT_BOX};var t9=a(38406),t8=a(48060);let ae={name:eL.$.BUTTON_CLICKED,button_name:eL.$.GEN_AI_MODELS_AND_SETTINGS,click_source:eL.$.IMAGE_TO_IMAGE_TEXT_BOX,component:eL.$.SETTINGS_TEXT_BOX},at={name:eL.$.BUTTON_CLICKED,button_name:eL.$.GEN_AI_MODELS_AND_SETTINGS,click_source:eL.$.IMAGE_TO_VIDEO_TEXT_BOX,component:eL.$.SETTINGS_TEXT_BOX},aa=e=>{let{...t}=e;return{name:eL.$.BUTTON_CLICKED,button_name:"prompt enhancement",click_source:eL.$.TEXT_TO_IMAGE_TEXT_BOX,...t}},ar=e=>{let{is_enhancement:t,prompt_edited:a,total_words:r,style:i,images:n,aspect_ratio:s,gen_AI_tier:o,...l}=e;return{name:eL.$.BUTTON_CLICKED,button_name:"generate",click_source:eL.$.TEXT_TO_IMAGE_TEXT_BOX,is_enhancement:t,prompt_edited:a,total_words:r,style:i,images:n,aspect_ratio:s,gen_AI_tier:o,...l}},ai=()=>({name:eL.$.BUTTON_CLICKED,button_name:"revert",click_source:eL.$.TEXT_TO_IMAGE_TEXT_BOX}),an=()=>({name:eL.$.BUTTON_CLICKED,button_name:"aspect ratio dropdown",click_source:eL.$.TEXT_TO_IMAGE_TEXT_BOX,component:eL.$.SETTINGS_TEXT_BOX}),as=e=>({name:eL.$.BUTTON_CLICKED,click_source:eL.$.TEXT_TO_IMAGE_TEXT_BOX,component:eL.$.SETTINGS_TEXT_BOX,button_name:e}),ao=()=>({name:eL.$.BUTTON_CLICKED,button_name:"images dropdown",click_source:eL.$.TEXT_TO_IMAGE_TEXT_BOX,component:eL.$.SETTINGS_TEXT_BOX}),al=e=>({name:eL.$.BUTTON_CLICKED,click_source:eL.$.TEXT_TO_IMAGE_TEXT_BOX,component:eL.$.SETTINGS_TEXT_BOX,button_name:e}),ad=e=>{let{style:t,images:a,aspect_ratio:r,is_pasted:i}=e;return{name:eL.$.START_FREE_TEXT_TYPE,click_source:eL.$.TEXT_TO_IMAGE_TEXT_BOX,style:t,images:a,aspect_ratio:r,is_pasted:i}},ac={name:eL.$.BUTTON_CLICKED,button_name:eL.$.GEN_AI_MODELS_AND_SETTINGS,click_source:eL.$.TEXT_TO_IMAGE_TEXT_BOX,component:eL.$.SETTINGS_TEXT_BOX};var au=a(3261),ap=a(92288);let am=(0,E.Ay)("div")(e=>{let{theme:t}=e;return{display:"flex",flexDirection:"row",gap:t.spacing(1)}}),ag=(0,E.Ay)("div")(()=>({fontWeight:700,color:"black",background:"#E5C426",borderRadius:"3px",width:"30px",height:"16px",fontSize:"10px",textAlign:"center"})),ah=e=>({tooltip_title:e("prompt.imageToImageTooltip.title",{lng:"eng"}),tooltip_text:e("prompt.imageToImageTooltip.title",{lng:"eng"})}),ax=e=>{let{t}=(0,u.Bd)("visual-ai"),a=(0,au.Xm)(au.Tg),{closeFeatureIndicator:i,showFeatureIndicator:n}=(0,t9.Cs)(au.Tg,ah(t),{showOnce:!1,sendTooltipEvents:!0});return(0,r.useEffect)(()=>{n()},[]),(0,h.jsx)(ap.JM,{placement:"top",isFeatureTooltipShow:a,closeFeatureTooltip:()=>{i()},zIndex:0,maxWidth:"370px",title:(0,h.jsxs)(am,{children:[(0,h.jsx)("span",{children:t("prompt.imageToImageTooltip.title")}),(0,h.jsx)(ag,{children:t("prompt.imageToImageTooltip.new")})]}),description:t("prompt.imageToImageTooltip.description"),...e})},ay=(0,E.Ay)("div")(e=>{let{theme:t}=e;return{display:"flex",flexDirection:"row",gap:t.spacing(1)}}),af=(0,E.Ay)("div")(()=>({fontWeight:700,color:"black",background:"#E5C426",borderRadius:"3px",width:"30px",height:"16px",fontSize:"10px",textAlign:"center"})),aj=e=>({tooltip_title:e("prompt.uploadImageTooltip.title",{lng:"eng"}),tooltip_text:e("prompt.uploadImageTooltip.title",{lng:"eng"})}),av=e=>{let{t}=(0,u.Bd)("visual-ai"),a=(0,au.Xm)(au.V6),{closeFeatureIndicator:i,showFeatureIndicator:n}=(0,t9.Cs)(au.V6,aj(t),{showOnce:!1,sendTooltipEvents:!0});return(0,r.useEffect)(()=>{n()},[]),(0,h.jsx)(ap.JM,{isFeatureTooltipShow:a,closeFeatureTooltip:()=>{i()},zIndex:0,title:(0,h.jsxs)(ay,{children:[(0,h.jsx)("span",{children:t("prompt.uploadImageTooltip.title")}),(0,h.jsx)(af,{children:t("prompt.uploadImageTooltip.new")})]}),description:t("prompt.uploadImageTooltip.description"),...e})},ab=Object.assign(e=>(0,h.jsx)("div",{className:"flex w-full gap-3 sm:w-auto overflow-x-auto shrink-0",...e}),{TextToImageTab:()=>{let{trackImageGenEvent:e}=(0,m.W)(),{t}=(0,u.Bd)("visual-ai"),a=(0,Z.D)();return(0,h.jsx)(t8.a,{href:"/text-to-image-ai",isActive:a===eP.Nz,onClick:()=>e({name:eL.$.BUTTON_CLICKED,button_name:"text to image",click_source:eL.$.TEXT_TO_IMAGE_TEXT_BOX}),children:t("prompt.textToImage")})},ImageToImageTab:()=>{let{trackImageGenEvent:e}=(0,m.W)(),{t}=(0,u.Bd)("visual-ai"),a=(0,Z.D)(),{closeFeatureIndicator:r}=(0,t9.Cs)(au.Tg,ah(t),{showOnce:!1,sendTooltipEvents:!0});return(0,h.jsx)(ax,{children:(0,h.jsx)("span",{className:"shrink-0 grow lg:flex-none",children:(0,h.jsx)(t8.a,{href:"/image-to-image-ai",isActive:a===eP.ri,onClick:()=>{let t;e((t=(0,s.YW)(a).with(eP.Nz,()=>eL.$.TEXT_TO_IMAGE_TEXT_BOX).with(eP.ri,()=>eL.$.IMAGE_TO_IMAGE_TEXT_BOX).with(eP.ty,()=>eL.$.IMAGE_TO_VIDEO_TEXT_BOX).with(eP.pC,()=>eL.$.TEXT_TO_VIDEO_TEXT_BOX).exhaustive(),{name:eL.$.BUTTON_CLICKED,button_name:"image to image",click_source:t})),r()},children:t("prompt.imageToImage.tabName")})})})},ImageToVideoTab:()=>{let{trackImageGenEvent:e}=(0,m.W)(),{t}=(0,u.Bd)("visual-ai"),a=(0,Z.D)(),{closeFeatureIndicator:r}=(0,t9.Cs)(au.V6,aj(t),{showOnce:!1,sendTooltipEvents:!0});return(0,h.jsx)(av,{children:(0,h.jsx)("span",{className:"shrink-0 grow lg:flex-none",children:(0,h.jsx)(t8.a,{href:"/image-to-video-ai",isActive:a===eP.ty,onClick:()=>{e({name:eL.$.BUTTON_CLICKED,button_name:"image to video",click_source:eL.$.IMAGE_TO_VIDEO_TEXT_BOX}),r()},children:t("prompt.imageToVideo")})})})},TextToVideoTab:()=>{let{trackImageGenEvent:e}=(0,m.W)(),{t}=(0,u.Bd)("visual-ai"),a=(0,Z.D)();return(0,h.jsx)(t8.a,{href:"/text-to-video-ai",isActive:a===eP.pC,onClick:()=>e({name:eL.$.BUTTON_CLICKED,button_name:"text to video",click_source:eL.$.TEXT_TO_VIDEO_TEXT_BOX}),children:(0,h.jsx)(tC.A,{sx:{display:"flex",direction:"row",gap:.5,justifyContent:"center"},children:(0,h.jsx)("span",{children:t("prompt.textToVideo")})})})}});var aw=a(27170);let a_=e=>{let{children:t}=e;return(0,h.jsx)("div",{className:"flex justify-between gap-3.5 h-11 shrink-0",children:t})},aC=e=>{let{children:t}=e;return(0,h.jsx)("div",{className:"h-full flex flex-col justify-between min-h-[180px]",children:t})},aT=()=>(0,h.jsxs)(d.A,{className:"mt-1",gap:1,children:[(0,h.jsx)(aw.A,{className:"h-[15px] w-full"}),(0,h.jsx)(aw.A,{className:"h-[15px] w-[227px]"})]}),aI=r.forwardRef((e,t)=>(0,h.jsx)(f.default,{variant:"body-large-long",component:"textarea",...e,ref:t,"data-testid":"image-gen-prompt-text-area",className:(0,j.cn)("block w-full resize-none bg-transparent text-white outline-none scrollbar scrollbar-track-gray-900 scrollbar-thumb-gray-400 placeholder:text-gray-200",e.className)})),aE=e=>{let{children:t}=e;return(0,h.jsx)("div",{className:"flex items-center justify-between",children:t})},aA=e=>{let{children:t}=e;return(0,h.jsx)("div",{className:"min-h-[268px] flex h-full w-full flex-col justify-between gap-4 rounded-lg bg-lowest-emphasis outline-none transition-colors focus-within:border-gray-300 md:border md:border-gray-500 md:p-6",children:t})},ak=e=>{let{ref:t,...a}=e,i=(0,r.useRef)(null),n=t??i;return(0,r.useLayoutEffect)(()=>{var e;let t=n.current;if(!t)return;if((null==(e=a.value)?void 0:e.toString().length)===0){t.style.height="auto";return}t.style.height="auto";let r=Math.min(t.scrollHeight,242);t.style.height=`${r}px`,t.scrollHeight>242?t.style.overflowY="auto":t.style.overflowY="hidden"},[n,a.value]),(0,h.jsxs)("div",{className:"relative w-full",children:[(0,h.jsx)(aI,{...a,ref:n,className:(0,j.cn)("min-h-[78px] max-h-[242px] resize-y relative [&::-webkit-resizer]:opacity-0",a.className)}),(0,h.jsx)("div",{className:"absolute right-0 bottom-0 w-4 h-4 flex items-center justify-center opacity-50 pointer-events-none z-10",children:(0,h.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,h.jsx)("path",{d:"M14 10L10 14M14 6L6 14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})})]})};var aN=a(28473),aS=a(7703);let aM=e=>{let{children:t,disabled:a,cost:r,onClick:i,isLoading:s,fullWidth:l}=e;return(0,h.jsx)(aN.o,{children:(0,h.jsx)(aS.x,{transition:{layout:{type:"tween",ease:"circOut",duration:.15}},children:(0,h.jsx)("button",{type:"button",onClick:i,disabled:a,className:(0,j.cn)("focus-ring h-11 rounded-lg px-4 py-3 font-bold text-black transition-colors overflow-hidden bg-accent hover:bg-yellow-500",l?"w-full":""),children:(0,h.jsxs)("span",{className:"flex justify-center text-lg leading-none",children:[t,(0,h.jsx)(n.N,{initial:!1,mode:"wait",children:(0,h.jsx)(o.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s?(0,h.jsxs)("div",{className:"ml-2 flex w-10 justify-center",children:[(0,h.jsx)(er.A,{size:"16px",variant:"determinate",thickness:6,value:100,sx:e=>({color:e.palette.grey[600]})}),(0,h.jsx)(er.A,{size:"16px",thickness:6,sx:e=>({position:"absolute",color:e.palette.grey[200],[`& .${ei.A.circle}`]:{strokeLinecap:"round"}})})]}):(0,h.jsxs)("span",{className:"inline-flex items-center gap-0.5 pl-1.5",children:[r,(0,h.jsx)(tX.v,{})]})},s?"loading":"cost")})]})})})})},aO=e=>{let{children:t}=e;return(0,h.jsx)("div",{children:t})},aL=e=>{let{children:t}=e;return(0,h.jsx)("div",{children:t})};var aP=a(63277),aR=a(83825);let aG=e=>{let{children:t}=e;return(0,h.jsx)("div",{className:"flex h-5 gap-2",children:(0,h.jsx)(n.N,{children:t})})},aB=e=>(0,h.jsx)(o.P.div,{className:"flex flex-row items-start md:items-center gap-1",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},...e}),aU=e=>(0,h.jsx)(o.P.p,{className:"text-sm text-white",...e}),aF=()=>(0,h.jsx)("svg",{width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mt-1 md:mt-0",children:(0,h.jsx)("path",{d:"M7.5 4.5V7M7.5 9.5H7.50625M13.75 7C13.75 10.4518 10.9518 13.25 7.5 13.25C4.04822 13.25 1.25 10.4518 1.25 7C1.25 3.54822 4.04822 0.75 7.5 0.75C10.9518 0.75 13.75 3.54822 13.75 7Z",stroke:"#F2F2F2",strokeWidth:"0.9375",strokeLinecap:"round",strokeLinejoin:"round"})}),a$=e=>(0,h.jsx)(o.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:(0,h.jsx)(f.default,{role:"alert",variant:"body-medium-short",className:"text-error",...e})}),aD=()=>{let{t:e}=(0,u.Bd)("visual-ai");return(0,h.jsx)(a$,{"aria-label":e("prompt.rateLimitError"),children:e("prompt.rateLimitError")})},aV=()=>{let{t:e}=(0,u.Bd)("visual-ai");return(0,h.jsx)(a$,{"aria-label":e("prompt.serverError"),children:e("prompt.serverError")})},aX=()=>{let{t:e}=(0,u.Bd)("visual-ai");return(0,h.jsx)(a$,{"aria-label":e("prompt.emptyImagePromptError"),children:e("prompt.emptyImagePromptError")})},aW=()=>{let{t:e}=(0,u.Bd)("visual-ai");return(0,h.jsx)(a$,{"aria-label":e("prompt.emptyVideoPromptError"),children:e("prompt.emptyVideoPromptError")})},az=()=>{let{t:e}=(0,u.Bd)("visual-ai");return(0,h.jsx)(a$,{"aria-label":e("prompt.emptyImageToImagePromptError"),children:e("prompt.emptyImageToImagePromptError")})},aK=()=>{let{t:e}=(0,u.Bd)("visual-ai");return(0,h.jsx)(a$,{"aria-label":e("prompt.emptyVideoPromptWithSuggestedPromptError"),children:e("prompt.emptyVideoPromptWithSuggestedPromptError")})},aH=()=>{let{t:e}=(0,u.Bd)("visual-ai");return(0,h.jsx)(a$,{"aria-label":e("prompt.inappropriatePromptError"),children:e("prompt.inappropriatePromptError")})},aY=()=>{let{t:e}=(0,u.Bd)("visual-ai");return(0,h.jsx)(a$,{"aria-label":e("prompt.noSelectedImageError"),children:e("prompt.noSelectedImageError")})},aJ=()=>{let{t:e}=(0,u.Bd)("visual-ai");return(0,h.jsx)(a$,{"aria-label":e("prompt.serviceUnavailableError"),children:e("prompt.serviceUnavailableError")})},aQ=()=>{let{t:e}=(0,u.Bd)("visual-ai");return(0,h.jsxs)(aB,{children:[(0,h.jsx)(aF,{}),(0,h.jsx)(aU,{"aria-label":e("prompt.promptWasRestored"),children:e("prompt.promptWasRestored")})]})},aq=()=>{let{t:e}=(0,u.Bd)("visual-ai");return(0,h.jsxs)(aB,{children:[(0,h.jsx)(aF,{}),(0,h.jsx)(aU,{"aria-label":e("imageToVideo.lowResolutionWarning"),children:e("imageToVideo.lowResolutionWarning")})]})},aZ=()=>{let{t:e}=(0,u.Bd)("visual-ai");return(0,h.jsxs)(aB,{children:[(0,h.jsx)(aF,{}),(0,h.jsx)(aU,{"aria-label":e("prompt.soraImageToVideoWarning"),children:e("prompt.soraImageToVideoWarning")})]})},a0=e=>{let{handleJourneys:t,text:a,buttonText:r,keepText:i}=e;return(0,h.jsx)(o.P.div,{"data-testid":"IGPromptSubscribe",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:(0,h.jsxs)(f.default,{variant:"body-medium-short",component:"p",className:"text-yellow-500 hover:text-yellow-500",children:[a," ",(0,h.jsx)("span",{role:"button",className:"cursor-pointer font-medium underline hover:text-yellow-400",onClick:()=>t(r,ea.e.GENERATION_BOX),children:r})," ",i," "]})})};var a1=a(54940),a2=a(73978);let a5=e=>{let{handleJourneys:t,isImageGenAmount:a=0}=e,{t:i}=(0,u.Bd)("visual-ai"),{imageCreditsLeft:n,videoCreditsLeft:s}=(0,t4.Y)(),{nextRenewalDate:l}=(0,a1.Q3)(),{isSuite5m:d}=(0,R.f)(),{isAI4_992_500mCredits:c}=(0,aR.u)(),p=a>0,m=p?n:s,g=!d&&!c,x=(0,r.useMemo)(()=>m?p?`${i(a>1?"prompt.notEnoughCreditsForImagesWarning":"prompt.notEnoughCreditsForImageWarning")}${g?". ":""}`:`${i("prompt.notEnoughCreditsForVideoWarning")}${g?". ":""}`:`${i("prompt.outOfCreditsWarning")}${g?". ":""}`,[g,m,a,p]),y=(0,r.useMemo)(()=>g?i("prompt.getMoreCredits"):"",[g]),f=(0,r.useMemo)(()=>l&&0===m&&!g?`${i("credits.tooltip.creditsRemaining.message")} ${(0,a2.rn)(l)}.`:g?` ${i("prompt.keepGenerating")}`:"",[m,l,g]);return(0,h.jsxs)(o.P.p,{"data-testid":"IGWarningExceedLimit",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:(0,j.cn)("text-sm",g?"text-yellow-500 hover:text-yellow-500":"text-error hover:text-error"),children:[x," ",(0,h.jsx)("span",{role:"button",className:"cursor-pointer font-medium underline hover:text-yellow-400",onClick:()=>t(y,ea.e.GENERATION_BOX),children:y})," ",f," "]})};var a4=a(48459);let a6=()=>((()=>{let{textToVideo:e,defaultModel:t}=(0,eB._M)(),{state:{modelGroupId:a},dispatch:i}=(0,tJ.CB)(),n=(0,r.useMemo)(()=>a&&e.find(e=>e.modelGroupId===a)?null:(0,a4.uK)(e,t),[a,e,t]);(0,r.useEffect)(()=>{n&&i({type:"defaultModelGroupChosen",payload:n})},[n,i])})(),null);var a3=a(32139);let a7=()=>{let e=(0,i.usePathname)(),{modelSlug:t}=(0,i.useParams)(),{push:a}=(0,i.useRouter)();return(0,r.useCallback)((r,i)=>{let n=(e=>{let{baseFeature:t,pathname:a,modelSlug:r}=e;return(0,s.YW)(r).with(s.P.string,e=>a.split(e)[1]??"").with(void 0,()=>a.split(t)[1]??"").exhaustive()})({baseFeature:(0,Z.A)(e),modelSlug:t,pathname:e});a(`${r}${i}${n}`,{scroll:!1})},[t,e,a])};var a9=a(2716),a8=a(12488),re=a(18838);let rt=e=>{let{variant:t,isChecked:a,supportedModels:i,audioIncluded:n,modelGroupName:o,clickSource:l,onToggle:d}=e,{trackImageGenEvent:c}=(0,m.W)(),u=(0,r.useMemo)(()=>i.some(e=>e.supportsAudio),[i]);return(0,s.YW)({doesModelGroupSupportAudio:u,audioIncluded:n}).with({doesModelGroupSupportAudio:!1},()=>null).with({audioIncluded:"text"},()=>(0,h.jsx)(ra,{})).with({audioIncluded:"toggle"},()=>(0,h.jsx)(rr,{variant:t,isChecked:a,onChange:(e,t)=>{t?c({name:"checkbox on",checkbox_text:"Audio",click_source:l,gen_AI_tier:o}):c({name:"checkbox off",checkbox_text:"Audio",click_source:l,gen_AI_tier:o}),d()}})).exhaustive()},ra=()=>{let{t:e}=(0,u.Bd)("visual-ai");return(0,h.jsx)("span",{className:"px-3 py-2.5 text-gray-100 typography-title-small flex justify-center items-center",children:e("prompt.video.includesAudio")})},rr=e=>{let{variant:t,isChecked:a,onChange:r}=e,{t:i}=(0,u.Bd)("visual-ai"),n=i("prompt.video.audio");return(0,h.jsx)(a8.A,{sx:{marginLeft:0,display:"flex",gap:1,..."mobile"===t?{marginRight:0}:{}},control:(0,h.jsx)(re.d,{checked:a,onChange:r}),label:"desktop"===t?n:(0,h.jsx)(f.default,{variant:"body-medium-long",sx:{color:e=>e.palette.grey[100]},children:n})})},ri=Object.assign(e=>(0,h.jsx)(tN.Do,{ariaLabelPrefix:"duration",renderValue:e=>(0,h.jsx)("span",{className:"pr-2 normal-case",children:`${e} sec`}),...e}),{MenuItem:tN.rK,NotAllowedMenuItem:tN.sN,ListSubheader:tN.gU}),rn=Object.assign(e=>(0,h.jsx)(tN.Do,{ariaLabelPrefix:"resolution",renderValue:e=>(0,h.jsx)("span",{className:"pr-2",children:(0,a3.I)(e).short}),...e}),{MenuItem:tN.rK,NotAllowedMenuItem:tN.sN,ListSubheader:tN.gU}),rs=e=>{let{value:t,onChange:a,onOpen:i,...n}=e,s=(0,eB._M)(),o=(0,r.useMemo)(()=>{if(!t)return(0,a4.uK)(s.textToVideo);let e=s.textToVideo.find(e=>e.modelGroupId===t);return e||(0,a4.uK)(s.textToVideo)},[s.textToVideo,t]),l=(0,r.useCallback)(e=>{let{value:t}=e.target;"string"!=typeof t&&a({newModelGroup:t,previousModelGroup:o})},[a,o]);return o?(0,h.jsx)(tG,{value:o,onChange:l,onOpen:()=>{i(o)},...n,children:s.textToVideo.map(e=>{let t=(null==o?void 0:o.modelGroupId)===e.modelGroupId;return(0,h.jsx)(tG.MenuItem,{value:e,children:(0,h.jsxs)(tG.MenuItemContainer,{children:[(0,h.jsxs)(tG.MenuItemNameOuterContainer,{children:[(0,h.jsxs)(tG.MenuItemNameInnerContainer,{children:[(0,h.jsxs)(tG.MenuItemName,{children:[e.modelGroupIcon&&(0,h.jsx)(tG.IconImage,{src:e.modelGroupIcon,alt:`${e.name} icon`}),(0,tI.f)(e.name)]}),e.isNew&&(0,h.jsx)(tG.NewTag,{children:"New"})]}),t&&(0,h.jsx)(tG.MenuItemCheckIcon,{})]}),(0,h.jsx)(tG.MenuItemDescription,{children:e.description})]})},e.modelGroupId)})}):null},ro=e=>{let{modelGroup:t}=e,{trackImageGenEvent:a}=(0,m.W)(),i=a7(),{isVisitor:n,isTrial:s}=(0,R.f)(),{isVideoPaidEnabled:o}=(0,t4.Y)(),{handleJourneys:l,handleUpgradeJourneys:d}=(0,t4.f)(),{dispatch:c,state:{duration:u,resolution:p,modelGroupId:g,aspectRatio:x,enableAudio:y}}=(0,tJ.CB)(),f=!n&&!s,j="kling 1.6"===t.name.toLowerCase()&&(n||s),v=(0,r.useMemo)(()=>t.supportedModels[0]?t.supportedModels[0].supportedAspectRatios:[],[t.supportedModels]);return(0,r.useEffect)(()=>{j&&"FULL_HD"===p&&c({type:"resolutionChosen",payload:"HD"})},[j,p,c]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rs,{value:g||null,onChange:e=>{let{newModelGroup:t,previousModelGroup:r}=e;a({name:"gen AI model switched",new_value:t.name,old_value:(null==r?void 0:r.name)||null,generate_type:"text to video"}),i(S.JZ.textToVideoAi,t.urlSlug)},onOpen:e=>{a({name:"button clicked",button_name:"gen ai models",gen_AI_tier:(null==e?void 0:e.name)??"unknown"})}}),v.length?(0,h.jsx)(a9.K,{onOpen:()=>{a({name:"button clicked",button_name:"aspect ratio dropdown",click_source:"text to video text box",component:eL.$.SETTINGS_TEXT_BOX})},onChange:e=>{let{target:{value:t}}=e;a({name:"button clicked",button_name:(0,tv.PR)(t),click_source:"text to video text box",component:eL.$.SETTINGS_TEXT_BOX}),c({type:"aspectRatioChosen",payload:t})},value:x??void 0,children:v.map(e=>(0,h.jsxs)(a9.K.MenuItem,{value:e,children:[(0,h.jsx)(a9.K.AspectRatioIcon,{aspectRatio:e}),(0,tl.Ti)(e)]},e))}):null,(0,h.jsxs)(ri,{onOpen:()=>{a({name:eL.$.BUTTON_CLICKED,button_name:"duration",click_source:eL.$.TEXT_TO_VIDEO_TEXT_BOX,component:eL.$.SETTINGS_TEXT_BOX,gen_AI_tier:t.name})},onChange:e=>{let{target:{value:r}}=e;a({name:eL.$.BUTTON_CLICKED,button_name:Number(r),click_source:eL.$.TEXT_TO_VIDEO_TEXT_BOX,component:eL.$.SETTINGS_TEXT_BOX,gen_AI_tier:t.name}),c({type:"durationChosen",payload:r})},value:u,children:[(0,h.jsx)(ri.ListSubheader,{children:"Duration"}),(0,a4.Rg)(t).map(e=>(0,h.jsxs)(ri.MenuItem,{value:e,children:[e," Seconds"]},e))]}),(0,h.jsxs)(rn,{onOpen:()=>{a({name:eL.$.BUTTON_CLICKED,button_name:"resolution",click_source:eL.$.TEXT_TO_VIDEO_TEXT_BOX,component:eL.$.SETTINGS_TEXT_BOX,gen_AI_tier:t.name})},onChange:e=>{let{target:{value:r}}=e;a({name:eL.$.BUTTON_CLICKED,button_name:(0,tv.vO)(r),click_source:eL.$.TEXT_TO_VIDEO_TEXT_BOX,component:eL.$.SETTINGS_TEXT_BOX,gen_AI_tier:t.name}),j&&"FULL_HD"===r||c({type:"resolutionChosen",payload:r})},value:p,children:[(0,h.jsx)(rn.ListSubheader,{children:"Resolution"}),(0,a4.xb)(t).filter(e=>!j||"FULL_HD"!==e).map(e=>(0,h.jsx)(rn.MenuItem,{value:e,children:(0,a3.I)(e).long},e)),j&&(0,h.jsx)(rn.NotAllowedMenuItem,{onClick:()=>{f?d(o,"upgrade",ea.e.DESKTOP_RESOLUTION_SELECT):l("subscribe",ea.e.DESKTOP_RESOLUTION_SELECT)},text:f?"Upgrade":"Subscribe",value:"FULL_HD",children:(0,a3.I)("FULL_HD").long})]}),(0,h.jsx)(rt,{variant:"desktop",isChecked:y,modelGroupName:t.name,supportedModels:t.supportedModels,audioIncluded:t.audioIncluded,clickSource:"text to video text box",onToggle:()=>c({type:"audioToggled"})})]})},rl=()=>(0,h.jsxs)(aN.o,{children:[(0,h.jsx)(aw.A,{style:{width:"120px",height:"44px",borderRadius:"9px",overflow:"hidden"}}),(0,h.jsx)(aw.A,{style:{width:"152px",height:"44px",borderRadius:"9px",overflow:"hidden"}}),(0,h.jsx)(aw.A,{style:{width:"164px",height:"44px",borderRadius:"9px",overflow:"hidden"}})]}),rd=()=>{let{state:{modelGroupId:e}}=(0,tJ.CB)(),t=(0,eB._M)().textToVideo.find(t=>t.modelGroupId===e);return t?(0,h.jsx)(ro,{modelGroup:t}):(0,h.jsx)(rl,{})},rc=e=>{let{cost:t,error:a,isAnimateButtonLoading:r,handleGeneration:i,handleUpgradeJourneys:n,handleJourneys:o}=e,l=(0,eB._M)(),{trackImageGenEvent:c}=(0,m.W)(),{t:p}=(0,u.Bd)("visual-ai"),{dispatch:g,state:{duration:x,resolution:y,prompt:f,modelGroupId:j}}=(0,tJ.CB)(),{isVisitor:v,isTrial:b,isSuite5m:w}=(0,R.f)(),{isAI4_992_500mCredits:_}=(0,aR.u)(),{tierModels:C,videoCreditsLeft:T,isVideoPaidEnabled:I,videoFreeGenerations:E,isLoading:A}=(0,t4.Y)(),k=null===a&&!r,N=!w&&!_,S=T<(t||1)&&!v&&!b&&I,M=C.some(e=>e.toLowerCase().includes("veo 3")||e.toLowerCase().includes("veo3")),O=l.textToVideo.find(e=>e.modelGroupId===j),L=(null==O?void 0:O.name.toLowerCase())==="kling 1.6",P=!A&&!S&&!v&&!b&&E<=0&&(T<(t??0)||0===T),G=!A&&!S&&(v||b)&&E<=0&&(T<(t??0)||0===T),B=()=>v&&L||b&&E>0&&L?{text:"Generate for Free",cost:null}:v||b?{text:"Subscribe to Generate",cost:null}:M?{text:"Generate",cost:t}:E>0&&L?{text:"Generate for Free",cost:null}:{text:"Upgrade to Generate",cost:null};return(0,h.jsxs)(aA,{children:[(0,h.jsx)(a_,{children:(0,h.jsxs)(d.A,{gap:1.5,direction:"row",alignItems:"center",children:[(0,h.jsx)(aP.PromptModeToggle,{}),(0,h.jsxs)(ab,{children:[(0,h.jsx)(ab.TextToVideoTab,{}),(0,h.jsx)(ab.ImageToVideoTab,{})]})]})}),(0,h.jsxs)(aC,{children:[(0,h.jsx)(ak,{placeholder:"Describe the video you want to create",name:"prompt","aria-label":"prompt text",rows:2,autoFocus:!0,value:f,onChange:e=>{let t=0===f.length&&1===e.target.value.length,a=f.length>1&&1===e.target.value.length;(t||a)&&c({name:eL.$.START_FREE_TEXT_TYPE,gen_AI_tier:(0,eB.Gl)(j,l.textToVideo),click_source:eL.$.TEXT_TO_VIDEO_TEXT_BOX,resolution:(0,tv.vO)(y),duration:(0,tv.dt)(x),is_pasted:!1}),g({type:"promptUpdated",payload:e.target.value})},onPaste:()=>{0===f.length&&c({name:eL.$.START_FREE_TEXT_TYPE,click_source:eL.$.TEXT_TO_VIDEO_TEXT_BOX,resolution:(0,tv.vO)(y),duration:(0,tv.dt)(x),is_pasted:!0,gen_AI_tier:(0,eB.Gl)(j,l.textToVideo)})},className:"min-h-[122px]"}),(0,h.jsx)(aG,{children:(0,s.YW)({error:a,shouldShowExceededCreditsLimit:S,shouldShowUpgrade:P,shouldShowSubscribe:G}).with({shouldShowExceededCreditsLimit:!0},()=>(0,h.jsx)(a5,{handleJourneys:N?n:()=>{}})).with({shouldShowUpgrade:!0},()=>(0,h.jsx)(a0,{buttonText:p("prompt.upgradeNow"),text:p("prompt.creditsLimitReachedVideos"),keepText:p("prompt.moreCreditsVideo"),handleJourneys:n})).with({shouldShowSubscribe:!0},()=>(0,h.jsx)(a0,{buttonText:p("prompt.subscribeNow"),text:p("prompt.limitReached"),keepText:p("prompt.moreCredits"),handleJourneys:o})).with({error:s.P.instanceOf(t3.gN)},e=>{let{error:t}=e;return(0,h.jsx)(a$,{"aria-label":t.message,children:t.message})}).with({error:s.P.instanceOf(t3.OE)},()=>(0,h.jsx)(aD,{})).with({error:s.P.instanceOf(t3.AA)},()=>(0,h.jsx)(aW,{})).with({error:s.P.instanceOf(t3.o1)},()=>(0,h.jsx)(aV,{})).with({error:s.P.instanceOf(t3.bg)},()=>(0,h.jsx)(aH,{})).otherwise(()=>null)})]}),(0,h.jsxs)(aE,{children:[(0,h.jsx)(aL,{children:(0,h.jsxs)("menu",{className:"flex gap-3 items-center",children:[(0,h.jsx)(a6,{}),(0,h.jsx)(rd,{})]})}),(0,h.jsx)(aO,{children:(0,h.jsx)(aM,{onClick:i,isLoading:r,cost:B().cost,disabled:!k,children:B().text})})]})]})},ru=e=>{let{children:t,disabled:a,onClick:r}=e;return(0,h.jsx)("button",{type:"button",onClick:r,disabled:a,className:"focus-ring rounded-lg px-1 py-2.5 font-bold text-black transition-colors bg-accent",children:(0,h.jsx)("span",{className:"flex text-base leading-none justify-center",children:(0,h.jsxs)("span",{className:"inline-flex h-6 items-center gap-1",children:[(0,h.jsx)("span",{className:"inline-flex",children:t}),(0,h.jsx)(tX.v,{})]})})})};var rp=a(97517),rm=a(87842),rg=a(901),rh=a(91608),rx=a(87456),ry=a(97509),rf=a(24990),rj=a(52367),rv=a(96240);let rb=(0,rv.eU)(!1),rw=(0,rv.eU)("firstFrame"),r_="generate-section-mobile-popup",rC=()=>{let[e,t]=(0,t2.K)(),[a,i]=(0,rh.fp)(rb),{applyUnscrollableStyleToBody:n,restoreScrollableStyleToBody:s}=(0,rj.C)(),[o,l]=(0,rx.l)();return(0,r.useEffect)(()=>(e&&n(),()=>{s()}),[e]),(0,r.useEffect)(()=>{var e;let t=()=>{var e;let t=null==(e=window.visualViewport)?void 0:e.height;t&&o.current&&l(o.current,{height:t},{duration:.2,type:"spring",bounce:0})};return null==(e=window.visualViewport)||e.addEventListener("resize",t),()=>{var e;null==(e=window.visualViewport)||e.removeEventListener("resize",t)}},[l,o]),(0,h.jsx)(rm.A,{keepMounted:!0,disableEnforceFocus:!0,closeAfterTransition:!0,open:e,sx:e=>({[`& .${rg.A.backdrop}`]:{backgroundColor:e.palette.grey[950]}}),children:(0,h.jsx)(rp.A,{in:e,children:(0,h.jsxs)("div",{role:"dialog",ref:o,style:{height:"calc(100dvh - 48px)"},className:"scrollbar scrollbar-track-gray-900 scrollbar-thumb-gray-400 flex flex-col",children:[(0,h.jsx)("div",{className:"flex flex-row-reverse pt-3 pb-3 pr-3.5",children:(0,h.jsx)("button",{type:"button",onClick:()=>{a?i(!1):t(!1)},children:(0,h.jsx)(eo.g,{icon:es.yY,size:"lg",className:"text-white"})})}),(0,h.jsx)("div",{className:"flex h-full w-full flex-col px-5 pb-3.5 gap-4",id:r_})]})})})},rT=e=>{let{children:t}=e;if(rf.S$)return null;let a=document.getElementById(r_);return a?(0,h.jsx)(h.Fragment,{children:(0,ry.createPortal)(t,a)}):null},rI=e=>{let{children:t}=e;return(0,h.jsx)("div",{"data-testid":"MobilePromptContent",className:"flex flex-1 flex-col gap-6 h-full",children:t})},rE=e=>{let{children:t}=e;return(0,h.jsx)("div",{className:"relative shrink-0 overflow-hidden h-22 w-22 rounded",children:t})},rA=e=>{let{children:t}=e;return(0,h.jsx)("div",{className:"relative shrink-0 h-22 w-22 rounded",children:t})},rk=e=>{let{children:t}=e;return(0,h.jsx)("div",{className:"flex flex-col",children:(0,h.jsx)("div",{className:"flex flex-col justify-between lg:gap-6 gap-2",children:t})})},rN=e=>{let{children:t}=e;return(0,h.jsx)("div",{className:"flex items-center gap-2.5",children:t})},rS=e=>{let{children:t}=e;return(0,h.jsx)("div",{className:"h-full relative flex flex-col",children:t})},rM=e=>{let{placeholder:t,canGenerate:a,handleGenerate:r,cost:i,children:n,shouldShowCost:s,isGenerateFromImageMode:o=!1,promptTabs:l,suggestedPromptHeading:d,prompt:c,sources:p=[],buttonText:m}=e,{t:g}=(0,u.Bd)("visual-ai"),[,x]=(0,t2.K)(),y=()=>{x(!0)},f=p.length>1&&"none"!==p[0].type,j=o&&c.length<1&&!f;return(0,h.jsxs)("div",{className:"flex flex-col gap-4 pt-2",children:[l,(0,h.jsx)("div",{className:"flex gap-3 h-21",children:(0,h.jsx)("div",{className:"flex w-full gap-2 rounded-lg py-3 outline-none",children:j?(0,h.jsxs)("button",{className:"flex flex-col gap-1 w-full justify-center items-center text-low-emphasis",onClick:y,type:"button",children:[(0,h.jsx)(b,{}),(0,h.jsx)("h3",{children:g("prompt.imageToImage.uploadImageMobileWrapper")})]}):(0,h.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[d,(0,h.jsx)("textarea",{placeholder:t,className:"text-ellipsis bg-transparent text-white outline-none placeholder:text-gray-200",value:c,readOnly:!0,onMouseDown:y,onTouchStart:y})]})})}),(0,h.jsx)(ru,{onClick:r,disabled:!a,children:(0,h.jsx)("div",{className:"flex gap-1.5",children:m||(s?(0,h.jsxs)(h.Fragment,{children:[g("prompt.generate")," ",(0,h.jsx)("span",{children:i})]}):g("prompt.generateForFree"))})}),(0,h.jsxs)(rT,{children:[(0,h.jsx)(aP.PromptModeToggle,{}),n]})]})},rO=e=>e>0,rL=e=>{let{disabled:t,onClick:a,cost:i,isLoading:n,isVisitor:o,isTrial:l,hasVeo3Access:d}=e,{t:c}=(0,u.Bd)("visual-ai"),{videoFreeGenerations:p}=(0,t4.Y)(),m=(0,eB._M)(),{state:g}=(0,tJ.CB)(),x=m.textToVideo.find(e=>e.modelGroupId===g.modelGroupId),y=(null==x?void 0:x.name.toLowerCase())==="kling 1.6",f=(0,r.useMemo)(()=>(0,s.YW)({isVisitor:o,isTrial:l,hasVeo3Access:d,videoFreeGenerations:p,isKling16Selected:y}).with({isVisitor:!0,isKling16Selected:!0},()=>({cost:null,text:"Generate for Free"})).with({isTrial:!0,videoFreeGenerations:s.P.when(rO),isKling16Selected:!0},()=>({cost:null,text:"Generate for Free"})).with({isVisitor:!0},()=>({cost:null,text:"Subscribe to Generate"})).with({isTrial:!0},()=>({cost:null,text:"Subscribe to Generate"})).with({isVisitor:!1,isTrial:!1,hasVeo3Access:!1,videoFreeGenerations:s.P.when(rO),isKling16Selected:!0},()=>({cost:null,text:"Generate for Free"})).with({isVisitor:!1,isTrial:!1,hasVeo3Access:!1},()=>({cost:null,text:"Upgrade to Generate"})).with({isVisitor:!1,isTrial:!1,hasVeo3Access:!0},()=>({cost:i,text:c("prompt.generate")})).exhaustive(),[o,l,d,i,c,p,y]);return(0,h.jsx)(aM,{fullWidth:!0,cost:f.cost,disabled:t,onClick:a,isLoading:n,children:f.text})};var rP=a(35799),rR=a(75378),rG=a(93443),rB=a(12375),rU=a(21317);let rF=Object.assign(e=>{let{anchorElement:t,isOpen:a,children:r,menuClassName:i,onClose:n}=e;return(0,h.jsx)(rU.W,{anchorElement:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},isOpen:a,onClose:n,drawerStyle:{zIndex:0xe8d4a50fff},isDrawer:!0,menuClassName:(0,j.cn)("w-80",i),transformOrigin:{vertical:-10,horizontal:"left"},children:r})},{Anchor:tC.A,Button:e=>{let{children:t,onClick:a,...r}=e;return(0,h.jsx)("button",{type:"button",className:"flex h-11 items-center justify-between gap-2 rounded-lg bg-gray-400 px-3 py-2 text-base text-white",onClick:a,"aria-label":"settings menu","aria-haspopup":"menu","data-testid":"settings-button",...r,children:t})},ButtonText:e=>{let{children:t}=e;return(0,h.jsx)("span",{className:"flex items-center gap-2",children:t})},MenuContainer:e=>{let{children:t,onClickAway:a}=e;return(0,h.jsx)(rB.x,{onClickAway:a,children:(0,h.jsx)("div",{className:"overflow-auto scrollbar-thin scrollbar-track-gray-600 scrollbar-thumb-gray-400",children:t})})},MenuItem:e=>{let{children:t,onClick:a,value:r}=e;return(0,h.jsx)(rU.W.MenuItem,{value:r,onClick:a,className:"flex items-center justify-between p-4","data-testid":`${r}-menu-item`,children:t})},MenuItemText:e=>{let{children:t}=e;return(0,h.jsx)("span",{className:"text-white inline-flex gap-4 items-center",children:t})},MenuItemChevron:()=>(0,h.jsx)("span",{className:"text-gray-300",children:(0,h.jsx)(eo.g,{icon:rG.Xk})}),BackButton:e=>{let{children:t,onClick:a}=e;return(0,h.jsxs)(rU.W.MenuItem,{value:"back",onClick:a,className:"flex items-center gap-3 p-4 border-b border-gray-500",children:[(0,h.jsx)("span",{className:"text-gray-300",children:(0,h.jsx)(eo.g,{icon:rR.Wz})}),(0,h.jsx)("span",{className:"text-white",children:t})]})},SettingsIcon:()=>(0,h.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("path",{d:"M1 4C0.4375 4 0 3.5625 0 3C0 2.46875 0.4375 2 1 2H6V4H1ZM1 9C0.4375 9 0 8.5625 0 8C0 7.46875 0.4375 7 1 7H10V9H1ZM15 7C15.5312 7 16 7.46875 16 8C16 8.5625 15.5312 9 15 9H13C13 9.03125 13 9.03125 13 9.03125V9.5C13 10.0625 12.5312 10.5 12 10.5C11.4375 10.5 11 10.0625 11 9.5V6.5C11 5.96875 11.4375 5.5 12 5.5C12.5312 5.5 13 5.96875 13 6.5V7H15ZM0 13C0 12.4688 0.4375 12 1 12H3V14H1C0.4375 14 0 13.5625 0 13ZM15 12C15.5312 12 16 12.4688 16 13C16 13.5625 15.5312 14 15 14H6C6 14.0312 6 14.0312 6 14.0312V14.5C6 15.0625 5.53125 15.5 5 15.5C4.4375 15.5 4 15.0625 4 14.5V11.5C4 10.9688 4.4375 10.5 5 10.5C5.53125 10.5 6 10.9688 6 11.5V12H15ZM8 5.5C7.4375 5.5 7 5.0625 7 4.5V1.5C7 0.96875 7.4375 0.5 8 0.5C8.53125 0.5 9 0.96875 9 1.5V2H15C15.5312 2 16 2.46875 16 3C16 3.5625 15.5312 4 15 4H9C9 4.03125 9 4.03125 9 4.03125V4.5C9 5.0625 8.53125 5.5 8 5.5Z",fill:"white"})})});var r$=a(1494),rD=a(38564);let rV=()=>(0,rD.u)(r$.q.visualAiMobile),rX=(e,t)=>(0,s.YW)(t).with({type:"menuOpened"},()=>({type:"open"})).with({type:"menuClosed"},()=>({type:"closed"})).with({type:"submenuActivated"},e=>{let{payload:t}=e;return{type:"submenuOpen",activeSubmenu:t}}).exhaustive(),rW=e=>(0,r.useReducer)(rX,e);var rz=a(9683),rK=a(98512);let rH=e=>{let{aspectRatio:t,setAspectRatio:a,options:r}=e;return(0,h.jsx)("div",{className:"overflow-auto scrollbar-thin scrollbar-track-gray-600 scrollbar-thumb-gray-400",children:r.map(e=>{let r=t===e;return(0,h.jsxs)(rU.W.MenuItem,{value:e,onClick:()=>a(e),selected:r,className:"flex justify-between",children:[(0,h.jsxs)("span",{className:"flex items-center gap-4",children:[(0,h.jsx)(rK.T,{aspectRatio:e}),(0,tl.Ti)(e)]}),r&&(0,h.jsx)(eo.g,{icon:rz.e6})]},e)})})},rY=e=>{let{duration:t,setDuration:a,options:r}=e;return(0,h.jsx)("div",{className:"overflow-auto scrollbar-thin scrollbar-track-gray-600 scrollbar-thumb-gray-400",children:r.map(e=>{let r=t===e;return(0,h.jsxs)(rU.W.MenuItem,{value:e,onClick:()=>a(e),selected:r,className:"flex justify-between",children:[(0,h.jsxs)("span",{className:"flex items-center gap-4",children:[e," seconds"]}),r&&(0,h.jsx)(eo.g,{icon:rz.e6})]},e)})})},rJ=e=>{let{modelGroupId:t,setModelGroup:a,modelGroups:r}=e;return(0,h.jsx)("ul",{className:"flex flex-col gap-2 p-4",children:r.map(e=>{let r=e.modelGroupId===t;return(0,h.jsx)(tG.MenuItem,{onClick:()=>a(e),value:e,selected:r,children:(0,h.jsxs)(tG.MenuItemContainer,{children:[(0,h.jsxs)(tG.MenuItemNameOuterContainer,{children:[(0,h.jsxs)(tG.MenuItemNameInnerContainer,{children:[(0,h.jsxs)(tG.MenuItemName,{children:[e.modelGroupIcon&&(0,h.jsx)(tG.IconImage,{src:e.modelGroupIcon,alt:`${e.name} icon`}),e.name]}),e.isNew&&(0,h.jsx)(tG.NewTag,{children:"New"})]}),r&&(0,h.jsx)(tG.MenuItemCheckIcon,{})]}),(0,h.jsx)(tG.MenuItemDescription,{children:e.description})]})},e.modelGroupId)})})},rQ=e=>{let{resolution:t,setResolution:a,options:r}=e;return(0,h.jsx)("div",{className:"overflow-auto scrollbar-thin scrollbar-track-gray-600 scrollbar-thumb-gray-400",children:r.map(e=>{let r=(0,s.YW)(e).with("HD",()=>"720p (HD)").with("FULL_HD",()=>"1080p (Full HD)").with("4K",()=>"2160p (4K)").otherwise(()=>e),i=t===e;return(0,h.jsxs)(rU.W.MenuItem,{value:e,onClick:()=>a(e),selected:i,className:"flex justify-between",children:[(0,h.jsx)("span",{className:"flex items-center gap-4",children:r}),i&&(0,h.jsx)(eo.g,{icon:rz.e6})]},e)})})},rq=e=>{let{modelGroup:t,modelGroups:a}=e,i=(0,r.useRef)(null),[n,o]=rW({type:"closed"}),{dispatch:l,state:c}=(0,tJ.CB)(),{trackImageGenEvent:g}=(0,m.W)(),{isFeatureEnabled:x}=rV(),{t:y}=(0,u.Bd)("visual-ai"),f=a7(),{isVisitor:j,isTrial:v}=(0,R.f)(),b="kling 1.6"===t.name.toLowerCase()&&(j||v);(0,r.useEffect)(()=>{b&&"FULL_HD"===c.resolution&&l({type:"resolutionChosen",payload:"HD"})},[b,c.resolution,l]);let w=()=>{o({type:"menuOpened"})},_=e=>{let r=a.find(e=>e.modelGroupId===t.modelGroupId);g({name:eL.$.MODEL_SWITCHED,new_value:e.name,old_value:(null==r?void 0:r.name)||null,generate_type:eL.$.TEXT_TO_VIDEO}),f(S.JZ.textToVideoAi,e.urlSlug)},C=(0,r.useMemo)(()=>t.supportedModels[0]?t.supportedModels[0].supportedAspectRatios:[],[t.supportedModels]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.Anchor,{ref:i,children:(0,h.jsxs)(rF.Button,{onClick:()=>{g(t7),o({type:"menuOpened"})},children:[(0,h.jsx)(rF.SettingsIcon,{}),(0,h.jsx)(rF.ButtonText,{children:x?(0,tI.f)(t.name):y("creation.settings")})]})}),(0,h.jsx)(rF,{anchorElement:i.current,isOpen:"open"===n.type||"submenuOpen"===n.type,children:(0,h.jsx)(rF.MenuContainer,{onClickAway:()=>o({type:"menuClosed"}),children:(0,s.YW)(n).with({type:"closed"},()=>null).with({type:"open"},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(rF.MenuItem,{value:"model-group",onClick:()=>{g({name:eL.$.BUTTON_CLICKED,button_name:"gen ai models",gen_AI_tier:t.name}),o({type:"submenuActivated",payload:"model-group"})},children:[(0,h.jsx)(d.A,{direction:"row",gap:1,children:(0,h.jsxs)(rF.MenuItemText,{children:[(0,tI.f)(t.name)," Model"]})}),(0,h.jsx)(rF.MenuItemChevron,{})]}),(0,h.jsxs)(rF.MenuItem,{value:"resolution",onClick:()=>{g({name:eL.$.BUTTON_CLICKED,button_name:"resolution",click_source:eL.$.TEXT_TO_VIDEO_TEXT_BOX,component:eL.$.SETTINGS_TEXT_BOX,gen_AI_tier:t.name}),o({type:"submenuActivated",payload:"resolution"})},children:[(0,h.jsx)(rF.MenuItemText,{children:(0,a3.I)(c.resolution).long}),(0,h.jsx)(rF.MenuItemChevron,{})]}),C.length?(0,h.jsxs)(rF.MenuItem,{value:"aspect ratio",onClick:()=>{g({name:eL.$.BUTTON_CLICKED,button_name:"aspect ratio dropdown",click_source:eL.$.TEXT_TO_VIDEO_TEXT_BOX,component:eL.$.SETTINGS_TEXT_BOX}),o({type:"submenuActivated",payload:"aspect ratio"})},children:[(0,h.jsx)(rF.MenuItemText,{children:(0,tl.Ti)(c.aspectRatio)}),(0,h.jsx)(rF.MenuItemChevron,{})]}):null,(0,h.jsxs)(rF.MenuItem,{value:"duration",onClick:()=>{g({name:eL.$.BUTTON_CLICKED,button_name:"duration",click_source:eL.$.TEXT_TO_VIDEO_TEXT_BOX,component:eL.$.SETTINGS_TEXT_BOX,gen_AI_tier:t.name}),o({type:"submenuActivated",payload:"duration"})},children:[(0,h.jsxs)(rF.MenuItemText,{children:[c.duration," Sec"]}),(0,h.jsx)(rF.MenuItemChevron,{})]})]})).with({type:"submenuOpen",activeSubmenu:"model-group"},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.MenuItem,{value:"back",onClick:w,children:(0,h.jsxs)(rF.MenuItemText,{children:[(0,h.jsx)(eo.g,{icon:rP.Ce})," Back to settings"]})}),(0,h.jsx)(rJ,{modelGroupId:t.modelGroupId,setModelGroup:_,modelGroups:a})]})).with({type:"submenuOpen",activeSubmenu:"resolution"},()=>{let e=(0,a4.xb)(t).filter(e=>!b||"FULL_HD"!==e);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.MenuItem,{value:"back",onClick:w,children:(0,h.jsxs)(rF.MenuItemText,{children:[(0,h.jsx)(eo.g,{icon:rP.Ce})," Back to settings"]})}),(0,h.jsx)(rQ,{resolution:c.resolution,setResolution:e=>l({type:"resolutionChosen",payload:e}),options:e})]})}).with({type:"submenuOpen",activeSubmenu:"duration"},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.MenuItem,{value:"back",onClick:w,children:(0,h.jsxs)(rF.MenuItemText,{children:[(0,h.jsx)(eo.g,{icon:rP.Ce})," Back to settings"]})}),(0,h.jsx)(rY,{duration:c.duration,setDuration:e=>l({type:"durationChosen",payload:e}),options:(0,a4.Rg)(t)})]})).with({type:"submenuOpen",activeSubmenu:"aspect ratio"},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.MenuItem,{value:"back",onClick:w,children:(0,h.jsxs)(rF.MenuItemText,{children:[(0,h.jsx)(eo.g,{icon:rP.Ce})," Back to settings"]})}),(0,h.jsx)(rH,{aspectRatio:c.aspectRatio??p.gl.LANDSCAPE_16X9,setAspectRatio:e=>l({type:"aspectRatioChosen",payload:e}),options:C})]})).exhaustive()})})]})},rZ=e=>{let{modelGroup:t,modelGroups:a}=e,{dispatch:r,state:{enableAudio:i}}=(0,tJ.CB)();return(0,h.jsxs)(d.A,{width:"100%",direction:"row",alignContent:"center",justifyContent:"space-between",children:[(0,h.jsx)(rq,{modelGroup:t,modelGroups:a}),(0,h.jsx)(rt,{variant:"mobile",isChecked:i,modelGroupName:t.name,supportedModels:t.supportedModels,audioIncluded:t.audioIncluded,clickSource:"text to video text box",onToggle:()=>r({type:"audioToggled"})})]})},r0=()=>(0,h.jsx)(aw.A,{style:{width:"106px",height:"44px",borderRadius:"9px",overflow:"hidden"}}),r1=()=>{let{state:{modelGroupId:e}}=(0,tJ.CB)(),t=(0,eB._M)();return(0,s.YW)({modelGroups:t.textToVideo,modelGroupId:e}).with({modelGroupId:s.P.nullish},()=>(0,h.jsx)(r0,{})).with({modelGroupId:s.P.nonNullable},e=>{let{modelGroups:t,modelGroupId:a}=e,r=t.find(e=>e.modelGroupId===a);return(0,h.jsx)(rZ,{modelGroup:r,modelGroups:t})}).exhaustive()},r2=e=>{let{cost:t,error:a,isAnimateButtonLoading:r,handleGeneration:i,handleUpgradeJourneys:n,handleJourneys:o}=e,l=(0,eB._M)(),{trackImageGenEvent:d}=(0,m.W)(),{t:c}=(0,u.Bd)("visual-ai"),{state:{prompt:p,resolution:g,duration:x,modelGroupId:y},dispatch:f}=(0,tJ.CB)(),{isVisitor:j,isTrial:v,isSuite5m:b}=(0,R.f)(),{isAI4_992_500mCredits:w}=(0,aR.u)(),{tierModels:_,videoCreditsLeft:C,isVideoPaidEnabled:T,videoFreeGenerations:I,isLoading:E}=(0,t4.Y)(),A=null===a&&!r,k=!b&&!w,N=C<(t||1)&&!j&&!v&&T,S=j||v,M=_.some(e=>e.toLowerCase().includes("veo 3")||e.toLowerCase().includes("veo3")),O=!S&&M,L=l.textToVideo.find(e=>e.modelGroupId===y),P=(null==L?void 0:L.name.toLowerCase())==="kling 1.6",G=!E&&!N&&!j&&!v&&I<=0&&(C<(t??0)||0===C),B=!E&&!N&&(j||v)&&I<=0&&(C<(t??0)||0===C);return(0,h.jsx)(rM,{placeholder:"Describe the video you want to create",canGenerate:A,handleGenerate:i,cost:t,shouldShowCost:O,promptTabs:(0,h.jsxs)(ab,{children:[(0,h.jsx)(ab.TextToVideoTab,{}),(0,h.jsx)(ab.ImageToVideoTab,{})]}),prompt:p,buttonText:j&&P||v&&I>0&&P?"Generate for Free":j||v?"Subscribe to Generate":M?void 0:I>0&&P?"Generate for Free":"Upgrade to Generate",children:(0,h.jsxs)(rI,{children:[(0,h.jsxs)(ab,{children:[(0,h.jsx)(ab.TextToVideoTab,{}),(0,h.jsx)(ab.ImageToVideoTab,{})]}),(0,h.jsxs)(rN,{children:[(0,h.jsx)(a6,{}),(0,h.jsx)(r1,{})]}),(0,h.jsxs)(rS,{children:[(0,h.jsx)(aI,{className:"flex-1",placeholder:"Describe the video you want to create",name:"prompt","aria-label":"prompt text",value:p,onChange:e=>{let t=0===p.length&&1===e.target.value.length,a=p.length>1&&1===e.target.value.length;(t||a)&&d({name:eL.$.START_FREE_TEXT_TYPE,gen_AI_tier:(0,eB.Gl)(y,l.textToVideo),click_source:eL.$.TEXT_TO_VIDEO_TEXT_BOX,resolution:(0,tv.vO)(g),duration:(0,tv.dt)(x),is_pasted:!1}),f({type:"promptUpdated",payload:e.target.value})},onPaste:()=>{0===p.length&&d({name:eL.$.START_FREE_TEXT_TYPE,click_source:eL.$.TEXT_TO_VIDEO_TEXT_BOX,resolution:(0,tv.vO)(g),duration:(0,tv.dt)(x),is_pasted:!0,gen_AI_tier:(0,eB.Gl)(y,l.textToVideo)})}}),(0,h.jsxs)(rk,{children:[(0,s.YW)({error:a,shouldShowExceededCreditsLimit:N,shouldShowUpgrade:G,shouldShowSubscribe:B}).with({shouldShowExceededCreditsLimit:!0},()=>(0,h.jsx)(a5,{handleJourneys:k?n:()=>{}})).with({shouldShowUpgrade:!0},()=>(0,h.jsx)(a0,{buttonText:c("prompt.upgrade"),text:c("prompt.creditsLimitReachedVideos"),keepText:c("prompt.moreCreditsVideo"),handleJourneys:n})).with({shouldShowSubscribe:!0},()=>(0,h.jsx)(a0,{buttonText:c("prompt.subscribeNow"),text:c("prompt.limitReached"),keepText:c("prompt.moreCredits"),handleJourneys:o})).with({error:s.P.instanceOf(t3.gN)},e=>{let{error:t}=e;return(0,h.jsx)(a$,{"aria-label":t.message,children:t.message})}).with({error:s.P.instanceOf(t3.OE)},()=>(0,h.jsx)(aD,{})).with({error:s.P.instanceOf(t3.AA)},()=>(0,h.jsx)(aW,{})).with({error:s.P.instanceOf(t3.o1)},()=>(0,h.jsx)(aV,{})).with({error:s.P.instanceOf(t3.bg)},()=>(0,h.jsx)(aH,{})).otherwise(()=>null),(0,h.jsx)(rL,{disabled:!A,onClick:i,cost:t,isLoading:r,isVisitor:!!j,isTrial:!!v,hasVeo3Access:M})]})]})]})})},r5=e=>{let{mutation:t}=e;return(e=>{let{state:t}=(0,tJ.CB)();(0,r.useEffect)(()=>{e.error&&e.reset()},[t])})(t),null};var r4=a(22875),r6=a(46425),r3=a(46739),r7=a.n(r3);let r9=/[^\p{L}\p{N}]+/gu;function r8(e){return r7()(e.split(r9)).length}let ie=()=>{var e;let t,a=(0,eB._M)(),{isBelowLG:n}=(0,t0.Qs)(),{state:o}=(0,tJ.CB)(),[l,d]=(0,r.useState)(!1),c=(()=>{let e=(0,eB._M)(),{trackImageGenEventWithCost:t}=(0,m.W)(),{t:a}=(0,u.Bd)("visual-ai"),r=(0,i.useRouter)(),n=(0,r4.useQueryClient)(),o=(0,i.useSearchParams)(),l=(0,$.useSession)(),d=(0,q.RZ)();return(0,B.useMutation)({mutationKey:["generate-video-from-text"],mutationFn:e=>{var t,a;let{cost:r,enableAudio:i,...n}=e;if(!(null!=(t=l.data)&&t.accessToken))throw eK.e$.error("No access token when trying to generate video.",{userId:null==(a=l.data)?void 0:a.user.id}),Error("No access token when trying to generate video.");if(n.prompt.length<1)throw new t3.AA;return(0,r6.KB)({...n,aspectRatio:n.aspectRatio??p.gl.LANDSCAPE_16X9,supportsAudio:i,generateType:"text to video"},{accessToken:l.data.accessToken})},onMutate:async a=>{let{cost:r,...i}=a;t({name:"button clicked",button_name:"animate",click_source:"image to video text box",gen_AI_tier:(0,eB.Gl)(i.modelGroupId,e.textToVideo),total_words:r8(i.prompt),resolution:(0,tv.vO)(i.resolution),duration:(0,tv.dt)(i.duration),is_valid:!0},r||0,"video")},onSuccess:async(a,i)=>{let{cost:s,...l}=i;t({name:"generate start",click_source:"text to video text box",gen_AI_tier:(0,eB.Gl)(l.modelGroupId,e.textToVideo),duration:(0,tv.dt)(l.duration),generate_id:a.generationId,resolution:(0,tv.vO)(l.resolution),total_words:r8(l.prompt),generate_type:"text to video",media_type:"video ai",is_audio_on:l.enableAudio},s||0,"video"),await n.invalidateQueries([eM.QN]),r.push(d(`/text-to-video-ai/creations?${o}`))},onError:(r,i)=>{let{cost:n,...o}=i;t({name:"button clicked",button_name:"animate",click_source:"text to video text box",gen_AI_tier:(0,eB.Gl)(o.modelGroupId,e.textToVideo),total_words:r8(o.prompt),resolution:(0,tv.vO)(o.resolution),duration:(0,tv.dt)(o.duration),is_valid:!1,message_text:(0,s.YW)(r).with(s.P.instanceOf(t3.OE),()=>a("prompt.rateLimitError")).with(s.P.instanceOf(t3.o1),()=>a("prompt.serverError")).with(s.P.instanceOf(t3.AA),()=>a("prompt.emptyVideoPromptError")).with(s.P.instanceOf(t3.bg),()=>a("prompt.inappropriatePromptError")).exhaustive()},n||0,"video")},onSettled:a1.gq})})(),{openPlanModal:g}=(0,tQ.A)(),{isVisitor:x,isTrial:y}=(0,R.f)(),{isPLJourney:f,isSQLJourney:j,isPLBFTJourney:v,isSQLBFTJourney:b}=(0,t1.T)(),{tierModels:w,isVideoPaidEnabled:_,videoCreditsLeft:C,videoFreeGenerations:T}=(0,t4.Y)(),{handleUpgradeJourneys:I,handleJourneys:E}=(0,t4.f)(),[,A]=(0,t2.K)(),{variation:k,dispatchExperimentStartedEvent:N}=(0,tZ.G)(),S=(t=a.textToVideo,(0,r.useMemo)(()=>{let e=o.modelGroupId?t.find(e=>e.modelGroupId===o.modelGroupId)??null:null;return(0,t6.KW)({state:o,modelGroup:e})},[o,t])),M=w.some(e=>e.toLowerCase().includes("veo 3")||e.toLowerCase().includes("veo3")),O=a.textToVideo.find(e=>e.modelGroupId===o.modelGroupId),L=(null==O?void 0:O.name.toLowerCase())==="kling 1.6",P=async()=>{if(x)return void E(L?"Generate for Free":"Subscribe to Generate","gen AI text-to-video generate button");if((y||f||j||v||b)&&!(L&&T>0)){t5.G.onTooltipClickOnSubscribe("Subscribe to Generate");let e="simplified"===k?tq.IM.aiSuiteSimple:tq.IM.suite;N(),g(e,"gen AI text-to-video generate button");return}y||M||L&&T>0?M&&C<(S||1)?I(!0,"Get More Credits","text-to-video generate button out of credits"):(c.mutate({duration:o.duration,resolution:o.resolution,prompt:o.prompt,enableAudio:o.enableAudio,aspectRatio:o.aspectRatio,modelGroupId:o.modelGroupId,cost:S},{onSuccess:()=>{A(!1)},onError:()=>{A(!0)}}),d(!0),await new Promise(e=>setTimeout(e,3e3)),d(!1)):I(!0,"Upgrade to Generate","text-to-video generate button")},G=(e=>{let{prompt:t,mutation:a,characterLimit:i}=e,{trackImageGenEvent:n}=(0,m.W)(),s=(0,r.useMemo)(()=>(e=>{let{prompt:t,mutation:a,characterLimit:r}=e,i=t.length;return r&&i>r?new t3.gN(i,r):a.error?a.error:null})({prompt:t,mutation:a,characterLimit:i}),[t,a,i]);return(0,r.useEffect)(()=>{s&&n({name:"error annotated",error_message:s.message,component:"text to video text box"})},[s,n]),s})({mutation:c,prompt:o.prompt,characterLimit:(null==(e=a.textToVideo.find(e=>e.modelGroupId===o.modelGroupId))?void 0:e.charLimit)??void 0});return(0,h.jsxs)("div",{className:"flex-1","aria-label":"Text to video generation prompt",children:[(0,h.jsx)(r5,{mutation:c}),n?(0,h.jsx)(r2,{handleGeneration:P,cost:S,error:G,isAnimateButtonLoading:l||c.isLoading,handleUpgradeJourneys:(e,t)=>I(_,e,t),handleJourneys:E}):(0,h.jsx)(rc,{handleGeneration:P,cost:S,error:G,isAnimateButtonLoading:l||c.isLoading,handleUpgradeJourneys:(e,t)=>I(_,e,t),handleJourneys:E})]})},it=()=>(0,rD.u)(r$.q.autoAspectRatio);var ia=a(59015);let ir=()=>(0,h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16",fill:"none",children:[(0,h.jsx)("path",{d:"M6.97559 0.264962C7.32633 -0.0870401 7.89639 -0.0886176 8.24853 0.262032L13.2085 5.20149C13.5598 5.55226 13.5603 6.1225 13.21 6.47443C13.0117 6.67315 12.7439 6.75496 12.4849 6.72932C12.4588 6.73158 12.4324 6.73811 12.4058 6.73811H0.899414C0.402761 6.73779 0.000216442 6.33537 0 5.83869C0 5.34183 0.402628 4.93959 0.899414 4.93928H10.3945L6.97705 1.53791C6.62499 1.18718 6.62492 0.617127 6.97559 0.264962Z",fill:"currentColor"}),(0,h.jsx)("path",{d:"M6.49789 15.349C6.14716 15.7011 5.57711 15.7026 5.22494 15.3519L0.264982 10.4125C-0.0866314 10.0617 -0.0870034 9.49154 0.263517 9.13953C0.4627 8.94031 0.731594 8.85778 0.991545 8.88464C1.01627 8.88261 1.04101 8.87732 1.06625 8.87732H12.5726C13.0696 8.87739 13.472 9.27972 13.472 9.77673C13.4717 10.2735 13.0694 10.6761 12.5726 10.6761H3.08041L6.49643 14.076C6.84824 14.4266 6.84787 14.9968 6.49789 15.349Z",fill:"currentColor"})]}),ii=()=>{let{dispatch:e,state:{prompt:t,suggestedPrompt:a}}=(0,eZ.Cm)(),{t:r}=(0,u.Bd)("visual-ai"),{trackImageGenEvent:i}=(0,m.W)(),n=(0,e3.M6)(),o=(0,eZ.cb)("firstFrame"),l=(0,eZ.cb)("lastFrame"),d="none"===o.type,p="none"===l.type,g=(0,e4.F)();return(0,h.jsx)(c.A,{title:r("prompt.imageToVideoFields.switchTooltip"),placement:"top",children:(0,h.jsx)("button",{type:"button","data-testid":"switch images button",disabled:d&&p,onClick:()=>{e({type:"imagesOrderSwitched"}),g&&a&&a===t&&(0,s.YW)({firstFrameSource:o,lastFrameSource:l}).with({lastFrameSource:{type:"none"}},e9.l).with({lastFrameSource:{type:s.P.union("asset","showcaseExample","url")},firstFrameSource:{type:s.P.union("asset","showcaseExample","url")}},e=>{let{lastFrameSource:t,firstFrameSource:a}=e;n({imageUrl:t.imageUrl,lastFrameImageUrl:a.imageUrl,styleId:t.styleId??""})}).with({lastFrameSource:{type:s.P.union("asset","showcaseExample","url")},firstFrameSource:{type:"none"}},e=>{let{lastFrameSource:t}=e;n({imageUrl:t.imageUrl,styleId:t.styleId??""})}).exhaustive(),i({name:"button clicked",button_name:"switch start / end frame",click_source:"image to video text box"})},className:"text-gray-100 disabled:text-gray-300",children:(0,h.jsx)(ir,{})})})};var is=a(88878);let io=()=>{let e,t,a,i;return e="authenticated"===(0,$.useSession)().status,t=(0,is.x)(),a=(0,eR.C$)(),i=(0,r.useRef)(e),(0,r.useEffect)(()=>{!e&&i.current&&(a({type:"imageReset"}),a({type:"promptReset"})),i.current=e},[e,t]),null},il=()=>((()=>{let{imageToImage:e,defaultModel:t}=(0,eB._M)(),[{modelGroupId:a},i]=(0,eR.Uy)(),{isFeatureEnabled:n}=it(),s=(0,r.useMemo)(()=>a&&e.find(e=>e.modelGroupId===a)?null:(0,a4.uK)(e,t),[t,e,a]);(0,r.useEffect)(()=>{s&&i({type:"modelGroupSelected",payload:{modelGroupId:s.modelGroupId,...n?{aspectRatio:p.gl.AUTO}:{}}})},[s,i,n])})(),null),id=e=>{let{mutation:t}=e,[a]=(0,eR.Uy)();return(0,r.useEffect)(()=>{t.error&&t.reset()},[a]),null},ic=(0,r.forwardRef)((e,t)=>(0,h.jsx)(o.P.div,{ref:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0",...e})),iu=e=>(0,h.jsx)(ew.J,{...e,imageClassName:"rounded lg:rounded-lg",className:"h-full w-full rounded lg:rounded-lg object-cover"}),ip=e=>{let{creation:t,onError:a}=e;return(0,h.jsx)(n.N,{mode:"popLayout",initial:!1,children:(0,h.jsx)(ic,{children:(0,h.jsx)(iu,{src:t.imageUrl,onError:a,alt:"Selected creation"})},t.id)})};var im=a(98787);let ig=(0,E.Ay)("div")(()=>({height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"})),ih=()=>(0,h.jsx)(aw.A,{className:"h-full w-full"}),ix=()=>(0,h.jsx)(ig,{role:"progressbar","aria-label":"Loading selected image",children:(0,h.jsx)(ih,{})}),iy=e=>{let{assetId:t}=e,{isLoading:a,data:r}=(0,im.h)(t);return a||!r?(0,h.jsx)(ix,{}):(0,h.jsx)(ip,{creation:{id:r.id,imageUrl:"succeeded"===r.status&&"generatedImage"===r.assetType?r.imageUrl:""}})};var ij=a(85012);let iv=e=>{let{assetId:t,styleId:a}=e,{isLoading:r,data:i}=(0,ij.p)(a);if(r||!i)return(0,h.jsx)(ix,{});let{showcases:n}=i,s=n&&n.find(e=>e.id===t);return s?(0,h.jsx)(ip,{creation:{id:s.id,imageUrl:s.imageUrl}}):(0,h.jsx)(ix,{})},ib=()=>(0,h.jsx)("div",{className:"bg-gray-800 text-gray-300 p-2 border-gray-500 border-solid border rounded-lg w-22 h-22 flex items-center justify-center",children:(0,h.jsx)(ti.Q,{className:"w-23 h-23"})}),iw=()=>{let{t:e}=(0,u.Bd)("visual-ai");return(0,h.jsxs)("div",{className:"text-gray-150 p-2 border-gray-500 border-solid border rounded-lg w-22 h-22 flex flex-col gap-1 items-center justify-center",children:[(0,h.jsx)(b,{}),(0,h.jsx)("span",{className:"text-white",children:e("prompt.imageToVideoFields.end")})]})},i_=()=>{let{t:e}=(0,u.Bd)("visual-ai");return(0,h.jsxs)("div",{className:"text-gray-150 p-2 border-gray-500 border-solid border rounded-lg w-22 h-22 flex flex-col gap-1 items-center justify-center",children:[(0,h.jsx)(b,{}),(0,h.jsx)("span",{className:"text-white",children:e("prompt.imageToVideoFields.start")})]})},iC=e=>{let{source:t,sourceType:a="firstFrame"}=e;return(0,h.jsx)(h.Fragment,{children:(0,s.YW)({...t,sourceType:a}).with({type:"none",sourceType:"firstFrame"},()=>(0,h.jsx)(i_,{})).with({type:"none",sourceType:"lastFrame"},()=>(0,h.jsx)(iw,{})).with({type:"asset"},e=>{let{imageAssetId:t}=e;return(0,h.jsx)(iy,{assetId:t})}).with({type:"url"},e=>{let{imageUrl:t}=e;return(0,h.jsx)(ip,{creation:{imageUrl:t,id:"uploaded asset"}})}).with({type:"showcaseExample"},e=>{let{imageAssetId:t,styleId:a}=e;return(0,h.jsx)(iv,{assetId:t,styleId:a})}).otherwise(()=>(0,h.jsx)(ib,{}))})},iT=()=>{let{t:e}=(0,u.Bd)("visual-ai"),t=(0,eB._M)(),[a]=(0,eR.Uy)(),{aspectRatio:r}=a,{trackImageGenEvent:i}=(0,m.W)(),n=a7(),s=t.imageToImage.find(e=>e.modelGroupId===a.modelGroupId)??(0,a4.uK)(t.imageToImage);return(0,h.jsx)(tG,{onChange:e=>{let{target:s}=e,o="string"==typeof s.value?s.value:s.value.modelGroupId;i({name:"gen AI model switched",new_value:(0,eB.Gl)(o,t.imageToImage),old_value:(0,eB.Gl)(a.modelGroupId,t.imageToImage),aspect_ratio:(0,tv.PR)(r),generate_type:"image to image"}),"string"!=typeof s.value&&n(S.JZ.imageToImageAI,s.value.urlSlug)},onOpen:()=>{i({name:"button clicked",button_name:"gen ai models",gen_AI_tier:(0,eB.Gl)(a.modelGroupId,t.imageToImage)})},value:s,children:t.imageToImage.map(t=>{let a=s.modelGroupId===t.modelGroupId;return(0,h.jsx)(tG.MenuItem,{value:t,children:(0,h.jsxs)(tG.MenuItemContainer,{children:[(0,h.jsxs)(tG.MenuItemNameOuterContainer,{children:[(0,h.jsxs)(tG.MenuItemNameInnerContainer,{children:[(0,h.jsxs)(tG.MenuItemName,{children:[t.modelGroupIcon&&(0,h.jsx)(tG.IconImage,{src:t.modelGroupIcon,alt:`${t.name} icon`}),t.name]}),t.isNew&&(0,h.jsx)(tG.NewTag,{children:e("modelNewTag")})]}),a&&(0,h.jsx)(tG.MenuItemCheckIcon,{})]}),(0,h.jsx)(tG.MenuItemDescription,{children:t.description})]})},t.modelGroupId)})})};var iI=a(47086);let iE="describe-changes-precisely",iA="name-people-objects-clearly",ik="use-concrete-verbs",iN="specify-what-to-keep",iS="use-quotation-marks",iM={[iE]:"promptTips.sections.describeChangesPrecisely.title",[iA]:"promptTips.sections.namePeopleObjectsClearly.title",[ik]:"promptTips.sections.useConcreteVerbs.title",[iN]:"promptTips.sections.specifyWhatToKeep.title",[iS]:"promptTips.sections.useQuotationMarks.title"},iO=()=>{let{trackImageGenEvent:e}=(0,m.W)(),{t}=(0,u.Bd)("visual-ai"),a=(0,r.useCallback)(()=>{e({name:eL.$.BUTTON_CLICKED,button_name:eL.$.PROMPT_TIPS_BUTTON,title:eL.$.PROMPT_TIPS_TITLE,component:eL.$.PROMPT_TIPS_COMPONENT,click_source:eL.$.IMAGE_TO_IMAGE_TEXT_BOX})},[e]);return{trackPromptTipsClick:a,trackAccordionToggle:(0,r.useCallback)((a,r)=>{let i=t(iM[a],{lng:"en"});e({name:eL.$.BUTTON_CLICKED,button_name:r?"+":"-",component_title:i,title:eL.$.PROMPT_TIPS_TITLE,component:eL.$.PROMPT_TIPS_COMPONENT,click_source:eL.$.IMAGE_TO_IMAGE_TEXT_BOX})},[e,t]),trackGotItClick:(0,r.useCallback)(()=>{e({name:eL.$.BUTTON_CLICKED,button_name:eL.$.GOT_IT_BUTTON,click_source:eL.$.IMAGE_TO_IMAGE_TEXT_BOX})},[e])}},iL=()=>{let{t:e}=(0,u.Bd)("visual-ai");return{title:e("promptTips.title"),sections:[{id:iE,title:e("promptTips.sections.describeChangesPrecisely.title"),content:e("promptTips.sections.describeChangesPrecisely.content")},{id:iA,title:e("promptTips.sections.namePeopleObjectsClearly.title"),content:e("promptTips.sections.namePeopleObjectsClearly.content")},{id:ik,title:e("promptTips.sections.useConcreteVerbs.title"),content:e("promptTips.sections.useConcreteVerbs.content")},{id:iN,title:e("promptTips.sections.specifyWhatToKeep.title"),content:e("promptTips.sections.specifyWhatToKeep.content")},{id:iS,title:e("promptTips.sections.useQuotationMarks.title"),content:e("promptTips.sections.useQuotationMarks.content")}]}};var iP=a(23791),iR=a(97921),iG=a(52220),iB=a(20299),iU=a(79421);let iF=e=>{let{onAccordionToggle:t}=e,{sections:a}=iL(),[i,n]=(0,r.useState)([iE]);return(0,h.jsx)("div",{className:"flex flex-col items-start justify-start w-full max-w-[564px]",children:a.map((e,r)=>{let s,o=i.includes(e.id),l=r===a.length-1;return(0,h.jsxs)(iG.A,{expanded:o,onChange:(s=e.id,(e,a)=>{n(e=>a?e.includes(s)?e:[...e,s]:e.filter(e=>e!==s)),t(s,a)}),sx:e=>({backgroundColor:"transparent",boxShadow:"none",width:"100%",borderBottom:l?"none":`1px solid ${e.palette.grey[300]}`,"&:before":{display:"none"},"&.Mui-expanded":{margin:0},"&:hover":{backgroundColor:"transparent"},"&.mui-1sgpais-MuiModal-root-MuiDrawer-root .MuiPaper-root":{backgroundColor:"transparent"},"&.MuiPaper-root":{backgroundColor:"transparent"}}),children:[(0,h.jsx)(iU.A,{sx:e=>({padding:"16px",paddingLeft:{xs:0,sm:"16px"},minHeight:"68px",height:"68px",backgroundColor:"transparent",transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"transparent"},"&.Mui-expanded":{minHeight:"68px",height:"68px",backgroundColor:"transparent",paddingLeft:{xs:0,sm:"16px"},marginBottom:"-16px",transition:"margin-bottom 0.2s ease-in-out"},"&.mui-1sgpais-MuiModal-root-MuiDrawer-root .MuiPaper-root":{backgroundColor:"transparent"},"&.MuiPaper-root":{backgroundColor:"transparent"},"& .MuiAccordionSummary-content":{margin:0,display:"flex",alignItems:"center",justifyContent:"center",gap:"16px","&.Mui-expanded":{margin:0}},"& .MuiAccordionSummary-expandIconWrapper":{color:e.palette.common.white,fontSize:"16px",position:"relative",transition:"transform 0.2s ease-in-out","&.Mui-expanded":{color:e.palette.common.white,transform:"rotate(0deg)"}},borderBottom:"none"}),expandIcon:(0,h.jsx)(eo.g,{icon:o?iP.EZ:iR.QL,className:"text-base text-white"}),"aria-label":"Toggle section",children:(0,h.jsx)("div",{className:"flex flex-col gap-2 grow min-w-0",children:(0,h.jsx)("h3",{className:"text-base font-normal leading-normal text-white",children:e.title})})}),(0,h.jsx)(iB.A,{sx:{padding:"0 16px 16px 16px",paddingLeft:{xs:"0px",sm:"16px"}},children:(0,h.jsx)("p",{className:"text-sm leading-[1.4] text-gray-100",children:e.content})})]},e.id)})})},i$=e=>{let{isOpen:t,onClose:a,anchorElement:r}=e,{trackAccordionToggle:i}=iO(),{title:n}=iL();return(0,h.jsx)(rU.W,{isOpen:t,onClose:a,anchorElement:r,isDrawer:!0,drawerStyle:{zIndex:e=>e.zIndex.modal},paperProps:{sx:{borderTopLeftRadius:"20px",borderTopRightRadius:"20px",maxWidth:"100vw",width:"100vw",padding:0,margin:0}},menuClassName:"bg-gray-600",actionsBarClassName:"bg-gray-600",name:"prompt-tips-drawer",role:"dialog","aria-label":"Prompt tips drawer",children:(0,h.jsxs)("div",{className:"bg-gray-600",children:[(0,h.jsx)("div",{className:"px-5 pt-7 pb-0",children:(0,h.jsx)("h2",{className:"text-2xl font-medium text-white",children:n})}),(0,h.jsx)("div",{className:"pt-4 px-5",children:(0,h.jsx)(iF,{onAccordionToggle:(e,t)=>i(e,t)})})]})})};var iD=a(44779),iV=a(94255);let iX=e=>(0,h.jsx)("button",{"data-testid":"DialogCloseButtonLite",type:"button",className:"focus-ring absolute top-2 right-2 flex h-8 w-8 items-center justify-center rounded-xl p-2",...e,children:(0,h.jsx)(eo.g,{icon:iV.yY,className:"text-lg"})}),iW=e=>{let{isOpen:t,onClose:a}=e,{trackAccordionToggle:r}=iO(),{title:i}=iL();return(0,h.jsxs)(C.A,{open:t,onClose:a,maxWidth:!1,slotProps:{paper:{sx:e=>({borderRadius:"16px",width:"612px",maxWidth:"612px","&.MuiPaper-root":{backgroundColor:e.palette.grey[700],padding:"24px"}})}},children:[(0,h.jsx)(iX,{onClick:a}),(0,h.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,h.jsx)(iD.A,{component:"h2",sx:e=>({fontSize:"28px",fontWeight:500,color:e.palette.common.white,textAlign:"center",padding:0,margin:0,marginTop:"20px"}),children:i}),(0,h.jsx)(I.A,{sx:{padding:0,margin:0},children:(0,h.jsx)(iF,{onAccordionToggle:r})})]})]})},iz=e=>{let{variant:t}=e,a=(0,i.usePathname)(),n=(null==a?void 0:a.startsWith(S.JZ.imageToImageAI))??!1,{isOpen:s,openModal:o,closeModal:l}=(()=>{let[e,t]=(0,r.useState)(!1),{trackPromptTipsClick:a}=iO();return{isOpen:e,openModal:(0,r.useCallback)(()=>{t(!0),a()},[a]),closeModal:(0,r.useCallback)(()=>{t(!1)},[])}})(),d=(0,r.useRef)(null),{t:c}=(0,u.Bd)("visual-ai");return n?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("button",{ref:d,onClick:o,className:"text-sm font-normal text-gray-100 hover:text-white flex items-center gap-1",type:"button","aria-label":"Open prompt tips",children:[(0,h.jsx)(eo.g,{icon:iI.faCircleInfo,size:"xs",title:c("promptTips.linkText"),className:"text-xs"}),(0,h.jsx)("span",{children:c("promptTips.linkText")})]}),"mobile"===t?(0,h.jsx)(i$,{isOpen:s,onClose:l,anchorElement:d.current}):(0,h.jsx)(iW,{isOpen:s,onClose:l})]}):null},iK=e=>{let{children:t}=e;return t((0,eR.Un)())},iH=e=>{let{shouldShowCost:t,cost:a,handleGeneration:i,generateImageFromImageMutation:n,error:o,shouldShowExceededCreditsLimit:l,shouldShowUpgrade:c,shouldShowSubscribe:g,isContactSalesFlow:x,handleUpgradeJourneys:y,handleJourneys:f,isAnimateButtonThrottled:j,isPaidEnabled:v,children:b}=e,w=(0,eB._M)(),[_,C]=(0,eR.Uy)(),{aspectRatio:T,modelGroupId:I}=_,E=(0,eR.hB)(),A=(0,eR.Me)(),{t:k}=(0,u.Bd)("visual-ai"),N=j||n.isLoading,{isVisitor:S,isSuite5m:M}=(0,R.f)(),{isAI4_992_500mCredits:O}=(0,aR.u)(),L=!N&&null===o||S,{trackImageGenEvent:P}=(0,m.W)(),{state:{styleId:G}}=(0,tb.A0)(),B=(0,ij.p)(G),U=M||O?"":k(v?"prompt.moreCredits":"prompt.keepGenerating"),{isFeatureEnabled:F}=it(),$=(0,r.useMemo)(()=>{var e;let t=(null==(e=w.imageToImage.find(e=>e.modelGroupId===I))?void 0:e.supportedModels[0].supportedAspectRatios)??[];return F?[p.gl.AUTO,...t]:t},[I,w.imageToImage,F]);return(0,h.jsxs)(aA,{children:[(0,h.jsx)(a_,{children:(0,h.jsxs)(d.A,{direction:"row",alignItems:"center",justifyContent:"space-between",width:"100%",children:[(0,h.jsxs)(d.A,{gap:1.5,direction:"row",alignItems:"center",children:[(0,h.jsx)(aP.PromptModeToggle,{}),(0,h.jsxs)(ab,{children:[(0,h.jsx)(ab.TextToImageTab,{}),(0,h.jsx)(ab.ImageToImageTab,{})]})]}),(0,h.jsx)(iz,{variant:"desktop"})]})}),(0,h.jsxs)(aC,{children:[(0,h.jsxs)(d.A,{direction:"column",gap:1,children:[b,(0,h.jsx)(iK,{children:e=>(0,h.jsx)(ak,{autoFocus:!0,name:"prompt",value:e,rows:3,onChange:t=>{let a=0===e.length&&1===t.target.value.length,r=e.length>1&&1===t.target.value.length;if(a||r){var i;P({name:eL.$.START_FREE_TEXT_TYPE,click_source:eL.$.IMAGE_TO_IMAGE_TEXT_BOX,style:(null==(i=B.data)?void 0:i.name)??"",is_pasted:!1,number_of_images:E().length,gen_AI_tier:(0,eB.Gl)(A(),w.imageToImage),aspect_ratio:(0,tv.PR)(T),number_of_uploaded_images:E().filter(e=>"url"===e.type).length})}C({type:"promptUpdated",payload:t.target.value})},onPaste:()=>{if(0===e.length){var t;P({name:eL.$.START_FREE_TEXT_TYPE,click_source:eL.$.IMAGE_TO_IMAGE_TEXT_BOX,style:(null==(t=B.data)?void 0:t.name)??"",is_pasted:!0,aspect_ratio:(0,tv.PR)(T),number_of_images:E().length,gen_AI_tier:(0,eB.Gl)(A(),w.imageToImage),number_of_uploaded_images:E().filter(e=>"url"===e.type).length})}},placeholder:k("prompt.imageToImage.placeholder.desktop"),"aria-label":"prompt text"})})]}),(0,h.jsx)(aG,{children:(0,s.YW)({error:o,shouldShowExceededCreditsLimit:l,isShowUpgrade:c&&!M&&!O,shouldShowSubscribe:g}).with({shouldShowExceededCreditsLimit:!0},()=>(0,h.jsx)(a5,{handleJourneys:y})).with({isShowUpgrade:!0},()=>(0,h.jsx)(a0,{buttonText:v?k("prompt.getMoreCredits"):k(x?"prompt.contactSales":"prompt.upgradeNow"),text:v?k("prompt.creditsLimitReached"):k("prompt.limitReached"),keepText:U,handleJourneys:y})).with({shouldShowSubscribe:!0},()=>(0,h.jsx)(a0,{buttonText:k(x?"prompt.contactSales":"prompt.subscribeNow"),text:k("prompt.limitReached"),keepText:k("prompt.keepGenerating"),handleJourneys:f})).with({error:s.P.instanceOf(t3.gN)},e=>{let{error:t}=e;return(0,h.jsx)(a$,{"aria-label":t.message,children:t.message})}).with({error:s.P.instanceOf(t3.OE)},()=>(0,h.jsx)(aD,{})).with({error:s.P.instanceOf(t3.AA)},()=>(0,h.jsx)(az,{})).with({error:s.P.instanceOf(t3.o1)},()=>(0,h.jsx)(aV,{})).with({error:s.P.instanceOf(t3.bg)},()=>(0,h.jsx)(aH,{})).with({error:s.P.instanceOf(t3.Ek)},()=>(0,h.jsx)(aY,{})).with({error:s.P.instanceOf(t3.us)},()=>(0,h.jsx)(aJ,{})).otherwise(()=>null)})]}),(0,h.jsxs)(aE,{children:[(0,h.jsx)(aL,{children:(0,h.jsxs)("menu",{className:"flex gap-3",children:[(0,h.jsx)(iT,{}),(0,h.jsx)(a9.K,{onOpen:()=>{P({name:eL.$.BUTTON_CLICKED,click_source:eL.$.IMAGE_TO_IMAGE_TEXT_BOX,button_name:"aspect ratio dropdown"})},onChange:e=>{let{target:{value:t}}=e;P({name:eL.$.BUTTON_CLICKED,click_source:eL.$.IMAGE_TO_IMAGE_TEXT_BOX,button_name:(0,tv.PR)(t)}),C({type:"aspectRatioChosen",payload:t})},value:T,children:$.map(e=>(0,h.jsxs)(a9.K.MenuItem,{value:e,children:[(0,h.jsx)(a9.K.AspectRatioIcon,{aspectRatio:e}),(0,tl.Ti)(e)]},e))})]})}),(0,h.jsx)(aO,{children:(0,h.jsx)(aM,{disabled:!L,onClick:()=>i(),isLoading:N,cost:t?a:null,children:t?k("prompt.generate"):k("prompt.generateForFree")})})]})]})},iY=e=>(0,h.jsx)("button",{type:"button",className:"w-full bg-white hover:bg-gray-50 h-11 rounded text-black font-bold text-lg transition-colors shrink-0",...e}),iJ=e=>{let{isSelected:t,...a}=e;return(0,h.jsx)("button",{type:"button",className:(0,j.cn)(t?"border-white":"border-transparent","border-solid rounded-lg w-full h-full transition-colors overflow-hidden border-2"),...a})},iQ=e=>{let{children:t,...a}=e;return(0,h.jsx)("h2",{className:"text-xl font-bold",...a,children:t})},iq=e=>{let{children:t}=e;return(0,h.jsx)("div",{className:"flex items-center justify-center flex-col gap-6 flex-1",children:t})},iZ=e=>{let{children:t}=e;return(0,h.jsx)("div",{className:"flex items-center justify-center flex-col gap-6 flex-1 relative",children:t})},i0=e=>{let{onClick:t}=e,{t:a}=(0,u.Bd)("visual-ai");return(0,h.jsx)(iq,{children:(0,h.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,h.jsx)("div",{className:"w-20 h-20 text-gray-500",children:(0,h.jsx)(ti.Q,{})}),(0,h.jsx)("div",{className:"text-lg text-gray-50",children:a("creations.loggedOut.title")}),(0,h.jsxs)("div",{className:"text-sm text-gray-100 text-center",children:[a("creations.loggedOut.description")," ",(0,h.jsx)(L(),{href:"/text-to-image-ai",onClick:t,className:"inline underline",children:a("creations.noResults.linkLabel")})]})]})})},i1=Object.assign(e=>{let{children:t,selectedImageSection:a}=e,{t:r}=(0,u.Bd)("visual-ai");return(0,h.jsxs)(iZ,{children:[a,(0,h.jsx)("p",{className:"text-white text-center",children:(0,h.jsx)(u.x6,{i18nKey:"prompt.emptyAnimateImageMessageUpload",t:r,components:{br:(0,h.jsx)("br",{})}})}),(0,h.jsx)("div",{className:"flex gap-4 w-full justify-center relative",children:t})]})},{OptionContainer:e=>(0,h.jsx)("div",{className:"flex-grow flex border border-gray-300 text-gray-50 gap-1.5 rounded-lg flex-col items-center justify-center relative w-full max-w-[145px] h-[102px] font-medium",...e}),OptionContainerButton:e=>(0,h.jsx)("button",{type:"button",className:"flex-grow flex border border-gray-300 text-gray-50 gap-1.5 rounded-lg flex-col items-center justify-center relative w-full max-w-[145px] h-[102px] font-medium",...e})}),i2=e=>({imageAssetId:e.id,styleId:e.style.id,imageUrl:e.imageUrl}),i5=e=>{let{onConfirmSelection:t}=e,{t:a}=(0,u.Bd)("visual-ai"),{isFetched:i,allImageCreations:n,handleLoadMore:o,assignScrollContainerRef:l,scrollContainerRef:d,hasNextPage:c,isLoading:p}=tr(),m=(0,rh.Xr)(rb),[g,x]=(0,r.useState)();return(0,r.useEffect)(()=>{let e=n.find(e=>"generatedImage"===e.assetType&&"succeeded"===e.status);e&&!g&&x(i2(e))},[n,g]),(0,s.YW)({isLoading:p,isEmpty:i&&0===n.length}).with({isLoading:!0},()=>(0,h.jsxs)("div",{className:"flex flex-1 min-h-0 flex-col gap-4",children:[(0,h.jsx)(iQ,{children:a("selectImageCreation.heading")}),(0,h.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,h.jsx)(ta,{})})]})).with({isEmpty:!0},()=>(0,h.jsx)(i0,{onClick:()=>m(!1)})).with({isEmpty:!1,isLoading:!1},()=>(0,h.jsxs)("div",{className:"flex flex-1 min-h-0 flex-col gap-4",children:[(0,h.jsx)(iQ,{children:a("selectImageCreation.heading")}),(0,h.jsx)("div",{ref:l,className:"flex-1 overflow-y-auto min-h-0","data-testid":"scrollable-container",children:(0,h.jsx)(to(),{loadMore:o,hasMore:c,useWindow:!1,getScrollParent:()=>d.current,initialLoad:!1,threshold:120,children:(0,h.jsx)(td.c,{className:"flex-row flex-wrap",itemFlexGrowFactors:{xs:1},itemMinHeights:{xs:90,sm:120},children:n.map((e,t)=>(0,s.YW)(e).with({assetType:"generatedImage",status:"succeeded"},e=>{let a=i2(e);return(0,h.jsx)(td.c.Item,{index:t,aspectRatio:(0,tl.p$)(e.settings.aspectRatio),children:(0,h.jsx)(iJ,{onClick:()=>{x(a)},isSelected:(null==g?void 0:g.imageAssetId)===a.imageAssetId,children:(0,h.jsx)(ew.J,{src:e.imageUrl,alt:e.prompt})})},e.id)}).otherwise(()=>null))})})}),(0,h.jsx)("div",{className:"absolute bottom-0 w-full h-17 pr-10 pt-4 pb-2 bg-black",children:(0,h.jsx)(iY,{onClick:()=>{g&&(t(g),m(!1))},children:a("selectImageCreation.confirmSelection")})})]})).exhaustive()},i4=e=>{let{mutation:t}=e,{processFiles:a}=e6({mutation:t,checkIfCanUpload:()=>!0}),[i,n]=(0,r.useState)(!1),[o,l]=(0,r.useState)(null),d=(0,rh.Xr)(rb),c=()=>{n(!1)},u=()=>{n(!0)},p=()=>{d(!0),c()};return(0,s.YW)({isUploading:t.isUploading,isValidating:t.isValidating}).with({isUploading:!0,isValidating:!1},()=>(0,h.jsx)(eN,{})).with({isUploading:!1,isValidating:!0},()=>{var e,a;return(0,h.jsx)(eN,{src:null==(e=t.uploadData)||null==(a=e.data)?void 0:a.downloadUrl})}).otherwise(()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("button",{type:"button",onClick:u,ref:l,className:"w-22 h-22 rounded border border-dashed flex items-center justify-center relative shrink-0 text-medium-emphasis",children:(0,h.jsx)(b,{})}),(0,h.jsx)(rU.W,{anchorElement:o,anchorOrigin:{vertical:"bottom",horizontal:"left"},isOpen:i,drawerStyle:{zIndex:0xe8d4a50fff},isDrawer:!0,menuClassName:"w-34 bg-gray-600",transformOrigin:{vertical:-10,horizontal:"left"},children:(0,h.jsx)(rB.x,{onClickAway:c,children:(0,h.jsxs)("div",{className:"overflow-auto scrollbar-thin scrollbar-track-gray-600 scrollbar-thumb-gray-400",children:[(0,h.jsxs)(rU.W.MenuItem,{component:"label",className:"px-4 py-2",htmlFor:"image-gen-upload-image-mobile",children:[(0,h.jsx)(ev,{handleInputUpload:e=>{c(),a(e.target.files)},uploadImageInputId:"mobile"}),"Upload an image"]}),(0,h.jsx)(rU.W.MenuItem,{onClick:p,className:"flex px-4 py-2",children:'Choose from "My Creations"'})]})})})]}))};var i6=a(51193),i3=a(30281);let i7=e=>{let{onClick:t}=e;return(0,h.jsx)("div",{className:"absolute inset-0",children:(0,h.jsx)(el,{onClick:t})})};var i9=a(46086),i8=a(4549),ne=a(59483);let nt=e=>{let{children:t,onClose:a,type:r}=e,{isBelowLG:i,isReady:n}=(0,t0.Qs)();if(!n)return null;let o=(0,s.YW)(r).with("error",()=>"text-error").with("warning",()=>"text-gray-150").exhaustive();return i?(0,h.jsx)(ne.A,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!0,onClose:a,sx:e=>({top:"70px",left:"16px",right:"24px","& .MuiPaper-root":{borderRadius:"8px",background:e.palette.common.white,color:e.palette.grey["900"],padding:"8px",fontSize:"14px",flexWrap:"nowrap"},"& .MuiSnackbarContent-message":{padding:0}}),message:(0,h.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,h.jsx)(eo.g,{className:o,icon:i8.faCircleExclamation}),t]}),action:(0,h.jsx)("button",{type:"button",onClick:a,className:"w-6 h-6 text-lg mr-2",children:(0,h.jsx)(eo.g,{icon:i9.faXmark})})}):(0,h.jsx)("div",{role:"alert","aria-label":"Upload error",className:"w-full bg-white absolute inset-x-0 bottom-0 rounded-br-lg rounded-bl-lg text-black px-1.5 flex items-center text-xs p-2",children:(0,h.jsxs)("div",{className:"flex gap-1.5",children:[(0,h.jsx)(eo.g,{className:(0,j.cn)("text-base",o),icon:i8.faCircleExclamation}),(0,h.jsx)("div",{className:"flex-1",children:t})]})})},na=e=>{let{mutation:t}=e,{t:a}=(0,u.Bd)("visual-ai");return(0,s.YW)(t).with({error:s.P.not(null)},e=>{let{error:a}=e;return(0,h.jsx)(nt,{type:"error",onClose:()=>t.reset(),children:e0(a)})}).with({data:{warning:"RESOLUTION_LOW"}},()=>(0,h.jsx)(nt,{type:"warning",onClose:()=>t.reset(),children:a("imageToVideo.lowResolutionWarning")})).otherwise(()=>null)};var nr=a(40315);let ni=e=>{let{onOpen:t,onChange:a}=e,[i,n]=(0,r.useState)(null),[s,o]=(0,r.useState)(!1),[l,d]=(0,eR.Uy)(),{aspectRatio:c,modelGroupId:u}=l,{isFeatureEnabled:m}=it(),g=(0,eB._M)(),x=(0,r.useMemo)(()=>{var e;let t=(null==(e=g.imageToImage.find(e=>e.modelGroupId===u))?void 0:e.supportedModels[0].supportedAspectRatios)??[];return m?[p.gl.AUTO,...t]:t},[u,g.imageToImage,m]),y=(0,r.useMemo)(()=>x.map(e=>({aspectRatio:e,title:(0,tl.Hj)(e)})),[x]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tC.A,{ref:n,children:(0,h.jsxs)("button",{type:"button",className:"flex h-11 items-center gap-2 rounded-lg bg-gray-400 px-3 py-2 text-sm text-white",onClick:()=>{o(!0),null==t||t()},"aria-label":"model select","aria-haspopup":"menu","data-testid":"selected-model",children:[(0,h.jsxs)("div",{className:"inline-flex items-center gap-2",children:[c?(0,h.jsx)(a9.Y,{aspectRatio:c}):null,(0,tl.Hj)(c)]}),(0,h.jsx)("span",{className:"text-white",children:(0,h.jsx)(eo.g,{icon:nr.Jt})})]})}),(0,h.jsx)(rU.W,{anchorElement:i,anchorOrigin:{vertical:"bottom",horizontal:"left"},isOpen:s,drawerStyle:{zIndex:0xe8d4a50fff},isDrawer:!0,menuClassName:"w-80",transformOrigin:{vertical:-10,horizontal:"left"},children:(0,h.jsx)(rB.x,{onClickAway:()=>o(!1),children:(0,h.jsx)("div",{className:"overflow-auto scrollbar-thin scrollbar-track-gray-600 scrollbar-thumb-gray-400",children:y.map(e=>{let t=e.aspectRatio===c;return(0,h.jsxs)(rU.W.MenuItem,{value:e.aspectRatio,onClick:()=>{d({type:"aspectRatioChosen",payload:e.aspectRatio}),null==a||a(e.aspectRatio),o(!1)},className:"flex items-center justify-between p-4",children:[(0,h.jsxs)("div",{className:"flex gap-3",children:[(0,h.jsx)(rK.B,{aspectRatio:e.aspectRatio}),(0,h.jsx)("span",{className:"text-white inline-flex gap-4 items-center",children:e.title})]}),t&&(0,h.jsx)(eo.g,{icon:rz.e6})]},e.aspectRatio)})})})})]})},nn=()=>{let e=(0,eB._M)(),[t,a]=(0,r.useState)(null),[i,n]=(0,r.useState)(!1),[s]=(0,eR.Uy)(),o=a7(),l=()=>{n(!1)},d=e.imageToImage.find(e=>e.modelGroupId===s.modelGroupId)??(0,a4.uK)(e.imageToImage),c=(0,r.useCallback)(e=>()=>{o(S.JZ.imageToImageAI,e.urlSlug),l()},[o]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tC.A,{ref:a,children:(0,h.jsxs)("button",{type:"button",className:"flex h-11 items-center justify-between gap-2 rounded-lg bg-gray-400 px-3 py-2 text-base text-white flex-1",onClick:()=>{n(!0)},"aria-label":"model select","aria-haspopup":"menu","data-testid":"selected-model",children:[(0,h.jsxs)("span",{className:"flex items-center gap-2",children:[d.modelGroupIcon&&(0,h.jsx)(tG.IconImage,{src:d.modelGroupIcon,alt:`${d.name} icon`}),d.name," Model"]}),(0,h.jsx)("span",{className:"text-white text-sm",children:(0,h.jsx)(eo.g,{icon:nr.Jt})})]})}),(0,h.jsx)(rU.W,{anchorElement:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},isOpen:i,drawerStyle:{zIndex:0xe8d4a50fff},isDrawer:!0,menuClassName:"w-80",transformOrigin:{vertical:-10,horizontal:"left"},children:(0,h.jsx)(rB.x,{onClickAway:()=>l(),children:(0,h.jsx)("div",{className:"overflow-auto scrollbar-thin scrollbar-track-gray-600 scrollbar-thumb-gray-400",children:(0,h.jsx)("ul",{className:"flex flex-col gap-2 p-4",children:e.imageToImage.map(e=>{let t=e.modelGroupId===d.modelGroupId;return(0,h.jsx)(tG.MenuItem,{onClick:c(e),value:e,selected:t,children:(0,h.jsxs)(tG.MenuItemContainer,{children:[(0,h.jsxs)(tG.MenuItemNameOuterContainer,{children:[(0,h.jsxs)(tG.MenuItemNameInnerContainer,{children:[(0,h.jsxs)(tG.MenuItemName,{children:[e.modelGroupIcon&&(0,h.jsx)(tG.IconImage,{src:e.modelGroupIcon,alt:`${e.name} icon`}),e.name]}),e.isNew&&(0,h.jsx)(tG.NewTag,{children:"New"})]}),t&&(0,h.jsx)(tG.MenuItemCheckIcon,{})]}),(0,h.jsx)(tG.MenuItemDescription,{children:e.description})]})},e.modelGroupId)})})})})})]})},ns=e=>{let{aspectRatio:t,setAspectRatio:a}=e,i=(0,eR.AX)(),n=(0,eB._M)(),{isFeatureEnabled:s}=it(),o=(0,r.useMemo)(()=>{var e;let t=(null==(e=n.imageToImage.find(e=>e.modelGroupId===i))?void 0:e.supportedModels[0].supportedAspectRatios)??[];return s?[p.gl.AUTO,...t]:t},[i,n.imageToImage,s]);return(0,h.jsx)(h.Fragment,{children:o.map(e=>{let r=e===t;return(0,h.jsxs)(rF.MenuItem,{value:e,onClick:()=>a(e),children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsx)(rK.B,{aspectRatio:e}),(0,h.jsx)(rF.MenuItemText,{children:(0,tl.Ti)(e)})]}),r&&(0,h.jsx)(eo.g,{icon:rz.e6})]},e)})})},no=e=>{let{onSelect:t}=e,a=(0,eB._M)(),r=(0,eR.AX)(),i=a.imageToImage.find(e=>e.modelGroupId===r)??(0,a4.uK)(a.imageToImage);return(0,h.jsx)("ul",{className:"flex flex-col gap-2 p-4",children:a.imageToImage.map(e=>{let a=e.modelGroupId===i.modelGroupId;return(0,h.jsx)(tG.MenuItem,{onClick:()=>t(e.modelGroupId,e.urlSlug),value:e,selected:a,children:(0,h.jsxs)(tG.MenuItemContainer,{children:[(0,h.jsxs)(tG.MenuItemNameOuterContainer,{children:[(0,h.jsxs)(tG.MenuItemNameInnerContainer,{children:[(0,h.jsxs)(tG.MenuItemName,{children:[e.modelGroupIcon&&(0,h.jsx)(tG.IconImage,{src:e.modelGroupIcon,alt:`${e.name} icon`}),e.name]}),e.isNew&&(0,h.jsx)(tG.NewTag,{children:"New"})]}),a&&(0,h.jsx)(tG.MenuItemCheckIcon,{})]}),(0,h.jsx)(tG.MenuItemDescription,{children:e.description})]})},e.modelGroupId)})})},nl=()=>{let e=(0,r.useRef)(null),[t,a]=rW({type:"closed"}),[i,n]=(0,eR.Uy)(),{trackImageGenEvent:o}=(0,m.W)(),l=(0,eB._M)(),{modelGroupId:d,aspectRatio:c}=i,{t:p}=(0,u.Bd)("visual-ai"),g=a7(),x=l.imageToImage.find(e=>e.modelGroupId===d)??(0,a4.uK)(l.imageToImage),y=()=>{a({type:"menuOpened"})},f=(e,t)=>{let a=(0,eB.Gl)(d,l.imageToImage),r=(0,eB.Gl)(e,l.imageToImage);o({name:eL.$.MODEL_SWITCHED,new_value:r,old_value:a,aspect_ratio:(0,tv.PR)(c),generate_type:eL.$.IMAGE_TO_IMAGE}),g(S.JZ.imageToImageAI,t),y()},j=e=>{o({name:eL.$.BUTTON_CLICKED,click_source:eL.$.IMAGE_TO_IMAGE_TEXT_BOX,button_name:(0,tv.PR)(e)}),n({type:"aspectRatioChosen",payload:e}),y()};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.Anchor,{ref:e,children:(0,h.jsxs)(rF.Button,{onClick:()=>{o(ae),a({type:"menuOpened"})},children:[(0,h.jsx)(rF.SettingsIcon,{}),(0,h.jsxs)(rF.ButtonText,{children:[x.name," ",p("creation.model")]})]})}),(0,h.jsx)(rF,{anchorElement:e.current,isOpen:"open"===t.type||"submenuOpen"===t.type,onClose:()=>a({type:"menuClosed"}),children:(0,h.jsx)(rF.MenuContainer,{onClickAway:()=>a({type:"menuClosed"}),children:(0,s.YW)(t).with({type:"closed"},()=>null).with({type:"open"},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(rF.MenuItem,{value:"model",onClick:()=>{o({name:eL.$.BUTTON_CLICKED,button_name:"gen ai models",gen_AI_tier:(0,eB.Gl)(d,l.imageToImage)}),a({type:"submenuActivated",payload:"model"})},children:[(0,h.jsxs)(rF.MenuItemText,{children:[x.name," ",p("creation.model")]}),(0,h.jsx)(rF.MenuItemChevron,{})]}),(0,h.jsxs)(rF.MenuItem,{value:"aspectRatio",onClick:()=>{o({name:eL.$.BUTTON_CLICKED,click_source:eL.$.IMAGE_TO_IMAGE_TEXT_BOX,button_name:"aspect ratio dropdown"}),a({type:"submenuActivated",payload:"aspectRatio"})},children:[(0,h.jsx)(rF.MenuItemText,{children:(0,tl.Ti)(c)}),(0,h.jsx)(rF.MenuItemChevron,{})]})]})).with({type:"submenuOpen",activeSubmenu:"model"},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.BackButton,{onClick:y,children:p("styleSelect.backToSettings")}),(0,h.jsx)(no,{onSelect:f})]})).with({type:"submenuOpen",activeSubmenu:"aspectRatio"},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.BackButton,{onClick:y,children:p("styleSelect.backToSettings")}),(0,h.jsx)(ns,{aspectRatio:c,setAspectRatio:j})]})).exhaustive()})})]})},nd=()=>{let{trackImageGenEvent:e}=(0,m.W)(),{isFeatureEnabled:t}=rV();return t?(0,h.jsx)(nl,{}):(0,h.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,h.jsx)(nn,{}),(0,h.jsx)(ni,{onOpen:()=>{e({name:eL.$.BUTTON_CLICKED,click_source:eL.$.IMAGE_TO_IMAGE_TEXT_BOX,button_name:"aspect ratio dropdown"})},onChange:t=>{e({name:eL.$.BUTTON_CLICKED,click_source:eL.$.IMAGE_TO_IMAGE_TEXT_BOX,button_name:(0,tv.PR)(t)})}})]})};var nc=a(9798);let nu=(e,t)=>{(0,r.useEffect)(()=>{"asset"===t.type&&e.reset()},[t.type])},np=e=>{let{children:t}=e;return(0,h.jsx)(o.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"h-full w-full",children:t})},nm=e=>{let{children:t}=e;return(0,h.jsx)("div",{className:"backdrop-blur absolute inset-0 rounded-lg bg-black/20 flex items-center justify-center",children:t})},ng=e=>{let{src:t}=e;return(0,h.jsxs)(e_,{children:[(0,h.jsx)(n.N,{children:t?(0,h.jsx)(np,{children:(0,h.jsx)(ew.J,{src:t})}):null}),(0,h.jsxs)(nm,{children:[(0,h.jsx)(er.A,{size:"45px",variant:"determinate",thickness:5,value:100,sx:e=>({color:e.palette.grey[300]})}),(0,h.jsx)(er.A,{size:"45px",thickness:5,sx:e=>({position:"absolute",color:e.palette.grey[50],[`& .${ei.A.circle}`]:{strokeLinecap:"round"}})})]})]})},nh=e=>{let{mutation:t,source:a,onError:r}=e;return(0,s.YW)({...a,isUploading:t.isUploading,isValidating:t.isValidating}).with({isUploading:!0,isValidating:!1},()=>(0,h.jsx)(ng,{})).with({isUploading:!1,isValidating:!0},()=>{var e,a;return(0,h.jsx)(ng,{src:null==(e=t.uploadData)||null==(a=e.data)?void 0:a.downloadUrl})}).with({type:"asset"},e=>{let{imageAssetId:t}=e;return(0,h.jsx)(iy,{assetId:t})}).with({type:"url"},e=>{let{imageUrl:t}=e;return(0,h.jsx)(ip,{creation:{imageUrl:t,id:"uploaded asset"},onError:r})}).with({type:"showcaseExample"},e=>{let{imageAssetId:t,styleId:a}=e;return(0,h.jsx)(iv,{assetId:t,styleId:a})}).with({type:"none"},()=>null).exhaustive()},nx=e=>{let{uploadImageInputId:t,mutation:a,children:r}=e,i=(0,eR.C$)(),n=(0,eR.LS)(),{data:s}=(0,nc.F)(),o=n[0]??{type:"none"};return nu(a,o),(0,h.jsxs)(eb,{isPromptBeingSuggested:!1,isCustomPromptBeingSuggested:!1,setCurrentImage:(e,t)=>{i({type:"firstSourceReplacedWithUrl",payload:{imageUrl:e,aspectRatio:t,styleId:null==s?void 0:s.id}})},uploadAndValidateImageMutation:a,hasImage:n.length>0,removeSelectedImage:()=>{i({type:"imageReset"}),a.reset()},uploadImageInputId:t,children:[(0,h.jsx)(nh,{mutation:a,source:o,onError:()=>{i({type:"imageReset"})}}),r]})},ny=()=>(0,h.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,h.jsx)(aw.A,{className:"w-[85%] h-4"}),(0,h.jsx)(aw.A,{className:"w-[75%] h-4"}),(0,h.jsx)(aw.A,{className:"w-[82%] h-4"}),(0,h.jsx)(aw.A,{className:"w-1/2 h-4"})]}),nf=()=>{let{t:e}=(0,u.Bd)("visual-ai");return(0,h.jsxs)("div",{className:"flex items-center text-gray-100 flex gap-2 font-medium text-base",children:[(0,h.jsx)(i3.BT,{}),e("prompt.suggestedPrompt")]})},nj=e=>{let{mutation:t,isVisitor:a}=e,r=(0,rh.Xr)(rb),i=()=>{H.default.trigger(J.yV.SIGN_UP__MODAL__OPEN)};return(0,h.jsxs)(i1,{selectedImageSection:(0,h.jsx)(nx,{uploadImageInputId:"mobile",mutation:t}),children:[(0,h.jsxs)(i1.OptionContainer,{children:[(0,h.jsx)(b,{}),"Upload",(0,h.jsx)("label",{onClick:e=>{a&&(e.preventDefault(),i())},className:"absolute inset-0 cursor-pointer",htmlFor:"image-gen-upload-image-mobile"})]}),(0,h.jsxs)(i1.OptionContainerButton,{onClick:()=>{a?i():r(!0)},children:[(0,h.jsx)(ti.Q,{className:"w-8 h-8"}),"My Creations"]}),(0,h.jsx)(na,{mutation:t}),(0,h.jsx)("div",{className:"mt-4 flex justify-center absolute -bottom-12",children:(0,h.jsx)(iz,{variant:"mobile"})})]})},nv=()=>{let e=(0,eR.C$)();return(0,h.jsx)(i5,{onConfirmSelection:t=>{e({type:"assetAdded",payload:t})}})},nb=r.forwardRef((e,t)=>{let{cost:a,handleGeneration:i,image:n,error:o,isAnimateButtonThrottled:l,generateImageToImageMutation:d,handleUpgradeJourneys:c,handleJourneys:p,shouldShowExceededCreditsLimit:g,shouldShowUpgrade:x,shouldShowSubscribe:y,shouldShowCost:f,isContactSalesFlow:j,isPaidEnabled:v}=e,b=(0,eB._M)(),{trackImageGenEvent:w}=(0,m.W)(),{t:_}=(0,u.Bd)("visual-ai"),{isVisitor:C}=(0,R.f)(),T=(0,i6.x)(),[I,E]=(0,eR.Uy)(),{prompt:A,sources:k,aspectRatio:N}=I,S=(0,r.useRef)(null),{state:{styleId:M}}=(0,tb.A0)(),O=(0,ij.p)(M),L=(0,rh.md)(rb),P=e1({supplementalKey:eP.ri,imageIndex:0}),{isSuite5m:G}=(0,R.f)(),{isAI4_992_500mCredits:B}=(0,aR.u)(),U=l||d.isLoading,F=null===o&&!U,$=G||B?"":_(v?"prompt.moreCredits":"prompt.keepGenerating"),D=(0,h.jsxs)(ab,{children:[(0,h.jsx)(ab.TextToImageTab,{}),(0,h.jsx)(ab.ImageToImageTab,{})]});return(0,r.useImperativeHandle)(t,()=>({focus:()=>{var e;null==(e=S.current)||e.focus()}}),[]),(0,h.jsx)(rM,{cost:a,canGenerate:F,handleGenerate:i,shouldShowCost:f,promptTabs:D,placeholder:_("prompt.image.placeholder.mobile"),prompt:A,sources:k,isGenerateFromImageMode:!0,children:(0,h.jsx)(rI,{children:(0,s.YW)({...I,isSelectCreationViewVisible:L}).with({isSelectCreationViewVisible:!0},()=>(0,h.jsx)(nv,{})).with({sources:[]},()=>(0,h.jsxs)(h.Fragment,{children:[D,(0,h.jsx)(nd,{}),(0,h.jsx)(nj,{mutation:P,isVisitor:C})]})).with({sources:s.P.array({type:s.P.union("asset","url","showcaseExample")})},()=>{var e;return(0,h.jsxs)(h.Fragment,{children:[D,(0,h.jsx)(nd,{}),(0,h.jsxs)(rN,{children:[k.map((e,t)=>(0,h.jsxs)(rE,{children:[(0,h.jsx)(iC,{source:e}),(0,h.jsx)(i7,{onClick:()=>{P.reset(),E({type:"sourceRemoved",payload:{index:t}})}})]},"none"!==e.type?e.imageUrl:t)),k.length<3?(0,h.jsx)(i4,{mutation:P}):null]}),(0,h.jsxs)(rS,{children:[(0,h.jsx)(aI,{className:"flex-1",placeholder:_("prompt.imageToImage.placeholder.mobile"),value:A,onChange:e=>{let t=0===A.length&&1===e.target.value.length,a=A.length>1&&1===e.target.value.length;if(t||a){var r;w({name:eL.$.START_FREE_TEXT_TYPE,click_source:eL.$.IMAGE_TO_IMAGE_TEXT_BOX,style:(null==(r=O.data)?void 0:r.name)??"",is_pasted:!1,number_of_images:I.sources.length,aspect_ratio:(0,tv.PR)(N),gen_AI_tier:(0,eB.Gl)(I.modelGroupId,b.imageToImage),number_of_uploaded_images:I.sources.filter(e=>"url"===e.type).length})}E({type:"promptUpdated",payload:e.target.value})},onPaste:()=>{if(0===A.length){var e;w({name:eL.$.START_FREE_TEXT_TYPE,click_source:eL.$.IMAGE_TO_IMAGE_TEXT_BOX,style:(null==(e=O.data)?void 0:e.name)??"",gen_AI_tier:(0,eB.Gl)(I.modelGroupId,b.imageToImage),is_pasted:!0,aspect_ratio:(0,tv.PR)(N),number_of_images:I.sources.length,number_of_uploaded_images:I.sources.filter(e=>"url"===e.type).length})}},ref:S,disabled:!1,autoFocus:!0}),(0,h.jsx)("div",{className:"mb-4",children:(0,h.jsx)(iz,{variant:"mobile"})}),(0,h.jsxs)(rk,{children:[(0,s.YW)({error:o,warning:null==(e=P.data)?void 0:e.warning,shouldShowExceededCreditsLimit:g,shouldShowUpgrade:x&&!T,shouldShowSubscribe:y||T}).with({shouldShowExceededCreditsLimit:!0},()=>(0,h.jsx)(a5,{handleJourneys:c})).with({shouldShowUpgrade:!0},()=>(0,h.jsx)(a0,{buttonText:v?_("prompt.getMoreCredits"):_(j?"prompt.contactSales":"prompt.upgradeNow"),text:v?_("prompt.creditsLimitReached"):_("prompt.limitReached"),keepText:$,handleJourneys:c})).with({shouldShowSubscribe:!0},()=>(0,h.jsx)(a0,{buttonText:_(j?"prompt.contactSales":"prompt.subscribeNow"),text:_("prompt.limitReached"),keepText:_("prompt.keepGenerating"),handleJourneys:p})).with({error:s.P.instanceOf(t3.gN)},e=>{let{error:t}=e;return(0,h.jsx)(a$,{"aria-label":t.message,children:t.message})}).with({error:s.P.instanceOf(t3.OE)},()=>(0,h.jsx)(aD,{})).with({error:s.P.instanceOf(t3.AA)},()=>(0,h.jsx)(az,{})).with({error:s.P.instanceOf(t3.o1)},()=>(0,h.jsx)(aV,{})).with({error:s.P.instanceOf(t3.bg)},()=>(0,h.jsx)(aH,{})).with({error:s.P.instanceOf(t3.Ek)},()=>(0,h.jsx)(aY,{})).with({error:s.P.instanceOf(t3.us)},()=>(0,h.jsx)(aJ,{})).with({warning:"RESOLUTION_LOW"},()=>(0,h.jsx)(aq,{})).otherwise(()=>null),f?(0,h.jsx)(aM,{fullWidth:!0,disabled:!F,onClick:i,cost:a,isLoading:U,children:d.isLoading?"Generating":_("prompt.generate")}):(0,h.jsx)(aM,{fullWidth:!0,cost:null,disabled:!F,onClick:i,isLoading:U,children:d.isLoading?"Generating":_("prompt.generateForFree")})]})]})]})}).with({sources:s.P.array({type:s.P.union("asset","url","showcaseExample")}),suggestedPrompt:null},()=>(0,h.jsxs)(h.Fragment,{children:[D,(0,h.jsx)(nd,{}),(0,h.jsx)(rN,{children:n}),(0,h.jsx)(nf,{}),(0,h.jsx)(ny,{})]})).otherwise(()=>null)})})}),nw={aspectRatio:null,dimensions:{imageHeight:null,imageWidth:null}},n_="image to image",nC=e=>{let{children:t}=e,a=(0,eB._M)(),n=(0,r.useRef)(null),[,o]=(0,t2.K)(),{isBelowLG:l}=(0,t0.Qs)(),[d,c]=(0,eR.Uy)(),{prompt:g,sources:x,modelGroupId:y,aspectRatio:f}=d,j=a.imageToImage.find(e=>e.modelGroupId===y),{aspectRatio:v,dimensions:b}=(e=>{let{data:t}=(0,im.h)("asset"===e.type?e.imageAssetId:null,{onError:e.onError}),{data:a}=(0,ij.p)("showcaseExample"===e.type?e.styleId:null);return(0,r.useMemo)(()=>{var r;let i="showcaseExample"===e.type?null==a||null==(r=a.showcases)?void 0:r.find(t=>t.id===e.imageAssetId):void 0;return(0,s.YW)({...e,creation:t,example:i,style:a}).with({type:"asset",creation:{status:"succeeded"}},e=>{let{creation:{style:{creditCost:t},settings:{aspectRatio:a},metadata:r}}=e;return{aspectRatio:a,dimensions:r,creditCost:t}}).with({type:"showcaseExample",style:s.P.not(s.P.nullish),example:s.P.not(s.P.nullish)},e=>{let{style:{upscaleCost:t,imageGenerationCost:a,videoGenerationFullHdCost:r,videoGenerationHdCost:i},example:{aspectRatio:n,dimensions:{height:s,width:o}}}=e;return{aspectRatio:n,dimensions:{imageHeight:s,imageWidth:o},creditCost:{upscaleCost:t,imageGenerationCost:a,videoGenerationFullHdCost:r,videoGenerationHdCost:i}}}).with({type:"url",aspectRatio:s.P.nonNullable},e=>{let{aspectRatio:t}=e;return{aspectRatio:t,dimensions:{imageHeight:null,imageWidth:null}}}).otherwise(()=>nw)},[e,t,a])})({...x[0],onError:()=>c({type:"imageReset"})}),w=(()=>{var e;let t=(0,eB._M)(),a=(0,i.useRouter)(),r=(0,$.useSession)(),n=(0,nc.F)(),o=null==(e=n.data)?void 0:e.id,{trackImageGenEventWithCost:l}=(0,m.W)(),d=(0,i.useSearchParams)(),c=(0,r4.useQueryClient)(),{t:p}=(0,u.Bd)("visual-ai"),g=(0,eR.Me)(),h=(0,q.RZ)();return(0,B.useMutation)({mutationKey:[eP.ri,"generate-image-from-image"],mutationFn:async e=>{var t,a,i,n,l;let{prompt:d,sources:c,modelGroupId:u,aspectRatio:p}=e;if(!(null!=(t=r.data)&&t.accessToken))throw eK.e$.error("No access token when trying to generate image to image.",{userId:null==(i=r.data)?void 0:i.user.id}),Error("No access token when trying to image to image.");if(!o)throw eK.e$.error("No default style provided when trying to image to image.",{userId:null==(n=r.data)?void 0:n.user.id}),Error("No default style provided when trying to image to image.");if(0===c.length)throw new t3.Ek;if(d.length<1)throw new t3.AA;if(1===c.length){let e=(0,s.YW)({firstSource:c[0],modelGroupId:u}).with({firstSource:{type:"url"},modelGroupId:s.P.nonNullable},e=>{let{firstSource:t,modelGroupId:a}=e;return{prompt:d,isShowcase:!1,imageUrl:t.imageUrl,styleId:o,aspectRatio:p,generateType:rf.vE.IMAGE_TO_IMAGE,modelGroupId:a}}).with({firstSource:{type:"asset"},modelGroupId:s.P.nonNullable},e=>{let{firstSource:t,modelGroupId:a}=e;return{prompt:d,styleId:o,aspectRatio:p,assetId:t.imageAssetId,isShowcase:!1,generateType:rf.vE.IMAGE_TO_IMAGE,modelGroupId:a}}).with({firstSource:{type:"showcaseExample"},modelGroupId:s.P.nonNullable},e=>{let{firstSource:t,modelGroupId:a}=e;return{prompt:d,aspectRatio:p,styleId:o,imageUrl:t.imageUrl,isShowcase:!0,generateType:rf.vE.IMAGE_TO_IMAGE,modelGroupId:a}}).with({firstSource:{type:"none"}},()=>{throw new t3.Ek}).with({modelGroupId:void 0},()=>{throw new t3.al}).exhaustive();return(await (0,r6.e6)(e,{accessToken:null==(l=r.data)?void 0:l.accessToken})).data}let m=(0,s.YW)({sources:c,modelGroupId:u}).with({modelGroupId:s.P.nonNullable},e=>{let{sources:t,modelGroupId:a}=e;return{prompt:d,isShowcase:!1,multipleImageUrls:t.map(e=>e&&"object"==typeof e&&"imageUrl"in e&&"string"==typeof e.imageUrl?e.imageUrl:null).filter(e=>!!e),styleId:o,aspectRatio:p,modelGroupId:a,generateType:rf.vE.IMAGE_TO_IMAGE}}).with({modelGroupId:s.P.nullish},()=>{throw new t3.al}).exhaustive();return(await (0,r6.Bs)(m,{accessToken:null==(a=r.data)?void 0:a.accessToken})).data},onMutate:async e=>{var a,r;l({name:"button clicked",button_name:"generate",click_source:eL.$.IMAGE_TO_IMAGE_TEXT_BOX,gen_AI_tier:(0,eB.Gl)(e.modelGroupId,t.imageToImage),total_words:r8(e.prompt),style:(null==n||null==(a=n.data)?void 0:a.name)??"",is_valid:!0,aspect_ratio:(0,tv.PR)(e.aspectRatio),is_uploaded_photo:e.sources.some(e=>"url"===e.type),number_of_images:e.sources.length,number_of_uploaded_images:e.sources.filter(e=>"url"===e.type).length},(null==(r=n.data)?void 0:r.imageGenerationCost)??0,"image")},onSuccess:async(e,r)=>{var i,s;let o=(null==(i=n.data)?void 0:i.imageGenerationCost)??0,{aspectRatio:u,parentDimensions:p}=r,m=r.sources.find(e=>"asset"===e.type),x={name:"generate start",gen_AI_tier:(0,eB.Gl)(g(),t.imageToImage),click_source:eL.$.IMAGE_TO_IMAGE_TEXT_BOX,generate_id:e.generationId,style:(null==n||null==(s=n.data)?void 0:s.name)??"",total_words:r8(r.prompt),format:"unknown",image_asset_id:m&&"asset"===m.type?m.imageAssetId:"",aspect_ratio:(0,tv.PR)(u),dimensions:p?(0,tv.z4)(p):"unknown",is_uploaded_photo:r.sources.some(e=>"url"===e.type),generate_type:rf.vE.IMAGE_TO_IMAGE,media_type:eL.$.IMAGE_AI,number_of_images:r.sources.length,number_of_uploaded_images:r.sources.filter(e=>"url"===e.type).length},y=r.sources.find(e=>"showcaseExample"===e.type);y&&"showcaseExample"===y.type?l({...x,click_source:y.source},o,"image"):l({...x,click_source:"image to image text box"},o??0,"image"),await c.invalidateQueries([eM.QN]),a.push(h(`/image-to-image-ai/creations?${d}`))},onError:(e,a)=>{var r,i;let o=(null==(r=n.data)?void 0:r.imageGenerationCost)??0;l({name:"button clicked",button_name:"generate",click_source:eL.$.IMAGE_TO_IMAGE_TEXT_BOX,total_words:r8(a.prompt),style:(null==n||null==(i=n.data)?void 0:i.name)??"",aspect_ratio:(0,tv.PR)(a.aspectRatio),is_valid:!1,is_uploaded_photo:a.sources.some(e=>"url"===e.type),number_of_images:a.sources.length,number_of_uploaded_images:a.sources.filter(e=>"url"===e.type).length,gen_AI_tier:(0,eB.Gl)(g(),t.imageToImage),message_text:(0,s.YW)(e).with(s.P.instanceOf(t3.OE),()=>p("prompt.rateLimitError")).with(s.P.instanceOf(t3.o1),()=>p("prompt.serverError")).with(s.P.instanceOf(t3.AA),()=>p("prompt.emptyImageToImagePromptError")).with(s.P.instanceOf(t3.bg),()=>p("prompt.inappropriatePromptError")).with(s.P.instanceOf(t3.Ek),()=>p("prompt.noSelectedImageError")).with(s.P.instanceOf(t3.us),()=>p("prompt.serviceUnavailableError")).exhaustive()},o??0,"image")},onSettled:a1.gq})})(),{error:_}=(e=>{let{prompt:t,mutation:a,characterLimit:i}=e,{trackImageGenEvent:n}=(0,m.W)(),s=(0,r.useMemo)(()=>(e=>{let{prompt:t,mutation:a,characterLimit:r}=e,i=t.length;return r&&i>r?new t3.gN(i,r):a.error?a.error:null})({prompt:t,mutation:a,characterLimit:i}),[t,a,i]);return(0,r.useEffect)(()=>{s&&n({name:"error annotated",error_message:s.message,component:"image to image text box"})},[s,n]),{error:s}})({prompt:g,mutation:w,characterLimit:(null==j?void 0:j.charLimit)??void 0}),C=(0,t4.Y)(),{handleJourneys:T,handleUpgradeJourneys:I,isContactSalesFlow:E}=(0,t4.f)(),{isVisitor:A,isTrial:k}=(0,R.f)(),{imageCreditsLeft:N,imageFreeGenerations:S,isImagePaidEnabled:M,isVideoPaidEnabled:O}=C,L=(null==j?void 0:j.supportedModels[0].costPerUnit)||0,P=!C.isLoading&&C.isImagePaidEnabled&&!!L&&C.imageCreditsLeft<L,G=!C.isLoading&&!P&&!A&&!k&&(S??0)<=0&&(C.imageCreditsLeft<(L??0)||0===C.imageCreditsLeft),[U,F]=(0,r.useState)(!1),D=async()=>{if(!((S??0)<=0&&T("Generate for free",ea.e.GENERATION_BOX,void 0,n_))){let e;if(e=L||0,(!M||!(N>=e))&&!((S??0)>0))return void I(!O,"Generate",ea.e.GENERATION_BOX);w.mutate({sources:x,prompt:g,parentAspectRatio:v,parentDimensions:b,aspectRatio:f,modelGroupId:y},{onSuccess:()=>{o(!1)},onError:()=>{o(!0)}}),F(!0),await new Promise(e=>setTimeout(e,3e3)),F(!1)}},V=!!M||!A&&(null===S||0===S);return(()=>{let[e,t]=(0,eR.Uy)(),{isFeatureEnabled:a}=it(),i=(0,r.useRef)(e.sources.length);(0,r.useEffect)(()=>{let r=i.current>0&&0===e.sources.length;i.current=e.sources.length,a&&r&&e.aspectRatio===p.gl.SQUARE&&0===e.sources.length&&t({type:"aspectRatioChosen",payload:p.gl.AUTO})},[a,e.aspectRatio,e.sources.length,t])})(),(0,h.jsxs)("div",{className:"flex-1","aria-label":"Image to image generation prompt",children:[(0,h.jsx)(il,{}),(0,h.jsx)(id,{mutation:w}),l?(0,h.jsx)(nb,{ref:n,cost:L,handleGeneration:D,image:(0,h.jsx)(iC,{source:x[0]}),isAnimateButtonThrottled:U,error:_,generateImageToImageMutation:w,handleUpgradeJourneys:(e,t)=>I(C.isVideoPaidEnabled,e,t,void 0,n_),handleJourneys:(e,t,a)=>{T(e,t,a,n_)},shouldShowExceededCreditsLimit:P,shouldShowUpgrade:G,shouldShowSubscribe:C.shouldShowImageSubscribe,shouldShowCost:V,isContactSalesFlow:E,isPaidEnabled:M}):(0,h.jsx)(iH,{handleUpgradeJourneys:(e,t)=>I(O,e,t,void 0,n_),shouldShowExceededCreditsLimit:P,handleJourneys:(e,t,a)=>{T(e,t,a,n_)},isContactSalesFlow:E,shouldShowUpgrade:G,shouldShowSubscribe:C.shouldShowImageSubscribe,generateImageFromImageMutation:w,error:_,cost:L,handleGeneration:D,shouldShowCost:V,isAnimateButtonThrottled:U,isPaidEnabled:M,children:t})]})},nT=()=>((()=>{let e="authenticated"===(0,$.useSession)().status,t=(0,is.x)(),{dispatch:a}=(0,eZ.kt)(),i=(0,r.useRef)(e);(0,r.useEffect)(()=>{!e&&i.current&&(a({type:"imageReset"}),a({type:"promptReset"})),i.current=e},[e,t])})(),null);var nI=a(83646),nE=a(16596),nA=a(57535);let nk=e=>e>0,nN=e=>null!==e&&e>0,nS=e=>!e,nM=e=>0===e,nO=e=>null!==e&&e<=0,nL=e=>{let{isMobile:t,disabled:a,onClick:i,cost:n,isLoading:o,isVisitor:l,videoFreeGenerations:d,imageFreeGenerations:c,isSelectedModelRestricted:p,isTrial:m,isPaid:g}=e,{t:x}=(0,u.Bd)("visual-ai"),y=(0,r.useMemo)(()=>{if(p){if(l||m)return"subscribeToAnimate";if(g)return"upgradeToAnimate"}return(0,s.YW)({isVisitor:l,videoFreeGenerations:d,imageFreeGenerations:c}).with({isVisitor:!0},()=>"animateForFree").with({videoFreeGenerations:s.P.when(nk),imageFreeGenerations:s.P.when(nS)},()=>"animateForFree").with({videoFreeGenerations:s.P.when(nM),imageFreeGenerations:s.P.when(nN)},()=>"animate").with({videoFreeGenerations:s.P.when(nO),imageFreeGenerations:s.P.when(nO)},()=>"animateWithCost").with({videoFreeGenerations:s.P.number,imageFreeGenerations:s.P.number},()=>"animateForFree").with({imageFreeGenerations:null},()=>"animateWithCost").exhaustive()},[d,c,l,p,m,g]),f=(0,r.useMemo)(()=>(0,s.YW)(y).with("animate",()=>({cost:null,text:x("prompt.animate")})).with("animateForFree",()=>({cost:null,text:x("prompt.animateForFree")})).with("animateWithCost",()=>({cost:n,text:x("prompt.animate")})).with("subscribeToAnimate",()=>({cost:null,text:"Subscribe to Animate"})).with("upgradeToAnimate",()=>({cost:null,text:"Upgrade to Animate"})).exhaustive(),[y,x,n]);return(0,h.jsx)(aM,{fullWidth:t,cost:f.cost,disabled:a,onClick:i,isLoading:o,children:f.text})},nP=(0,E.Ay)("div")(e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column",gap:t.spacing(.5),width:"100%"}}),nR=()=>((()=>{let{imageToVideo:e,defaultModel:t}=(0,eB._M)(),{state:{modelGroupId:a},dispatch:i}=(0,eZ.Cm)(),n=(0,r.useMemo)(()=>a&&e.find(e=>e.modelGroupId===a)?null:(0,a4.uK)(e,t),[t,e,a]);(0,r.useEffect)(()=>{n&&i({type:"defaultModelGroupChosen",payload:n})},[n,i])})(),null);var nG=a(11098);let nB=e=>{let{children:t}=e,{t:a}=(0,u.Bd)("visual-ai"),{isBelowSM:r}=(0,t0.Qs)();return(0,s.YW)({isBelowSM:r}).with({isBelowSM:!0},()=>t).with({isBelowSM:!1},()=>(0,h.jsx)(nG.m,{text:a("prompt.suggestButton"),children:t})).exhaustive()},nU=(0,r.forwardRef)((e,t)=>{let{disabled:a,isLoading:r,isGenerateLoading:i,...n}=e,{t:l}=(0,u.Bd)("visual-ai");return(0,h.jsx)(o.P.div,{className:"relative z-2 group",children:(0,h.jsx)(nB,{children:(0,h.jsx)("button",{type:"button",className:`
            focus-ring text-md flex h-11 items-center justify-center gap-1
            duration-150 bg-gray-400 group-first:rounded-lg rounded-lg 
            lg:hover:bg-gray-400 group-first:lg:hover:bg-gray-300 lg:active:bg-gray-200 
            disabled:bg-gray-500 disabled:text-black disabled:hover:bg-gray-500 
            transition-all whitespace-nowrap px-4
          `,disabled:a,"aria-label":l("prompt.suggestButton"),ref:t,...n,children:(0,s.YW)({isLoading:r}).with({isLoading:!0},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(i3.OU,{}),(0,h.jsxs)("div",{className:"flex items-center justify-center relative mr-2",children:[(0,h.jsx)(er.A,{size:"16px",variant:"determinate",thickness:6,value:100,sx:e=>({color:e.palette.grey[300]})}),(0,h.jsx)(er.A,{size:"16px",thickness:6,sx:e=>({position:"absolute",left:"2px",color:e.palette.grey[50],[`& .${ei.A.circle}`]:{strokeLinecap:"round"}})})]})]})).with({isLoading:!1},()=>(0,h.jsx)(i3.OU,{})).exhaustive()})})},"suggested-prompt-wrapper")}),nF=e=>{let{value:t,onChange:a,onOpen:i,...n}=e,s=(0,eB._M)(),o=(0,r.useMemo)(()=>{if(!t)return(0,a4.uK)(s.imageToVideo);let e=s.imageToVideo.find(e=>e.modelGroupId===t);return e||(0,a4.uK)(s.imageToVideo)},[s.imageToVideo,t]),l=(0,r.useCallback)(e=>{let{value:t}=e.target;"string"!=typeof t&&a({newModelGroup:t,previousModelGroup:o})},[a,o]);return(0,h.jsx)(tG,{value:o,onChange:l,onOpen:()=>{i(o||null)},...n,children:s.imageToVideo.map(e=>{let t=(null==o?void 0:o.modelGroupId)===e.modelGroupId;return(0,h.jsx)(tG.MenuItem,{value:e,children:(0,h.jsx)(n$,{modelGroup:e,isSelected:t})},e.modelGroupId)})})},n$=e=>{let{modelGroup:t,isSelected:a}=e;return(0,h.jsxs)(tG.MenuItemContainer,{children:[(0,h.jsxs)(tG.MenuItemNameOuterContainer,{children:[(0,h.jsxs)(tG.MenuItemNameInnerContainer,{children:[(0,h.jsxs)(tG.MenuItemName,{children:[t.modelGroupIcon&&(0,h.jsx)(tG.IconImage,{src:t.modelGroupIcon,alt:`${t.name} icon`}),(0,tI.f)(t.name)]}),t.isNew&&(0,h.jsx)(tG.NewTag,{children:"New"})]}),a&&(0,h.jsx)(tG.MenuItemCheckIcon,{})]}),(0,h.jsx)(tG.MenuItemDescription,{children:t.description})]})},nD=e=>{let{modelGroup:t}=e,a=(0,eB._M)(),{trackImageGenEvent:i}=(0,m.W)(),{dispatch:n,state:{duration:o,resolution:l,source:d,modelGroupId:c,aspectRatio:p,enableAudio:g,lastFrameSource:x}}=(0,eZ.Cm)(),{isVisitor:y,isTrial:f,isFreeTrialTeam:j}=(0,R.f)(),{isVideoPaidEnabled:v}=(0,t4.Y)(),{handleJourneys:b,handleUpgradeJourneys:w}=(0,t4.f)(),{t:_}=(0,u.Bd)("visual-ai"),C=(0,e3.M6)(),T=(0,e4.F)(),I="none"!==d.type&&T,E=(0,e7.Ux)(),A=(0,e3.XN)(),k=a7(),N=!y&&!f&&!j,M=_(N?"prompt.upgrade":"prompt.subscribe"),O=(0,r.useMemo)(()=>t.supportedModels[0]?t.supportedModels[0].supportedAspectRatios:[],[t.supportedModels]),L="kling 1.6"===t.name.toLowerCase()&&(y||f);return(0,r.useEffect)(()=>{L&&"FULL_HD"===l&&n({type:"resolutionChosen",payload:"HD"})},[L,l,n]),(0,h.jsxs)(aN.o,{children:[(0,h.jsx)(nF,{value:c||null,onChange:e=>{let{newModelGroup:t,previousModelGroup:a}=e;k(S.JZ.imageToVideoAi,t.urlSlug),i({name:"gen AI model switched",new_value:t.name,old_value:(null==a?void 0:a.name)??null,generate_type:"image to video"})},onOpen:e=>{i({name:"button clicked",button_name:"gen ai models",gen_AI_tier:(null==e?void 0:e.name)??"unknown"})}}),(0,s.YW)({supportedAspectRatios:O,source:d}).with({supportedAspectRatios:[]},{source:{type:s.P.union("asset")}},()=>null).with({source:{type:s.P.union("url","showcaseExample","none")},supportedAspectRatios:s.P.nonNullable},()=>(0,h.jsx)(a9.K,{onOpen:()=>{i({name:"button clicked",button_name:"aspect ratio dropdown",click_source:"image to video text box",component:eL.$.SETTINGS_TEXT_BOX})},onChange:e=>{let{target:{value:t}}=e;i({name:"button clicked",button_name:(0,tv.PR)(t),click_source:"image to video text box",component:eL.$.SETTINGS_TEXT_BOX}),n({type:"aspectRatioChosen",payload:t})},value:p??void 0,children:O.map(e=>(0,h.jsxs)(a9.K.MenuItem,{value:e,children:[(0,h.jsx)(a9.K.AspectRatioIcon,{aspectRatio:e}),(0,tl.Ti)(e)]},e))})).exhaustive(),(0,h.jsxs)(ri,{onOpen:()=>{i({name:eL.$.BUTTON_CLICKED,button_name:"duration",click_source:eL.$.IMAGE_TO_VIDEO_TEXT_BOX,component:"settings text box"})},onChange:e=>{let{target:{value:t}}=e;i({name:eL.$.BUTTON_CLICKED,button_name:Number(t),click_source:eL.$.IMAGE_TO_VIDEO_TEXT_BOX,component:"settings text box",is_uploaded_photo:"url"===d.type,is_end_frame:"none"!==x.type,gen_AI_tier:(0,eB.Gl)(c,a.imageToVideo)}),N&&v&&n({type:"durationChosen",payload:t})},value:o,children:[(0,h.jsx)(ri.ListSubheader,{children:"Duration"}),(0,a4.Rg)(t).filter(e=>!!N&&!!v||10!==e).map(e=>(0,h.jsxs)(ri.MenuItem,{value:e,children:[e," Seconds"]},e)),(!N||!v)&&(0,h.jsx)(ri.NotAllowedMenuItem,{onClick:()=>{N?w(v,"upgrade",ea.e.DESKTOP_DURATION_SELECT):b("subscribe",ea.e.DESKTOP_DURATION_SELECT)},text:M,value:"10",children:"10 Seconds"})]}),(0,h.jsxs)(rn,{onOpen:()=>{i({name:eL.$.BUTTON_CLICKED,button_name:"resolution",click_source:eL.$.IMAGE_TO_VIDEO_TEXT_BOX,component:"settings text box"})},onChange:e=>{let{target:{value:t}}=e;i({name:eL.$.BUTTON_CLICKED,button_name:(0,tv.vO)(t),click_source:eL.$.IMAGE_TO_VIDEO_TEXT_BOX,component:"settings text box",is_uploaded_photo:"url"===d.type,is_end_frame:"none"!==x.type}),N&&v&&n({type:"resolutionChosen",payload:t})},value:l,children:[(0,h.jsx)(rn.ListSubheader,{children:"Resolution"}),(0,a4.xb)(t).filter(e=>!!N&&!!v||"FULL_HD"!==e).map(e=>(0,h.jsx)(rn.MenuItem,{value:e,children:(0,a3.I)(e).long},e)),(!N||!v)&&(0,h.jsx)(rn.NotAllowedMenuItem,{onClick:()=>{N?w(v,"upgrade",ea.e.DESKTOP_RESOLUTION_SELECT):b("subscribe",ea.e.DESKTOP_RESOLUTION_SELECT)},text:M,value:"FULL_HD",children:(0,a3.I)("FULL_HD").long})]}),I&&(0,h.jsx)(nU,{isLoading:E||A,onClick:()=>{"none"!==d.type&&(i({name:eL.$.BUTTON_CLICKED,click_source:eL.$.IMAGE_TO_VIDEO_TEXT_BOX,button_name:"Suggested prompt"}),C({imageUrl:d.imageUrl,styleId:d.styleId??""}))}}),(0,h.jsx)(rt,{variant:"desktop",isChecked:g,modelGroupName:t.name,supportedModels:t.supportedModels,audioIncluded:t.audioIncluded,clickSource:"image to video text box",onToggle:()=>n({type:"audioToggled"})})]})},nV=()=>(0,h.jsxs)(aN.o,{children:[(0,h.jsx)(aw.A,{style:{width:"120px",height:"44px",borderRadius:"9px",overflow:"hidden"}}),(0,h.jsx)(aw.A,{style:{width:"152px",height:"44px",borderRadius:"9px",overflow:"hidden"}}),(0,h.jsx)(aw.A,{style:{width:"164px",height:"44px",borderRadius:"9px",overflow:"hidden"}})]}),nX=()=>{let{state:{modelGroupId:e}}=(0,eZ.Cm)(),t=(0,eB._M)().imageToVideo.find(t=>t.modelGroupId===e);return t?(0,h.jsx)(nD,{modelGroup:t}):(0,h.jsx)(nV,{})},nW=()=>{let{t:e}=(0,u.Bd)("visual-ai");return(0,h.jsxs)("div",{className:"flex items-center text-gray-100 gap-2 font-medium text-sm",children:[(0,h.jsx)(i3.OU,{}),e("prompt.suggestedPrompt")]})},nz=e=>{let{t}=(0,u.Bd)("visual-ai"),a=(0,nA.A)();return(0,h.jsxs)("button",{type:"button",...e,className:"text-gray-50 text-sm inline-flex text-left font-medium gap-2 items-center",children:[(0,h.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"md:w-5 md:h-5",children:[(0,h.jsx)("rect",{width:"24",height:"24",rx:"4",fill:a.palette.grey[400]}),(0,h.jsx)("path",{d:"M7.31872 19C7.08902 19 6.89664 18.9265 6.74159 18.7796C6.58671 18.6329 6.50927 18.4507 6.50927 18.233C6.50927 18.0154 6.58671 17.8332 6.74159 17.6864C6.89664 17.5395 7.08902 17.4661 7.31872 17.4661H14.2548C15.3812 17.4661 16.3505 17.1137 17.1626 16.4089C17.975 15.7043 18.3811 14.8342 18.3811 13.7984C18.3811 12.7627 17.975 11.894 17.1626 11.1925C16.3505 10.4912 15.3812 10.1405 14.2548 10.1405H6.67737L9.11191 12.4473C9.26822 12.5956 9.34637 12.7752 9.34637 12.9862C9.34637 13.1972 9.26822 13.3768 9.11191 13.5251C8.95559 13.6732 8.76429 13.7457 8.53801 13.7424C8.31173 13.739 8.12394 13.6666 7.97464 13.5251L4.27602 10.0206C4.17493 9.92479 4.1037 9.82381 4.06233 9.71763C4.02078 9.61144 4 9.49674 4 9.37351C4 9.25029 4.02078 9.13558 4.06233 9.0294C4.1037 8.92322 4.17493 8.82223 4.27602 8.72645L7.97464 5.22217C8.13095 5.07406 8.32045 5 8.54314 5C8.766 5 8.95559 5.07406 9.11191 5.22217C9.26822 5.37028 9.34467 5.55154 9.34125 5.76595C9.33783 5.98019 9.26138 6.15812 9.11191 6.29976L6.67737 8.60655H14.2548C15.8336 8.60655 17.1858 9.10576 18.3115 10.1042C19.4372 11.1026 20 12.334 20 13.7984C20 15.2628 19.4372 16.4958 18.3115 17.4975C17.1858 18.4992 15.8336 19 14.2548 19H7.31872Z",fill:a.palette.common.white})]}),t("prompt.revertToSuggestedPrompt")]})},nK=e=>{let{textAreaRef:t}=e,{trackImageGenEvent:a}=(0,m.W)(),{dispatch:r,state:{prompt:i,suggestedPrompt:l,source:d}}=(0,eZ.Cm)(),c=(0,e7.Ux)(),u=(0,e3.XN)(),p=c||u||i===l;return(0,h.jsx)(n.N,{mode:"wait",initial:!1,children:"asset"===d.type||"showcaseExample"===d.type||"url"===d.type?(0,h.jsx)(o.P.div,{className:"flex",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:(0,s.YW)({isSuggestedPromptAvailable:!!l,isHeadingVisible:p}).with({isSuggestedPromptAvailable:!1},()=>null).with({isHeadingVisible:!0},()=>(0,h.jsx)(nW,{})).with({isHeadingVisible:!1},()=>(0,h.jsx)(nz,{onClick:()=>{var e;a({name:eL.$.BUTTON_CLICKED,button_name:"revert",click_source:eL.$.IMAGE_TO_VIDEO_TEXT_BOX}),r({type:"promptSuggestionRestored"}),null==(e=t.current)||e.focus()}})).exhaustive()},p?"suggested":"custom"):null})},nH=e=>{let{cost:t,error:a,generateVideoMutation:i,isAnimateButtonThrottled:n,handleGeneration:o,handleUpgradeJourneys:l,handleJourneys:c,shouldShowExceededCreditsLimit:p,shouldShowUpgrade:g,shouldShowSubscribe:x,isImageCreditsLeft:y,isContactSalesFlow:f,imageFreeGenerations:j,videoFreeGenerations:v,isSelectedModelRestricted:b,isVisitor:w,isTrial:_,isPaid:C,children:T}=e,I=(0,eB._M)(),{trackImageGenEvent:E}=(0,m.W)(),A=(0,r.useRef)(null),{t:k}=(0,u.Bd)("visual-ai"),{isSuite5m:N}=(0,R.f)(),{isAI4_992_500mCredits:S}=(0,aR.u)(),M=(0,e4.F)(),O=(0,i6.x)(),{dispatch:L,state:{duration:P,resolution:G,prompt:B,source:U,suggestedPrompt:F,modelGroupId:$}}=(0,eZ.Cm)(),{state:{styleId:D}}=(0,tb.A0)(),V=(0,e7.Ux)(),X=(0,e3.XN)(),W=(0,ij.p)(D),z=V||X,K=n||i.isLoading,H=null===a&&!K&&!z||w,Y=I.imageToVideo.find(e=>e.modelGroupId===$),J=null==Y?void 0:Y.name.toLowerCase().includes("sora"),Q="none"!==U.type&&M;return(0,h.jsxs)(aA,{children:[(0,h.jsx)(a_,{children:(0,h.jsxs)(d.A,{gap:1.5,direction:"row",alignItems:"center",children:[(0,h.jsx)(aP.PromptModeToggle,{}),(0,h.jsxs)(ab,{children:[(0,h.jsx)(ab.TextToVideoTab,{}),(0,h.jsx)(ab.ImageToVideoTab,{})]})]})}),(0,h.jsxs)(aC,{children:[(0,h.jsxs)(d.A,{direction:"column",gap:1,children:[T,(0,h.jsxs)(nP,{children:[!Q&&(0,h.jsx)(nK,{textAreaRef:A}),z?(0,h.jsx)(aT,{}):(0,h.jsxs)(h.Fragment,{children:[Q&&(0,h.jsx)(nK,{textAreaRef:A}),(0,h.jsx)(ak,{ref:A,autoFocus:!0,name:"prompt",rows:2,placeholder:"none"===U.type?"":k("prompt.video.placeholder.desktop"),"aria-label":"prompt text",value:B,onChange:e=>{let t=0===B.length&&1===e.target.value.length,a=B.length>1&&1===e.target.value.length;if(t||a){var r;E({name:eL.$.START_FREE_TEXT_TYPE,gen_AI_tier:(0,eB.Gl)($,I.imageToVideo),click_source:eL.$.IMAGE_TO_VIDEO_TEXT_BOX,style:(null==(r=W.data)?void 0:r.name)??"",resolution:(0,tv.vO)(G),duration:(0,tv.dt)(P),is_pasted:!1,is_suggested_prompt:!1})}L({type:"promptUpdated",payload:e.target.value})},onPaste:e=>{var t;let a=e.clipboardData.getData("text"),r=null!==F&&a.trim()===F.trim();E({name:eL.$.START_FREE_TEXT_TYPE,click_source:eL.$.IMAGE_TO_VIDEO_TEXT_BOX,style:(null==(t=W.data)?void 0:t.name)??"",resolution:(0,tv.vO)(G),duration:(0,tv.dt)(P),is_pasted:!0,is_suggested_prompt:r,gen_AI_tier:(0,eB.Gl)($,I.imageToVideo)})},disabled:"none"===U.type})]})]})]}),(0,h.jsx)(aG,{children:(0,s.YW)({error:a,shouldShowExceededCreditsLimit:p,isShowUpgrade:g&&!N&&!S&&!O,shouldShowSubscribe:x||O,isSelectedModelGroupNameContainingSora:J}).with({shouldShowExceededCreditsLimit:!0},()=>(0,h.jsx)(a5,{handleJourneys:l})).with({isShowUpgrade:!0},()=>(0,h.jsx)(a0,{buttonText:k(f?"prompt.contactSales":"prompt.upgradeNow"),text:k(y?"prompt.creditsLimitReachedVideos":"prompt.creditsLimitReached"),keepText:k(y?"prompt.moreCreditsVideo":"prompt.moreCredits"),handleJourneys:l})).with({shouldShowSubscribe:!0},()=>(0,h.jsx)(a0,{buttonText:O?"Subscribe now to generate videos":k(f?"prompt.contactSales":"prompt.subscribeNow"),text:O?"":k(y?"prompt.creditsLimitReachedVideos":"prompt.limitReached"),keepText:O?"":k(y?"prompt.moreCreditsVideo":"prompt.keepGenerating"),handleJourneys:c})).with({error:s.P.instanceOf(t3.gN)},e=>{let{error:t}=e;return(0,h.jsx)(a$,{"aria-label":t.message,children:t.message})}).with({error:s.P.instanceOf(t3.OE)},()=>(0,h.jsx)(aD,{})).with({error:s.P.instanceOf(t3.AA)},()=>null===F?(0,h.jsx)(aW,{}):(0,h.jsx)(aK,{})).with({error:s.P.instanceOf(t3.o1)},()=>(0,h.jsx)(aV,{})).with({error:s.P.instanceOf(t3.bg)},()=>(0,h.jsx)(aH,{})).with({error:s.P.instanceOf(t3.Ek)},()=>(0,h.jsx)(aY,{})).with({isSelectedModelGroupNameContainingSora:!0},()=>(0,h.jsx)(aZ,{})).otherwise(()=>null)})]}),(0,h.jsxs)(aE,{children:[(0,h.jsx)(aL,{children:(0,h.jsxs)("menu",{className:"flex gap-3",children:[(0,h.jsx)(nR,{}),(0,h.jsx)(nX,{})]})}),(0,h.jsx)(aO,{children:(0,h.jsx)(nL,{isMobile:!1,disabled:!H,cost:t,onClick:o,isLoading:K,imageFreeGenerations:j,videoFreeGenerations:v,isVisitor:w,isSelectedModelRestricted:b,isTrial:_,isPaid:C})})]})]})},nY=()=>(0,h.jsx)("div",{className:"text-gray-150 p-2 border-gray-500 border-solid border rounded-lg w-22 h-22 flex flex-col gap-1 items-center justify-center",children:(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)(er.A,{size:"24px",variant:"determinate",thickness:5,value:100,sx:e=>({color:e.palette.grey[300]})}),(0,h.jsx)(er.A,{size:"24px",thickness:5,sx:e=>({position:"absolute",top:0,left:0,color:e.palette.grey[50],[`& .${ei.A.circle}`]:{strokeLinecap:"round"}})})]})}),nJ=(0,rv.eU)(!1);var nQ=a(43853),nq=a(61723);let nZ=e=>{let{mutation:t}=e,{t:a}=(0,u.Bd)("visual-ai"),[i,n]=(0,rh.fp)(nJ),s=(0,rh.Xr)(rb),o=(0,rh.md)(rw),{dispatch:l,state:d}=(0,eZ.Cm)(),{trackImageGenEvent:c}=(0,m.W)(),g=(0,r.useRef)(null),{data:x}=e5(),y=(0,e3.M6)(),f=(0,e4.F)(),j="lastFrame"===o,v=()=>{n(!1)},b=async e=>{e&&e.length>0&&g.current&&(t.reset(),t.mutate({files:e,canvas:g.current,uploadSource:"os-dialog",maxSizeInMb:10},{onSuccess:e=>{let{downloadUrl:t,image:a}=e;if(l({type:j?"lastFrameUrlChosen":"urlChosen",payload:{imageUrl:t,aspectRatio:(0,Q.j)(a).aspectRatio||p.gl.SQUARE,styleId:null==x?void 0:x.id}}),x&&!f){if(j&&"none"!==d.source.type)return void y({imageUrl:d.source.imageUrl??"",lastFrameImageUrl:t,styleId:x.id});y({imageUrl:t,styleId:x.id})}v()},onError:e=>{let t=e0(e);Y.A.error(t)}}))};return(0,h.jsxs)(nq.Ay,{open:i,onClose:v,keepMounted:!0,anchor:"bottom",slotProps:{root:{sx:{zIndex:1400}},paper:{sx:{borderTopLeftRadius:"20px",borderTopRightRadius:"20px",padding:"0"}}},children:[(0,h.jsxs)(rU.W.MenuList,{children:[(0,h.jsxs)(rU.W.MenuItem,{onClick:()=>{v(),c({name:"button clicked",button_name:"Upload Images",click_source:"image to video text box"})},className:"relative",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2 text-gray-100",children:[(0,h.jsx)(i3.JM,{}),(0,h.jsx)("span",{className:"text-gray-25",children:a("imageToVideo.mobileDrawer.uploadImage")})]}),(0,h.jsx)(ev,{handleInputUpload:e=>{let{files:t}=e.target;t&&t.length&&b(t)},uploadImageInputId:"mobile-drawer"}),(0,h.jsx)("label",{htmlFor:"image-gen-upload-image-mobile-drawer",className:"absolute inset-0 cursor-pointer","aria-label":"Upload"})]}),(0,h.jsx)(rU.W.MenuItem,{onClick:()=>{v(),s(!0)},children:(0,h.jsxs)("div",{className:"flex items-center gap-2 text-gray-100",children:[(0,h.jsx)(i3.sC,{}),(0,h.jsx)("span",{className:"text-gray-25",children:a("imageToVideo.mobileDrawer.fromMyCreations")})]})}),(0,h.jsx)(rU.W.MenuItem,{onClick:v,children:(0,h.jsxs)("div",{className:"flex items-center gap-2 text-gray-100",children:[(0,h.jsx)(eo.g,{icon:nQ.GR}),(0,h.jsx)("span",{className:"text-gray-25",children:a("imageToVideo.mobileDrawer.close")})]})})]}),(0,h.jsx)("canvas",{ref:g,className:"hidden w-64 h-64"})]})},n0=e=>{let{onClick:t}=e,{t:a}=(0,u.Bd)("visual-ai");return(0,h.jsx)("div",{className:"absolute inset-0 top-4.5 right-4.5",children:(0,h.jsx)("button",{className:"w-7 h-7 absolute bg-gray-800/80 rounded-full hover:bg-gray-300 transition-background",style:{top:"-10px",right:"-10px"},type:"button",onClick:t,"aria-label":a("imageToVideo.removeSelectedImage"),children:(0,h.jsx)(eo.g,{icon:es.yY})})})},n1=e=>{let{uploadImageInputId:t,mutation:a,children:r}=e,{state:{source:i},dispatch:n}=(0,eZ.Cm)(),{data:s}=e5(),o=(0,e3.wq)(),l=(0,e7.Ux)(),d=(0,e3.XN)(),c=(0,e4.F)();return nu(a,i),(0,h.jsxs)(eb,{isPromptBeingSuggested:l,isCustomPromptBeingSuggested:d,setCurrentImage:(e,t)=>{n({type:"urlChosen",payload:{imageUrl:e,aspectRatio:t,styleId:null==s?void 0:s.id}}),s&&!c&&o.mutate({imageUrl:e,styleId:s.id})},uploadAndValidateImageMutation:a,hasImage:"none"!==i.type,removeSelectedImage:()=>{n({type:"imageReset"}),a.reset()},uploadImageInputId:t,children:[(0,h.jsx)(nh,{mutation:a,source:i,onError:()=>{n({type:"imageReset"})}}),r]})},n2=e=>{let{modelGroup:t,modelGroups:a}=e,i=(0,r.useRef)(null),[n,o]=rW({type:"closed"}),{dispatch:l,state:c}=(0,eZ.Cm)(),{trackImageGenEvent:g}=(0,m.W)(),{isFeatureEnabled:x}=rV(),{t:y}=(0,u.Bd)("visual-ai"),f=a7(),{isVisitor:j,isTrial:v}=(0,R.f)(),b="kling 1.6"===t.name.toLowerCase()&&(j||v);(0,r.useEffect)(()=>{b&&"FULL_HD"===c.resolution&&l({type:"resolutionChosen",payload:"HD"})},[b,c.resolution,l]);let w=()=>{o({type:"menuOpened"})},_=e=>{let r=a.find(e=>e.modelGroupId===t.modelGroupId);g({name:eL.$.MODEL_SWITCHED,new_value:e.name,old_value:(null==r?void 0:r.name)??null,generate_type:eL.$.IMAGE_TO_VIDEO}),f(S.JZ.imageToVideoAi,e.urlSlug)},C=(0,r.useMemo)(()=>t.supportedModels[0]?t.supportedModels[0].supportedAspectRatios:[],[t.supportedModels]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.Anchor,{ref:i,children:(0,h.jsxs)(rF.Button,{onClick:()=>{g(at),o({type:"menuOpened"})},children:[(0,h.jsx)(rF.SettingsIcon,{}),x?(0,h.jsx)(rF.ButtonText,{children:(0,tI.f)(t.name)}):(0,h.jsx)(rF.ButtonText,{children:y("creation.settings")})]})}),(0,h.jsx)(rF,{anchorElement:i.current,isOpen:"open"===n.type||"submenuOpen"===n.type,children:(0,h.jsx)(rF.MenuContainer,{onClickAway:()=>o({type:"menuClosed"}),children:(0,s.YW)(n).with({type:"closed"},()=>null).with({type:"open"},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(rF.MenuItem,{value:"model-group",onClick:()=>{g({name:eL.$.BUTTON_CLICKED,button_name:"gen ai models",gen_AI_tier:t.name}),o({type:"submenuActivated",payload:"model-group"})},children:[(0,h.jsx)(d.A,{direction:"row",gap:1,children:(0,h.jsxs)(rF.MenuItemText,{children:[(0,tI.f)(t.name)," Model"]})}),(0,h.jsx)(rF.MenuItemChevron,{})]}),(0,h.jsxs)(rF.MenuItem,{value:"resolution",onClick:()=>{g({name:eL.$.BUTTON_CLICKED,button_name:"resolution",click_source:eL.$.IMAGE_TO_VIDEO_TEXT_BOX,component:eL.$.SETTINGS_TEXT_BOX}),o({type:"submenuActivated",payload:"resolution"})},children:[(0,h.jsx)(rF.MenuItemText,{children:(0,a3.I)(c.resolution).long}),(0,h.jsx)(rF.MenuItemChevron,{})]}),(0,s.YW)({supportedAspectRatios:C,source:c.source}).with({supportedAspectRatios:[]},{source:{type:s.P.union("asset")}},()=>null).with({source:{type:s.P.union("url","showcaseExample","none")},supportedAspectRatios:s.P.nonNullable},()=>(0,h.jsxs)(rF.MenuItem,{value:"aspect ratio",onClick:()=>{g({name:eL.$.BUTTON_CLICKED,button_name:"aspect ratio dropdown",click_source:eL.$.IMAGE_TO_VIDEO_TEXT_BOX,component:eL.$.SETTINGS_TEXT_BOX}),o({type:"submenuActivated",payload:"aspect ratio"})},children:[(0,h.jsx)(rF.MenuItemText,{children:(0,tl.Ti)(c.aspectRatio)}),(0,h.jsx)(rF.MenuItemChevron,{})]})).exhaustive(),(0,h.jsxs)(rF.MenuItem,{value:"duration",onClick:()=>{g({name:eL.$.BUTTON_CLICKED,button_name:"duration",click_source:eL.$.IMAGE_TO_VIDEO_TEXT_BOX,component:eL.$.SETTINGS_TEXT_BOX,gen_AI_tier:t.name}),o({type:"submenuActivated",payload:"duration"})},children:[(0,h.jsxs)(rF.MenuItemText,{children:[c.duration," Sec"]}),(0,h.jsx)(rF.MenuItemChevron,{})]})]})).with({type:"submenuOpen",activeSubmenu:"model-group"},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.MenuItem,{value:"back",onClick:w,children:(0,h.jsxs)(rF.MenuItemText,{children:[(0,h.jsx)(eo.g,{icon:rP.Ce})," Back to settings"]})}),(0,h.jsx)(rJ,{modelGroupId:t.modelGroupId,setModelGroup:_,modelGroups:a})]})).with({type:"submenuOpen",activeSubmenu:"resolution"},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.MenuItem,{value:"back",onClick:w,children:(0,h.jsxs)(rF.MenuItemText,{children:[(0,h.jsx)(eo.g,{icon:rP.Ce})," Back to settings"]})}),(0,h.jsx)(rQ,{resolution:c.resolution,setResolution:e=>l({type:"resolutionChosen",payload:e}),options:(0,a4.xb)(t)})]})).with({type:"submenuOpen",activeSubmenu:"duration"},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.MenuItem,{value:"back",onClick:w,children:(0,h.jsxs)(rF.MenuItemText,{children:[(0,h.jsx)(eo.g,{icon:rP.Ce})," Back to settings"]})}),(0,h.jsx)(rY,{duration:c.duration,setDuration:e=>l({type:"durationChosen",payload:e}),options:(0,a4.Rg)(t)})]})).with({type:"submenuOpen",activeSubmenu:"aspect ratio"},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.MenuItem,{value:"back",onClick:w,children:(0,h.jsxs)(rF.MenuItemText,{children:[(0,h.jsx)(eo.g,{icon:rP.Ce})," Back to settings"]})}),(0,h.jsx)(rH,{aspectRatio:c.aspectRatio??p.gl.LANDSCAPE_16X9,setAspectRatio:e=>l({type:"aspectRatioChosen",payload:e}),options:C})]})).exhaustive()})})]})},n5=e=>{let{modelGroup:t,modelGroups:a}=e,{dispatch:r,state:{enableAudio:i}}=(0,eZ.Cm)();return(0,h.jsxs)(d.A,{width:"100%",direction:"row",alignContent:"center",justifyContent:"space-between",children:[(0,h.jsx)(n2,{modelGroup:t,modelGroups:a}),(0,h.jsx)(rt,{variant:"mobile",isChecked:i,modelGroupName:t.name,supportedModels:t.supportedModels,audioIncluded:t.audioIncluded,clickSource:"image to video text box",onToggle:()=>r({type:"audioToggled"})})]})},n4=()=>(0,h.jsx)(aw.A,{style:{width:"106px",height:"44px",borderRadius:"9px",overflow:"hidden"}}),n6=()=>{let{state:{modelGroupId:e}}=(0,eZ.Cm)(),t=(0,eB._M)();return(0,s.YW)({modelGroupId:e}).with({modelGroupId:s.P.nullish},()=>(0,h.jsx)(n4,{})).with({modelGroupId:s.P.nonNullable},e=>{let{modelGroupId:a}=e;return(0,h.jsx)(n5,{modelGroup:t.imageToVideo.find(e=>e.modelGroupId===a),modelGroups:t.imageToVideo})}).exhaustive()},n3=()=>(0,h.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,h.jsx)(aw.A,{className:"w-[85%] h-4"}),(0,h.jsx)(aw.A,{className:"w-[75%] h-4"}),(0,h.jsx)(aw.A,{className:"w-[82%] h-4"}),(0,h.jsx)(aw.A,{className:"w-1/2 h-4"})]}),n7=()=>{let{t:e}=(0,u.Bd)("visual-ai");return(0,h.jsxs)("div",{className:"flex items-center text-gray-100 gap-2 font-medium text-base",children:[(0,h.jsx)(i3.BT,{}),e("prompt.suggestedPrompt")]})},n9=e=>{let{t}=(0,u.Bd)("visual-ai");return(0,h.jsxs)("button",{type:"button",...e,className:"text-gray-50 font-medium text-sm inline-flex text-left gap-2 items-center",children:[(0,h.jsx)("svg",{width:"34",height:"34",viewBox:"0 0 34 34",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("path",{d:"M10.8558 26C10.5543 26 10.3018 25.9056 10.0983 25.7167C9.89506 25.528 9.79342 25.2937 9.79342 25.0139C9.79342 24.7341 9.89506 24.4998 10.0983 24.3111C10.3018 24.1222 10.5543 24.0278 10.8558 24.0278H19.9595C21.4379 24.0278 22.71 23.5747 23.776 22.6686C24.8421 21.7627 25.3752 20.6439 25.3752 19.3122C25.3752 17.9806 24.8421 16.8638 23.776 15.9618C22.71 15.0601 21.4379 14.6092 19.9595 14.6092H10.014L13.2094 17.5751C13.4145 17.7657 13.5171 17.9967 13.5171 18.268C13.5171 18.5393 13.4145 18.7702 13.2094 18.9609C13.0042 19.1513 12.7531 19.2444 12.4561 19.2403C12.1591 19.2359 11.9127 19.1427 11.7167 18.9609L6.86228 14.455C6.7296 14.3319 6.6361 14.202 6.5818 14.0655C6.52727 13.929 6.5 13.7815 6.5 13.6231C6.5 13.4647 6.52727 13.3172 6.5818 13.1807C6.6361 13.0441 6.7296 12.9143 6.86228 12.7911L11.7167 8.28564C11.9219 8.09521 12.1706 8 12.4629 8C12.7554 8 13.0042 8.09521 13.2094 8.28564C13.4145 8.47607 13.5149 8.70912 13.5104 8.98479C13.5059 9.26024 13.4056 9.48901 13.2094 9.67112L10.014 12.637H19.9595C22.0316 12.637 23.8064 13.2788 25.2838 14.5625C26.7613 15.8462 27.5 17.4294 27.5 19.3122C27.5 21.195 26.7613 22.7804 25.2838 24.0682C23.8064 25.3561 22.0316 26 19.9595 26H10.8558Z",fill:"white"})}),t("prompt.revertToSuggestedPrompt")]})},n8=e=>{let{mutation:t,isVisitor:a}=e,r=(0,rh.Xr)(rb),i=()=>{H.default.trigger(J.yV.SIGN_UP__MODAL__OPEN)};return(0,h.jsxs)(i1,{selectedImageSection:(0,h.jsx)(n1,{uploadImageInputId:"mobile",mutation:t}),children:[(0,h.jsxs)(i1.OptionContainer,{children:[(0,h.jsx)(b,{}),"Upload",(0,h.jsx)("label",{onClick:e=>{a&&(e.preventDefault(),i())},className:"absolute inset-0 cursor-pointer",htmlFor:"image-gen-upload-image-mobile"})]}),(0,h.jsxs)(i1.OptionContainerButton,{onClick:()=>{a?i():r(!0)},children:[(0,h.jsx)(ti.Q,{className:"w-8 h-8"}),"My Creations"]}),(0,h.jsx)(na,{mutation:t})]})},se=()=>{let{t:e}=(0,u.Bd)("visual-ai");return(0,h.jsxs)("div",{className:"flex items-center text-gray-100 gap-2 font-medium text-xs",children:[(0,h.jsx)(i3.Xy,{}),e("prompt.suggestedPrompt")]})},st=()=>{let{dispatch:e}=(0,eZ.Cm)(),t=(0,e7.XO)(),[a,r]=(0,rh.fp)(rw),i=(0,e4.F)();return(0,h.jsx)(i5,{onConfirmSelection:n=>{e({type:"lastFrame"===a?"lastFrameAssetChosen":"assetChosen",payload:n}),r("firstFrame"),i||t.mutate({imageAssetId:n.imageAssetId})}})},sa=e=>{let{image:t,lastFrameImage:a,mutation:r}=e,{dispatch:i,state:{lastFrameSource:n,source:o}}=(0,eZ.Cm)(),l=(0,rh.Xr)(nJ),c=(0,rh.Xr)(rw),{isUploading:u,isValidating:p}=r,m=e=>{c(e),l(!0)};return(0,h.jsxs)(d.A,{gap:2,className:"flex-grow",children:[(0,h.jsx)(n6,{}),(0,h.jsxs)(d.A,{gap:2,direction:"row",children:[(0,s.YW)({isUploading:u,isValidating:p,isWithLastFrameImage:!!a,source:o}).with({isUploading:!0,source:{type:"none"}},{isValidating:!0,source:{type:"none"}},()=>(0,h.jsx)(rA,{children:(0,h.jsx)(nY,{})})).with({isUploading:!1,isValidating:!1},{isUploading:!0,source:{type:s.P.union("url","asset","showcaseExample")}},{isValidating:!0,source:{type:s.P.union("url","asset","showcaseExample")}},()=>(0,h.jsxs)(rA,{children:[(0,h.jsx)("button",{type:"button",onClick:()=>m("firstFrame"),children:t}),"none"!==o.type&&(0,h.jsx)(n0,{onClick:()=>{i({type:"imageRemoved"})}})]})).exhaustive(),(0,s.YW)({isUploading:u,isValidating:p,isWithLastFrameImage:!!a,lastFrameSource:n}).with({isWithLastFrameImage:!1},()=>null).with({isUploading:!0,lastFrameSource:{type:"none"}},{isValidating:!0,lastFrameSource:{type:"none"}},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(ii,{}),(0,h.jsx)(rA,{children:(0,h.jsx)(nY,{})})]})).with({isUploading:!1,isValidating:!1},{isUploading:!0,lastFrameSource:{type:s.P.union("url","asset","showcaseExample")}},{isValidating:!0,lastFrameSource:{type:s.P.union("url","asset","showcaseExample")}},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(ii,{}),(0,h.jsxs)(rA,{children:[(0,h.jsx)("button",{type:"button",onClick:()=>m("lastFrame"),children:a}),"none"!==n.type&&(0,h.jsx)(n0,{onClick:()=>{i({type:"lastFrameImageRemoved"})}})]})]})).exhaustive()]})]})},sr=r.forwardRef((e,t)=>{let{cost:a,handleGeneration:i,image:n,lastFrameImage:o,error:l,isAnimateButtonThrottled:c,generateVideoMutation:p,handleUpgradeJourneys:g,handleJourneys:x,shouldShowExceededCreditsLimit:y,shouldShowUpgrade:f,shouldShowSubscribe:j,isImageCreditsLeft:v,shouldShowCost:b,isContactSalesFlow:w,imageFreeGenerations:_,videoFreeGenerations:C,isSelectedModelRestricted:T,isVisitor:I,isTrial:E,isPaid:A}=e,k=(0,eB._M)(),{trackImageGenEvent:N}=(0,m.W)(),{t:S}=(0,u.Bd)("visual-ai");(0,R.f)();let M=(0,i6.x)(),{isFeatureEnabled:O}=rV(),{state:L,dispatch:P}=(0,eZ.Cm)(),{prompt:G,suggestedPrompt:B,source:U,lastFrameSource:F}=L,$=(0,r.useRef)(null),{state:{styleId:D}}=(0,tb.A0)(),V=(0,e7.Ux)(),X=(0,e3.XN)(),W=(0,e3.M6)(),z=(0,e4.F)(),K=(0,ij.p)(D),H=(0,rh.md)(rb),Y=e1({supplementalKey:eP.ty,imageIndex:0}),J=(0,tj.r)(),Q=c||p.isLoading,q=null===l&&!Q,Z=k.imageToVideo.find(e=>e.modelGroupId===L.modelGroupId),ee=null==Z?void 0:Z.name.toLowerCase().includes("sora");(0,r.useImperativeHandle)(t,()=>({focus:()=>{var e;null==(e=$.current)||e.focus()}}),[]);let et=()=>{P({type:"promptSuggestionRestored"}),N({name:"button clicked",button_name:"revert",click_source:"image to video text box"})},ea=()=>{"none"!==U.type&&(N({name:eL.$.BUTTON_CLICKED,click_source:eL.$.IMAGE_TO_VIDEO_TEXT_BOX,button_name:"Suggested prompt"}),W({imageUrl:U.imageUrl,styleId:U.styleId??""}))},er=(0,h.jsxs)(ab,{children:[(0,h.jsx)(ab.TextToVideoTab,{}),(0,h.jsx)(ab.ImageToVideoTab,{})]});return(0,h.jsx)(rM,{cost:a,placeholder:S("prompt.video.placeholder.mobileSmall"),canGenerate:q,handleGenerate:i,shouldShowCost:b,prompt:G,sources:[U],isGenerateFromImageMode:!0,suggestedPromptHeading:L.prompt===L.suggestedPrompt?(0,h.jsx)(se,{}):null,promptTabs:er,children:(0,h.jsxs)(rI,{children:[(0,s.YW)({source:U,lastFrameSource:F,isSelectCreationViewVisible:H,isVisualAiMobileEnabled:O,isPromptLoading:V||X}).with({isSelectCreationViewVisible:!0},()=>(0,h.jsx)(st,{})).with({source:{type:"none"},lastFrameSource:{type:"none"},isVisualAiMobileEnabled:!0},()=>(0,h.jsxs)(h.Fragment,{children:[er,(0,h.jsx)(nR,{}),(0,h.jsx)(n6,{}),(0,h.jsx)(n8,{mutation:Y,isVisitor:I})]})).with({source:{type:"none"},lastFrameSource:{type:"none"},isVisualAiMobileEnabled:!1},()=>(0,h.jsxs)(h.Fragment,{children:[er,(0,h.jsx)(n8,{mutation:Y,isVisitor:I})]})).with({source:{type:s.P.union("asset","url","showcaseExample","none")},lastFrameSource:{type:s.P.union("asset","url","showcaseExample","none")},isPromptLoading:!1},()=>{var e;return(0,h.jsxs)("div",{className:"flex flex-1 flex-col gap-6 h-full",children:[er,(0,h.jsx)(nR,{}),(0,h.jsxs)(d.A,{direction:"row",justifyContent:"space-between",className:"w-full",gap:2,children:[(0,h.jsx)(sa,{image:n,lastFrameImage:J&&o,mutation:Y}),z&&(0,h.jsx)(nU,{isLoading:!1,onClick:ea})]}),!!B&&(B===G?(0,h.jsx)(n7,{}):(0,h.jsx)(n9,{onClick:et})),(0,h.jsxs)(rS,{children:[(0,h.jsx)(aI,{className:"flex-1",placeholder:S("prompt.video.placeholder.mobile"),value:G,onChange:e=>{let t=0===G.length&&1===e.target.value.length,a=G.length>1&&1===e.target.value.length;if(t||a){var r;N({name:eL.$.START_FREE_TEXT_TYPE,click_source:"image to video text box",style:(null==(r=K.data)?void 0:r.name)??"",resolution:(0,tv.vO)(L.resolution),duration:(0,tv.dt)(L.duration),is_pasted:!1,is_suggested_prompt:!1,gen_AI_tier:(0,eB.Gl)(L.modelGroupId,k.imageToVideo)})}P({type:"promptUpdated",payload:e.target.value})},onPaste:e=>{var t;let a=e.clipboardData.getData("text"),r=null!==B&&a.trim()===B.trim();N({name:eL.$.START_FREE_TEXT_TYPE,click_source:"image to video text box",style:(null==(t=K.data)?void 0:t.name)??"",resolution:(0,tv.vO)(L.resolution),duration:(0,tv.dt)(L.duration),is_pasted:!0,is_suggested_prompt:r,gen_AI_tier:(0,eB.Gl)(L.modelGroupId,k.imageToVideo)})},ref:$,disabled:!1,autoFocus:!0}),(0,h.jsxs)(rk,{children:[(0,s.YW)({error:l,warning:null==(e=Y.data)?void 0:e.warning,shouldShowExceededCreditsLimit:y,shouldShowUpgrade:f&&!M,shouldShowSubscribe:j||M,isSelectedModelGroupNameContainingSora:ee}).with({shouldShowExceededCreditsLimit:!0},()=>(0,h.jsx)(a5,{handleJourneys:g})).with({shouldShowUpgrade:!0},()=>(0,h.jsx)(a0,{buttonText:S(w?"prompt.contactSales":"prompt.upgrade"),text:v?S("prompt.creditsLimitReachedVideos"):S("prompt.creditsLimitReached"),keepText:S(v?"prompt.moreCreditsVideo":"prompt.moreCredits"),handleJourneys:g})).with({shouldShowSubscribe:!0},()=>(0,h.jsx)(a0,{buttonText:M?"Subscribe now to generate videos":S(w?"prompt.contactSales":"prompt.subscribeNow"),text:M?"":S(v?"prompt.creditsLimitReachedVideos":"prompt.limitReached"),keepText:M?"":S(v?"prompt.moreCreditsVideo":"prompt.keepGenerating"),handleJourneys:x})).with({error:s.P.instanceOf(t3.gN)},e=>{let{error:t}=e;return(0,h.jsx)(a$,{"aria-label":t.message,children:t.message})}).with({error:s.P.instanceOf(t3.OE)},()=>(0,h.jsx)(aD,{})).with({error:s.P.instanceOf(t3.AA)},()=>null===B?(0,h.jsx)(aW,{}):(0,h.jsx)(aK,{})).with({error:s.P.instanceOf(t3.o1)},()=>(0,h.jsx)(aV,{})).with({error:s.P.instanceOf(t3.bg)},()=>(0,h.jsx)(aH,{})).with({error:s.P.instanceOf(t3.Ek)},()=>(0,h.jsx)(aY,{})).with({warning:"RESOLUTION_LOW"},()=>(0,h.jsx)(aq,{})).with({isSelectedModelGroupNameContainingSora:!0},()=>(0,h.jsx)(aZ,{})).otherwise(()=>null),(0,h.jsx)(nL,{isMobile:!0,disabled:!q,cost:a,onClick:i,isLoading:Q,isVisitor:I,imageFreeGenerations:_,videoFreeGenerations:C,isSelectedModelRestricted:T,isTrial:E,isPaid:A})]})]})]},"mobile-prompt-wrapper")}).with({source:{type:s.P.union("asset","url","showcaseExample","none")},lastFrameSource:{type:s.P.union("asset","url","showcaseExample","none")},isPromptLoading:!0},()=>(0,h.jsxs)("div",{className:"flex flex-col gap-6",children:[er,(0,h.jsx)(nR,{}),(0,h.jsxs)(d.A,{direction:"row",justifyContent:"space-between",className:"w-full",gap:2,children:[(0,h.jsx)(sa,{image:n,lastFrameImage:J&&o,mutation:Y}),z&&(0,h.jsx)(nU,{isLoading:!0,onClick:ea})]}),(0,h.jsx)(n7,{}),(0,h.jsx)(n3,{})]},"mobile-prompt-wrapper")).exhaustive(),(0,h.jsx)(nZ,{mutation:Y})]})})}),si={aspectRatio:null,dimensions:{imageHeight:null,imageWidth:null},creditCost:{imageGenerationCost:null,upscaleCost:null,videoGenerationFullHdCost:null,videoGenerationHdCost:null}},sn=e=>{var t;let a,{children:n}=e,o=(0,eB._M)(),{isBelowLG:l}=(0,t0.Qs)(),{state:d,dispatch:c}=(0,eZ.Cm)(),[,g]=(0,t2.K)(),x=(0,r.useRef)(null),[y,f]=(0,r.useState)(!1),{dimensions:j}=(e=>{let{data:t}=(0,im.h)("asset"===e.type?e.imageAssetId:null,{onError:e.onError}),{data:a}=(0,ij.p)("showcaseExample"===e.type?e.styleId:null),{data:i}=e5();return(0,r.useMemo)(()=>{var r;let n="showcaseExample"===e.type?null==a||null==(r=a.showcases)?void 0:r.find(t=>t.id===e.imageAssetId):void 0;return(0,s.YW)({...e,creation:t,example:n,style:a}).with({type:"asset",creation:{status:"succeeded"}},e=>{let{creation:{style:{creditCost:t},settings:{aspectRatio:a},metadata:r}}=e;return{aspectRatio:a,dimensions:r,creditCost:t}}).with({type:"showcaseExample",style:s.P.not(s.P.nullish),example:s.P.not(s.P.nullish)},e=>{let{style:{upscaleCost:t,imageGenerationCost:a,videoGenerationFullHdCost:r,videoGenerationHdCost:i},example:{aspectRatio:n,dimensions:{height:s,width:o}}}=e;return{aspectRatio:n,dimensions:{imageHeight:s,imageWidth:o},creditCost:{upscaleCost:t,imageGenerationCost:a,videoGenerationFullHdCost:r,videoGenerationHdCost:i}}}).with({type:"url"},()=>({aspectRatio:null,creditCost:{imageGenerationCost:(null==i?void 0:i.imageGenerationCost)||null,upscaleCost:(null==i?void 0:i.upscaleCost)||null,videoGenerationFullHdCost:(null==i?void 0:i.videoGenerationFullHdCost)||null,videoGenerationHdCost:(null==i?void 0:i.videoGenerationHdCost)||null},dimensions:{imageHeight:null,imageWidth:null}})).otherwise(()=>si)},[e,t,a,i])})({...d.source,onError:()=>c({type:"imageReset"})}),{isVisitor:v,isTrial:b,isVoiceOverFamilyPlan:w}=(0,R.f)(),{handleJourneys:_,handleUpgradeJourneys:C,isContactSalesFlow:T}=(0,t4.f)(),{closeFeatureIndicator:I}=(0,t9.Cs)(nI.jY),E=(0,t4.Y)(),A=(0,Z.D)(),k=(a=o.imageToVideo,(0,r.useMemo)(()=>{let e=d.modelGroupId?a.find(e=>e.modelGroupId===d.modelGroupId)??null:null;return(0,t6.KW)({state:d,modelGroup:e})},[d,a])),N=(e=>{let{cost:t,parentDimensions:a}=e,r=(0,eB._M)(),{trackImageGenEventWithCost:n}=(0,m.W)(),{t:o}=(0,u.Bd)("visual-ai"),l=(0,i.useRouter)(),d=(0,r4.useQueryClient)(),c=(0,i.useSearchParams)(),g=(0,$.useSession)(),{state:{prompt:h,suggestedPrompt:x,source:y,lastFrameSource:f}}=(0,eZ.Cm)(),j=(0,q.RZ)(),{data:v}=(0,ij.p)((0,s.YW)(y).with({type:s.P.union("asset","showcaseExample")},e=>{let{styleId:t}=e;return t}).with({type:s.P.union("none","url")},()=>null).exhaustive()),b=h!==x;return(0,B.useMutation)({mutationKey:["generate-video"],mutationFn:e=>{var t,a,i;let{source:n,lastFrameSource:o,...l}=e;if(!(null!=(t=g.data)&&t.accessToken))throw eK.e$.error("No access token when trying to generate video.",{userId:null==(a=g.data)?void 0:a.user.id}),Error("No access token when trying to generate video.");let d=r.imageToVideo.find(e=>e.modelGroupId===l.modelGroupId);if(!d){let e="Tried to generate a video from an image without a valid model group";throw eK.e$.error(e,{userId:null==(i=g.data)?void 0:i.user.id}),Error(e)}if("none"===n.type)throw new t3.Ek;if(h.length<1)throw new t3.AA;let c=(0,a4.$1)({options:{duration:l.duration,resolution:l.resolution,enableAudio:l.enableAudio},modelGroup:d});return"none"!==o.type&&null!=c&&c.endFrameSupported?(0,r6.uZ)({duration:l.duration,imageUrl:n.imageUrl,aspectRatio:l.aspectRatio?l.aspectRatio:"url"===n.type?n.aspectRatio:"url"===o.type?o.aspectRatio:p.gl.LANDSCAPE_16X9,prompt:l.prompt,resolution:l.resolution,styleId:n.styleId,generateType:rf.vE.IMAGE_TO_VIDEO,modelGroupId:l.modelGroupId,supportsAudio:l.enableAudio,lastFrameImageUrl:o.imageUrl},{accessToken:g.data.accessToken}):(0,s.YW)({...l,source:n}).with({source:{type:"asset"}},e=>(0,r6.ZN)({duration:e.duration,imageAssetId:e.source.imageAssetId,prompt:e.prompt,resolution:e.resolution,generateType:rf.vE.IMAGE_TO_VIDEO,modelGroupId:e.modelGroupId,supportsAudio:e.enableAudio},{accessToken:g.data.accessToken})).with({source:{type:s.P.union("url","showcaseExample")}},e=>(0,r6.uZ)({duration:e.duration,imageUrl:e.source.imageUrl,aspectRatio:e.aspectRatio??e.source.aspectRatio,prompt:e.prompt,resolution:e.resolution,styleId:e.source.styleId,generateType:rf.vE.IMAGE_TO_VIDEO,modelGroupId:e.modelGroupId,supportsAudio:e.enableAudio},{accessToken:g.data.accessToken})).exhaustive()},onMutate:async e=>{let a=r8(e.prompt),i=(0,tv.vO)(e.resolution),s=(0,tv.dt)(e.duration);n({name:"button clicked",button_name:"animate",click_source:"image to video text box",gen_AI_tier:(0,eB.Gl)(e.modelGroupId,r.imageToVideo),prompt_edited:b,total_words:a,style:(null==v?void 0:v.name)??"",resolution:i,duration:s,is_valid:!0,is_uploaded_photo:"url"===y.type,is_end_frame:"none"!==f.type},t??0,"video")},onSuccess:async(e,i)=>{let o={name:"generate start",gen_AI_tier:(0,eB.Gl)(i.modelGroupId,r.imageToVideo),duration:(0,tv.dt)(i.duration),generate_id:e.generationId,prompt_edited:b,resolution:(0,tv.vO)(i.resolution),style:(null==v?void 0:v.name)??"",total_words:r8(i.prompt),format:"MP4",image_asset_id:"asset"===i.source.type?i.source.imageAssetId:"",aspect_ratio:(0,s.YW)(i).with({aspectRatio:s.P.string},e=>{let{aspectRatio:t}=e;return(0,tv.PR)(t)}).with({source:{aspectRatio:s.P.string}},e=>{let{source:{aspectRatio:t}}=e;return(0,tv.PR)(t)}).otherwise(()=>"unknown"),dimensions:a?(0,tv.z4)(a):"unknown",is_uploaded_photo:"url"===y.type,is_end_frame:"none"!==i.lastFrameSource.type,generate_type:"image to video",media_type:"video ai",is_upscale:!1,is_audio_on:i.enableAudio,is_suggested_prompt:i.isSuggestedPrompt};"showcaseExample"===y.type?n({...o,click_source:y.source},t??0,"video"):n({...o,click_source:"image to video text box"},t??0,"video"),await d.invalidateQueries([eM.QN]),l.push(j(`/image-to-video-ai/creations?${c}`))},onError:(e,a)=>{let i=r8(a.prompt),l=(0,tv.vO)(a.resolution),d=(0,tv.dt)(a.duration);n({name:"button clicked",button_name:"animate",click_source:"image to video text box",gen_AI_tier:(0,eB.Gl)(a.modelGroupId,r.imageToVideo),prompt_edited:b,total_words:i,style:(null==v?void 0:v.name)??"",resolution:l,duration:d,is_valid:!1,is_uploaded_photo:"url"===y.type,is_end_frame:"none"!==f.type,message_text:(0,s.YW)(e).with(s.P.instanceOf(t3.OE),()=>o("prompt.rateLimitError")).with(s.P.instanceOf(t3.o1),()=>o("prompt.serverError")).with(s.P.instanceOf(t3.AA),()=>o("prompt.emptyVideoPromptError")).with(s.P.instanceOf(t3.bg),()=>o("prompt.inappropriatePromptError")).with(s.P.instanceOf(t3.Ek),()=>o("prompt.noSelectedImageError")).exhaustive()},t??0,"video")},onSettled:a1.gq})})({cost:k,parentDimensions:j});(e=>{let{state:t}=(0,eZ.Cm)();(0,r.useEffect)(()=>{e.error&&e.reset()},[t])})(N);let S=(e=>{let{prompt:t,mutation:a,characterLimit:i}=e,{trackImageGenEvent:n}=(0,m.W)(),s=(0,r.useMemo)(()=>(e=>{let{prompt:t,mutation:a,characterLimit:r}=e,i=t.length;return r&&i>r?new t3.gN(i,r):a.error?a.error:null})({prompt:t,mutation:a,characterLimit:i}),[t,a,i]);return(0,r.useEffect)(()=>{s&&n({name:"error annotated",error_message:s.message,component:"image to video text box"})},[s,n]),s})({prompt:d.prompt,mutation:N,characterLimit:(null==(t=o.imageToVideo.find(e=>e.modelGroupId===d.modelGroupId))?void 0:t.charLimit)??void 0}),M=!E.isLoading&&E.isVideoPaidEnabled&&!!k&&E.videoCreditsLeft<k,O=E.tierModels.some(e=>e.toLowerCase().includes("veo 3")||e.toLowerCase().includes("veo3")),L=!E.isLoading&&!M&&!v&&!b&&!("text-to-video-ai"===A&&!O)&&E.videoFreeGenerations<=0&&(E.videoCreditsLeft<(k??0)||0===E.videoCreditsLeft),P=(0,r.useMemo)(()=>{let e=o.imageToVideo.find(e=>e.modelGroupId===d.modelGroupId);if(!e)return!1;let t=e.name.toLowerCase();return 0===E.tierModels.length||w?"lite"!==t&&"kling 1.6"!==t:!E.tierModels.some(e=>e.toLowerCase()===t)},[o.imageToVideo,d.modelGroupId,E.tierModels,w]),G=!v&&!b,U=async()=>{nE.default.track({name:"button clicked",eventData:{button_name:"Animate",click_source:"gen ai generation box"}});let e=o.imageToVideo.find(e=>e.modelGroupId===d.modelGroupId);if(e){let t=e.name.toLowerCase();if(0===E.tierModels.length||w?"lite"!==t&&"kling 1.6"!==t:!E.tierModels.some(e=>e.toLowerCase()===t))return void(b||v?_("subscribe","gen AI model dropdown models"):C(E.isVideoPaidEnabled,"upgrade","gen AI model dropdown models"))}if(!(((b||v)&&"text-to-video-ai"===A||E.videoFreeGenerations<=0)&&_("Animate for free",ea.e.ANIMATE_BUTTON))){let e;if(e=k||0,(!E.isVideoPaidEnabled||!(E.videoCreditsLeft>=e))&&!(E.videoFreeGenerations>0))return void C(E.isVideoPaidEnabled,"Animate for free",ea.e.ANIMATE_BUTTON);I(),N.mutate({duration:d.duration,source:d.source,lastFrameSource:d.lastFrameSource,resolution:d.resolution,prompt:d.prompt,modelGroupId:d.modelGroupId,enableAudio:d.enableAudio,aspectRatio:d.aspectRatio,isSuggestedPrompt:d.prompt===d.suggestedPrompt},{onSuccess:()=>{g(!1)},onError:()=>{g(!0)}}),f(!0),await new Promise(e=>setTimeout(e,3e3)),f(!1)}},F=!!E.isVideoPaidEnabled||!v&&0===E.videoFreeGenerations;return(0,h.jsx)("div",{className:"flex-1","aria-label":"Video generation prompt",children:l?(0,h.jsx)(sr,{ref:x,cost:k,handleGeneration:U,image:(0,h.jsx)(iC,{source:d.source,sourceType:"firstFrame"}),lastFrameImage:(0,h.jsx)(iC,{source:d.lastFrameSource,sourceType:"lastFrame"}),isAnimateButtonThrottled:y,error:S,generateVideoMutation:N,handleUpgradeJourneys:(e,t)=>C(E.isVideoPaidEnabled,e,t),handleJourneys:_,shouldShowExceededCreditsLimit:M,shouldShowUpgrade:L,shouldShowSubscribe:E.shouldShowSubscribe,isImageCreditsLeft:!!E.imageCreditsLeft,shouldShowCost:F,isContactSalesFlow:T,imageFreeGenerations:E.imageFreeGenerations,videoFreeGenerations:E.videoFreeGenerations,isSelectedModelRestricted:P,isVisitor:!!v,isTrial:!!b,isPaid:G}):(0,h.jsx)(nH,{cost:k,error:S,generateVideoMutation:N,handleGeneration:U,isAnimateButtonThrottled:y,handleUpgradeJourneys:(e,t)=>C(E.isVideoPaidEnabled,e,t),handleJourneys:_,shouldShowExceededCreditsLimit:M,shouldShowUpgrade:L,shouldShowSubscribe:E.shouldShowSubscribe,isImageCreditsLeft:!!E.imageCreditsLeft,isContactSalesFlow:T,imageFreeGenerations:E.imageFreeGenerations,videoFreeGenerations:E.videoFreeGenerations,isSelectedModelRestricted:P,isVisitor:!!v,isTrial:!!b,isPaid:G,children:n})})},ss=()=>((()=>{let e="authenticated"===(0,$.useSession)().status,t=(0,is.x)(),{dispatch:a}=(0,tb.m1)(),i=(0,r.useRef)(e);(0,r.useEffect)(()=>{!e&&i.current&&a({type:"styleReset"}),i.current=e},[e,t])})(),null),so=e=>{let{children:t,isLoading:a}=e,{isBelowLG:i}=(0,t0.Qs)(),{shouldShowTooltip:n,closeTooltip:s}=(()=>{let{state:{prompt:e}}=(0,tb.A0)(),{isVisitor:t}=(0,R.f)(),a=(0,r.useRef)(e),{closeFeatureIndicator:i,showFeatureIndicator:n}=(0,t9.Cs)(au.wp),s=(0,au.Xm)(au.wp),o=!t&&!s;return(0,r.useEffect)(()=>{let t;return e&&a.current!==e&&o&&(t=setTimeout(()=>{n()},1200)),()=>clearTimeout(t)},[e,o]),{shouldShowTooltip:s,closeTooltip:()=>{i()}}})(),{t:o}=(0,u.Bd)("visual-ai");return((0,r.useEffect)(()=>{a&&s()},[a]),n)?(0,h.jsx)(ap.JM,{isFeatureTooltipShow:n,closeFeatureTooltip:s,title:o("prompt.enhanceButton.firstTimeTooltip"),placement:"top-end",description:o("prompt.enhanceButton.tooltipDescription"),zIndex:45*!!i,children:t},"first-time-tooltip"):(0,h.jsx)(nG.m,{text:o("prompt.enhanceButton.tooltip"),placement:"top",sx:{whiteSpace:"nowrap",backgroundColor:"gray.600"},children:t},"hover-tooltip")},sl=(0,r.forwardRef)((e,t)=>{let{disabled:a,isLoading:r,isGenerateLoading:i,...n}=e,{t:s}=(0,u.Bd)("visual-ai");return(0,h.jsx)(o.P.div,{layout:!0,layoutId:"image-gen-enhance-button",className:"relative z-2 group",children:(0,h.jsx)(so,{isLoading:r||!!i,children:(0,h.jsxs)("button",{type:"button",className:`
            focus-ring text-md flex h-11 w-11 items-center justify-center gap-1
            rounded-l-none duration-150 bg-gray-400 group-first:rounded-lg rounded-r-lg 
            lg:hover:bg-gray-400 group-first:lg:hover:bg-gray-300 lg:active:bg-gray-200 
            lg:w-27.5 disabled:bg-gray-500 disabled:text-black disabled:hover:bg-gray-500 
            transition-all
          `,disabled:a,"aria-label":s("prompt.enhanceButton.text"),ref:t,...n,children:[r?(0,h.jsxs)("div",{className:"w-6 flex items-center justify-center relative",children:[(0,h.jsx)(er.A,{size:"16px",variant:"determinate",thickness:6,value:100,sx:e=>({color:e.palette.grey[300]})}),(0,h.jsx)(er.A,{size:"16px",thickness:6,sx:e=>({position:"absolute",color:e.palette.grey[50],[`& .${ei.A.circle}`]:{strokeLinecap:"round"}})})]}):(0,h.jsx)(i3.OU,{}),(0,h.jsx)("span",{className:"hidden lg:inline-block",children:s("prompt.enhanceButton.text")})]})})})}),sd=e=>{let{disabled:t,...a}=e,{t:r}=(0,u.Bd)("visual-ai");return(0,h.jsx)(o.P.div,{initial:{x:"100%",scale:.9},animate:{x:0,scale:1},exit:{x:"100%",scale:.9},children:(0,h.jsx)(nG.m,{text:r("prompt.undoButton.tooltip"),placement:"top",sx:{maxWidth:320,backgroundColor:"gray.600"},children:(0,h.jsx)("button",{type:"button",className:`
            focus-ring text-md flex h-11 w-10 items-center justify-center gap-1 rounded-l-lg 
            rounded-r-none duration-150 bg-gray-400 disabled:bg-gray-500 disabled:text-black'
          `,disabled:t,"aria-label":r("prompt.undoButton.tooltip"),...a,children:(0,h.jsx)(i3.AA,{})})})})},sc=e=>{let{children:t}=e;return(0,h.jsx)("div",{className:"relative flex",children:(0,h.jsx)(aS.x,{transition:{type:"tween",ease:"circOut",duration:.15,layout:{type:"tween",ease:"circOut",duration:.15}},children:(0,h.jsx)(aN.o,{children:(0,h.jsx)(n.N,{mode:"popLayout",children:t})})})})},su=()=>(0,h.jsx)(o.P.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"z-2 my-2 -ml-px w-[1px] bg-gray-200"}),sp=Object.assign(e=>(0,h.jsx)(tN.Do,{ariaLabelPrefix:"image count",renderValue:e=>(0,h.jsx)("span",{className:"pr-2 lowercase",children:`${e} image${1===e?"":"s"}`}),...e}),{MenuItem:tN.rK,NotAllowedMenuItem:tN.sN}),sm=r.forwardRef((e,t)=>{var a;let{selectedStyleQuery:i,generateImageMutation:n,enhancePromptMutation:o,error:l,isGenerateButtonThrottled:c,cost:g,canUndo:x,handleGeneration:y,handleUpgradeJourneys:f,handleJourneys:j,creditsLeft:v,freeGenerations:b,isPaidEnabled:w,shouldShowCost:_,filterSlot:C}=e,{trackImageGenEvent:T}=(0,m.W)(),{t:I}=(0,u.Bd)("visual-ai"),{state:E,dispatch:A}=(0,tb.A0)(),{prompt:k,aspectRatio:N,imageCount:S,styleId:M}=E,O=(0,r.useRef)(null),{isVisitor:L,isTrial:P,isSuite5m:G,isFreeTrialTeam:B}=(0,R.f)(),{isPLJourney:U}=(0,t1.T)(),{isAI4_992_500mCredits:F}=(0,aR.u)(),$=!L&&!P&&!B,D=w&&!!g&&v<g,V=B||U,X=!D&&null!==b&&!L&&!P&&b<=0&&(v<(g??0)||0===v),W=c||n.isLoading,z=null!==M&&!o.isLoading&&null===l&&!W||L;(0,r.useImperativeHandle)(t,()=>({focus:()=>{var e;null==(e=O.current)||e.focus()}}),[]);let K=e=>{e?f("upgrade",ea.e.DESKTOP_DURATION_SELECT):j("subscribe",ea.e.DESKTOP_DURATION_SELECT)},H=G||F?"":I(w?"prompt.moreCredits":"prompt.keepGenerating"),Y=V?I("prompt.contactSales"):I($?"prompt.upgrade":"prompt.subscribe");return(0,h.jsxs)(aA,{children:[(0,h.jsxs)(a_,{children:[(0,h.jsxs)(d.A,{gap:1.5,direction:"row",alignItems:"center",children:[(0,h.jsx)(aP.PromptModeToggle,{}),(0,h.jsxs)(ab,{children:[(0,h.jsx)(ab.TextToImageTab,{}),(0,h.jsx)(ab.ImageToImageTab,{})]})]}),(0,h.jsxs)(sc,{children:[x?(0,h.jsxs)(r.Fragment,{children:[(0,h.jsx)(sd,{onClick:()=>{if(T(ai()),A({type:"changesUndone"}),O.current){var e;null==(e=O.current)||e.focus()}},disabled:o.isLoading}),(0,h.jsx)(su,{})]},"revert-button"):null,(0,h.jsx)(sl,{isLoading:o.isLoading,isGenerateLoading:n.isLoading,disabled:k.length<1||o.isLoading,onClick:()=>{L?j("enhance",ea.e.GENERATION_BOX):o.mutate({prompt:k??"",styleId:E.styleId})}})]})]}),(0,h.jsxs)(aC,{children:[(0,h.jsx)(ak,{ref:O,autoFocus:!0,name:"prompt",value:k,rows:3,onChange:e=>{let t=0===k.length&&1===e.target.value.length,a=k.length>1&&1===e.target.value.length;if(t||a){var r;T(ad({images:S,aspect_ratio:(0,tv.PR)(N),style:(null==(r=i.data)?void 0:r.name)??"",is_pasted:!1}))}A({type:"promptUpdated",payload:e.target.value})},onPaste:()=>{if(0===k.length){var e;T(ad({images:S,aspect_ratio:(0,tv.PR)(N),style:(null==(e=i.data)?void 0:e.name)??"",is_pasted:!0}))}},placeholder:I("prompt.image.placeholder.desktop"),"aria-label":"prompt text",disabled:o.isLoading,className:"min-h-[122px]"}),(0,h.jsx)(aG,{children:(0,s.YW)([l,E.promptWasRestored,D,X,P&&null!==b&&b<=0]).with([s.P.any,s.P.any,!0,s.P.any,s.P.any],()=>(0,h.jsx)(a5,{handleJourneys:f,isImageGenAmount:S})).with([s.P.any,s.P.any,s.P.any,!0,s.P.any],()=>(0,h.jsx)(a0,{buttonText:w?I("prompt.getMoreCredits"):I(V?"prompt.contactSales":"prompt.upgradeNow"),text:w?I("prompt.creditsLimitReached"):I("prompt.limitReached"),keepText:H,handleJourneys:f})).with([s.P.any,s.P.any,s.P.any,s.P.any,!0],()=>(0,h.jsx)(a0,{buttonText:I(V?"prompt.contactSales":"prompt.subscribeNow"),text:I("prompt.limitReached"),keepText:I("prompt.keepGenerating"),handleJourneys:j})).with([s.P.instanceOf(t3.gN),s.P.any,s.P.any,s.P.any,s.P.any],e=>{let[t]=e;return(0,h.jsx)(a$,{"aria-label":t.message,children:t.message})}).with([s.P.instanceOf(t3.OE),s.P.any,s.P.any,s.P.any,s.P.any],()=>(0,h.jsx)(aD,{})).with([s.P.instanceOf(t3.AA),s.P.any,s.P.any,s.P.any,s.P.any],()=>(0,h.jsx)(aX,{})).with([s.P.instanceOf(t3.o1),s.P.any,s.P.any,s.P.any,s.P.any],()=>(0,h.jsx)(aV,{})).with([s.P.instanceOf(t3.bg),s.P.any,s.P.any,s.P.any,s.P.any],()=>(0,h.jsx)(aH,{})).with([s.P.instanceOf(t3.us),s.P.any,s.P.any,s.P.any,s.P.any],()=>(0,h.jsx)(aJ,{})).with([s.P.any,!0,s.P.any,s.P.any,s.P.any],()=>(0,h.jsx)(aQ,{})).otherwise(()=>null)})]}),(0,h.jsxs)(aE,{children:[(0,h.jsx)(aL,{children:(0,h.jsxs)("menu",{className:"flex gap-3",children:[C,(0,s.YW)(((null==(a=i.data)?void 0:a.name)??"").toLowerCase()).with(s.P.string.includes("gpt"),()=>(0,h.jsxs)(a9.K,{onOpen:()=>{T(an())},onChange:e=>{let{target:{value:t}}=e;T(as((0,tv.PR)(t))),A({type:"aspectRatioChosen",payload:t})},value:N,children:[(0,h.jsxs)(a9.K.MenuItem,{value:p.gl.SQUARE,children:[(0,h.jsx)(a9.K.AspectRatioIcon,{aspectRatio:p.gl.SQUARE}),"Square (1:1)"]}),(0,h.jsxs)(a9.K.MenuItem,{value:p.gl.LANDSCAPE_3X2,children:[(0,h.jsx)(a9.K.AspectRatioIcon,{aspectRatio:p.gl.LANDSCAPE_3X2}),"Landscape (3:2)"]}),(0,h.jsxs)(a9.K.MenuItem,{value:p.gl.PORTRAIT_2X3,children:[(0,h.jsx)(a9.K.AspectRatioIcon,{aspectRatio:p.gl.PORTRAIT_2X3}),"Portrait (2:3)"]})]})).with(s.P.string,()=>(0,h.jsxs)(a9.K,{onOpen:()=>{T(an())},onChange:e=>{let{target:{value:t}}=e;T(as((0,tv.PR)(t))),A({type:"aspectRatioChosen",payload:t})},value:N,children:[(0,h.jsxs)(a9.K.MenuItem,{value:p.gl.SQUARE,children:[(0,h.jsx)(a9.K.AspectRatioIcon,{aspectRatio:p.gl.SQUARE}),"Square (1:1)"]}),(0,h.jsxs)(a9.K.MenuItem,{value:p.gl.LANDSCAPE_16X9,children:[(0,h.jsx)(a9.K.AspectRatioIcon,{aspectRatio:p.gl.LANDSCAPE_16X9}),"Landscape (16:9)"]}),(0,h.jsxs)(a9.K.MenuItem,{value:p.gl.PORTRAIT_9X16,children:[(0,h.jsx)(a9.K.AspectRatioIcon,{aspectRatio:p.gl.PORTRAIT_9X16}),"Portrait (9:16)"]})]})).exhaustive(),(0,h.jsxs)(sp,{onOpen:()=>{T(ao())},onChange:e=>{let{target:{value:t}}=e;T(al(t)),$&&w&&A({type:"imageCountToGenerateChosen",payload:t})},value:S,children:[(0,h.jsx)(sp.MenuItem,{value:1,children:"1"}),$&&w?(0,h.jsx)(sp.MenuItem,{value:2,children:"2"}):(0,h.jsx)(sp.NotAllowedMenuItem,{onClick:()=>K($),value:2,text:Y,children:"2"}),$&&w?(0,h.jsx)(sp.MenuItem,{value:3,children:"3"}):(0,h.jsx)(sp.NotAllowedMenuItem,{onClick:()=>K($),value:3,text:Y,children:"3"})]})]})}),(0,h.jsx)(aO,{children:(0,h.jsx)(aM,{disabled:!z,onClick:()=>y(),isLoading:W,cost:_?g:null,children:_?I("prompt.generate"):I("prompt.generateForFree")})})]})]})}),sg=[{aspectRatio:p.gl.LANDSCAPE_16X9,title:"Landscape (16:9)"},{aspectRatio:p.gl.PORTRAIT_9X16,title:"Portrait (9:16)"},{aspectRatio:p.gl.SQUARE,title:"Square (1:1)"}],sh=[{aspectRatio:p.gl.SQUARE,title:"Square (1:1)"},{aspectRatio:p.gl.LANDSCAPE_3X2,title:"Landscape (3:2)"},{aspectRatio:p.gl.PORTRAIT_2X3,title:"Portrait (2:3)"}],sx=e=>{let{aspectRatio:t,setAspectRatio:a,variant:r}=e;return(0,h.jsx)(h.Fragment,{children:("standard"===r?sg:sh).map(e=>{let r=e.aspectRatio===t;return(0,h.jsxs)(rF.MenuItem,{value:e.aspectRatio,onClick:()=>a(e.aspectRatio),children:[(0,h.jsx)(rF.MenuItemText,{children:e.title}),r&&(0,h.jsx)(eo.g,{icon:rz.e6})]},e.aspectRatio)})})},sy=[{value:1,label:"1 image"},{value:2,label:"2 images",notAllowedText:"Upgrade to generate multiple images"},{value:3,label:"3 images",notAllowedText:"Upgrade to generate multiple images"}],sf=e=>{let{imageCount:t,setImageCount:a,isPaid:r,isPaidEnabled:i,onNotAllowedClick:n}=e;return(0,h.jsx)(h.Fragment,{children:sy.map(e=>{let s=e.value===t,o=e.value>1&&(!r||!i);return(0,h.jsxs)(rF.MenuItem,{value:e.value.toString(),onClick:()=>{o?n():a(e.value)},children:[(0,h.jsx)(rF.MenuItemText,{children:e.label}),s&&(0,h.jsx)(eo.g,{icon:rz.e6})]},e.value)})})},sj=e=>{let{styles:t,onBackToSettings:a}=e,{state:r,dispatch:i}=(0,tb.A0)(),{trackImageGenEvent:n}=(0,m.W)(),{t:s}=(0,u.Bd)("visual-ai"),{styleId:o}=r,l=t.map(tB),d=l.find(e=>e.modelGroupId===o)??l[0];return d?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.BackButton,{onClick:a,children:s("styleSelect.backToSettings")}),(0,h.jsx)(rB.x,{onClickAway:a,children:(0,h.jsx)("div",{className:"overflow-auto scrollbar-thin scrollbar-track-gray-600 scrollbar-thumb-gray-400 p-4",children:(0,h.jsx)("ul",{className:"flex flex-col gap-2",children:l.map(e=>{let s=e.modelGroupId===d.modelGroupId,o=t.find(t=>t.id===e.modelGroupId),l=t.find(e=>e.id===r.styleId);return(0,h.jsx)(tG.MenuItem,{onClick:()=>{n({name:"gen AI model switched",new_value:(null==o?void 0:o.name)??"unknown",old_value:(null==l?void 0:l.name)??"unknown",aspect_ratio:(0,tv.PR)(r.aspectRatio),generate_type:"text to image"}),i({type:"styleChosen",payload:e.modelGroupId}),a()},value:e,selected:s,children:(0,h.jsxs)(tG.MenuItemContainer,{children:[(0,h.jsxs)(tG.MenuItemNameOuterContainer,{children:[(0,h.jsx)(tG.MenuItemNameInnerContainer,{children:(0,h.jsxs)(tG.MenuItemName,{children:[e.name.toLowerCase().includes("banana")&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(t_,{})," "]}),e.name.toLowerCase().includes("flux")&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tA,{})," "]}),e.name.toLowerCase().includes("seedream")&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tS,{})," "]}),e.name.toLowerCase().includes("gpt")&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tk,{})," "]}),e.name]})}),s&&(0,h.jsx)(tG.MenuItemCheckIcon,{})]}),e.description&&(0,h.jsx)(tG.MenuItemDescription,{children:e.description})]})},e.modelGroupId)})})})})]}):null},sv=e=>(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)(l.default,{sizes:"120px",width:60,height:60,className:"flex aspect-square shrink-0 items-center justify-center rounded bg-gray-50 object-cover",...e}),(0,h.jsx)(tC.A,{className:"checkmark-overlay absolute inset-0 flex items-center justify-center",sx:{opacity:0,transition:"opacity 0.2s ease-in-out",backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:"0.5rem",pointerEvents:"none","& svg":{color:"white"}},children:(0,h.jsx)(tF.N,{})})]}),sb=e=>{let{styles:t,selectedStyle:a,onStyleSelect:r,onBackToSettings:i,onExploreClick:n}=e,{t:s}=(0,u.Bd)("visual-ai"),o=(0,q.RZ)();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.BackButton,{onClick:i,children:s("styleSelect.backToSettings")}),(0,h.jsx)(rB.x,{onClickAway:i,children:(0,h.jsx)("div",{className:"overflow-auto scrollbar-thin scrollbar-track-gray-600 scrollbar-thumb-gray-400 lg:h-55 max-h-155 p-4",children:t.map(e=>{let t=e.id===(null==a?void 0:a.id);return(0,h.jsx)(rU.W.MenuItem,{value:e.id,onClick:()=>r(e.id),selected:t,className:"flex flex-col gap-3 p-4",sx:e=>({padding:"1rem",borderRadius:"0.5rem",border:"1px solid transparent",transition:e.transitions.create(["border-color","opacity"],{duration:e.transitions.duration.shortest}),"&.Mui-selected":{borderColor:"white",backgroundColor:"transparent","& .checkmark-overlay":{opacity:1}}}),children:(0,h.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[(0,h.jsx)(sv,{src:e.coverImageUrl,alt:e.name}),(0,h.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,h.jsx)(f.default,{variant:"title-medium",className:"text-white",children:e.name}),e.imageGenerationCost&&(0,h.jsxs)("div",{className:"flex items-center gap-1",children:[(0,h.jsx)(f.default,{variant:"title-small",className:"text-medium-emphasis",children:e.imageGenerationCost}),(0,h.jsx)(tX.v,{width:14,height:14,className:"text-medium-emphasis"})]})]})]}),(0,h.jsx)("div",{className:"flex items-center gap-2",children:(0,h.jsx)(L(),{href:o(`/text-to-image-ai/style-catalog/${e.id}`),className:"flex items-center justify-center px-2 py-1.5 text-highest-emphasis bg-highest-emphasis rounded",onClick:n,children:(0,h.jsx)(f.default,{variant:"title-small",children:s("styleSelect.explore")})})})]})},e.id)})})})]})},sw=e=>{let{styles:t,selectedStyle:a,onStyleSelect:r,onBackToSettings:i}=e,{t:n}=(0,u.Bd)("visual-ai");return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.BackButton,{onClick:i,children:n("styleSelect.backToSettings")}),(0,h.jsx)(rB.x,{onClickAway:i,children:(0,h.jsx)("div",{className:"overflow-auto scrollbar-thin scrollbar-track-gray-600 scrollbar-thumb-gray-400 lg:h-55 max-h-155",children:t.map(e=>{let t=e.id===(null==a?void 0:a.id);return(0,h.jsxs)(rU.W.MenuItem,{value:e.id,onClick:()=>r(e.id),selected:t,className:"flex justify-between",children:[(0,h.jsxs)("span",{className:"flex items-center gap-4",children:[(0,h.jsx)(tz,{src:e.coverImageUrl,alt:e.name}),e.name]}),(0,h.jsxs)("span",{className:"flex gap-4 items-center",children:[(0,h.jsxs)("span",{className:"flex items-center gap-1",children:[e.imageGenerationCost,(0,h.jsx)(tX.v,{width:14,height:14})]}),(0,h.jsx)("span",{className:t?"opacity-100":"opacity-0",children:(0,h.jsx)(eo.g,{icon:rz.e6})})]})]},e.id)})})})]})},s_=e=>{let{styles:t,selectedStyle:a,onStyleSelect:r,onBackToSettings:i,isExploreTabEnabled:n}=e,o=(0,t2.Q)(),l=()=>{i(),o(!1)};return(0,s.YW)(n).with(!0,()=>(0,h.jsx)(sb,{styles:t,selectedStyle:a,onStyleSelect:r,onBackToSettings:i,onExploreClick:l})).with(!1,()=>(0,h.jsx)(sw,{styles:t,selectedStyle:a,onStyleSelect:r,onBackToSettings:i})).exhaustive()},sC=e=>{let{styles:t,isPaid:a,isPaidEnabled:i,onNotAllowedClick:n,isExploreTabEnabled:o}=e,l=(0,r.useRef)(null),[d,c]=rW({type:"closed"}),{dispatch:g,state:x}=(0,tb.A0)(),{trackImageGenEvent:y}=(0,m.W)(),{aspectRatio:f,imageCount:j,styleId:v}=x,{t:b}=(0,u.Bd)("visual-ai"),{isFeatureEnabled:w}=(0,tw.p)(),_=t.find(e=>e.id===v),C=()=>{c({type:"menuOpened"})},T=e=>{y(as((0,tv.PR)(e))),g({type:"aspectRatioChosen",payload:e}),C()},I=e=>{y(al(e)),g({type:"imageCountToGenerateChosen",payload:e}),C()},E=e=>{let a=t.find(t=>t.id===e),r=(null==_?void 0:_.name)??null,i=(null==a?void 0:a.name)??"";y({name:eL.$.MODEL_SWITCHED,new_value:i,old_value:r,aspect_ratio:(0,tv.PR)(f),generate_type:eL.$.TEXT_TO_IMAGE}),g({type:"styleChosen",payload:e}),C()},A="open"===d.type||"submenuOpen"===d.type;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.Anchor,{ref:l,children:(0,h.jsxs)("button",{type:"button",className:"flex h-11 items-center gap-2 rounded-lg bg-gray-400 px-3 py-2 text-base text-white lg:h-[unset] max-w-[244px] overflow-hidden",onClick:()=>{y(ac),c({type:"menuOpened"})},"aria-label":b("styleSelect.styleSelect"),"aria-haspopup":"menu","data-testid":"combined-style-settings-button",children:[(0,h.jsx)(rF.SettingsIcon,{}),_?(0,h.jsxs)(h.Fragment,{children:[!w&&(0,h.jsx)(tW,{src:_.coverImageUrl,alt:_.name}),(0,h.jsx)("span",{className:"whitespace-nowrap overflow-hidden text-ellipsis",children:w?`${_.name} Model`:_.name})]}):(0,h.jsx)("span",{className:"whitespace-nowrap overflow-hidden text-ellipsis",children:b("styleSelect.selectStyle")})]})}),(0,h.jsx)(rF,{anchorElement:l.current,isOpen:A,children:(0,h.jsx)(rF.MenuContainer,{onClickAway:()=>c({type:"menuClosed"}),children:(0,s.YW)(d).with({type:"closed"},()=>null).with({type:"open"},()=>{let e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(rF.MenuItem,{value:"style",onClick:()=>{y({name:"button clicked",button_name:"gen ai models",gen_AI_tier:w?(null==_?void 0:_.name)??"unknown":"unknown"}),c({type:"submenuActivated",payload:"styleMenu"})},children:[(0,h.jsx)(rF.MenuItemText,{children:w?"Model":b("styleSelect.style")}),(0,h.jsx)(rF.MenuItemChevron,{})]}),(0,h.jsxs)(rF.MenuItem,{value:"aspectRatio",onClick:()=>{y(an()),c({type:"submenuActivated",payload:"aspectRatio"})},children:[(0,h.jsx)(rF.MenuItemText,{children:(e=(0,tl.Hj)(f),(0,s.YW)(f).with(p.gl.LANDSCAPE_16X9,()=>`Landscape (${e})`).with(p.gl.PORTRAIT_9X16,()=>`Portrait (${e})`).with(p.gl.SQUARE,()=>`Square (${e})`).with(p.gl.AUTO,()=>`Auto (${e})`).with(p.gl.PORTRAIT_2X3,()=>`Portrait (${e})`).with(p.gl.LANDSCAPE_3X2,()=>`Landscape (${e})`).exhaustive())}),(0,h.jsx)(rF.MenuItemChevron,{})]}),(0,h.jsxs)(rF.MenuItem,{value:"imageCount",onClick:()=>{y(ao()),c({type:"submenuActivated",payload:"imageCount"})},children:[(0,h.jsx)(rF.MenuItemText,{children:`${j} image${1===j?"":"s"}`}),(0,h.jsx)(rF.MenuItemChevron,{})]})]})}).with({type:"submenuOpen",activeSubmenu:"styleMenu"},()=>w?(0,h.jsx)(sj,{styles:t,onBackToSettings:C}):(0,h.jsx)(s_,{styles:t,selectedStyle:_,onStyleSelect:E,onBackToSettings:C,isExploreTabEnabled:o})).with({type:"submenuOpen",activeSubmenu:"aspectRatio"},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.BackButton,{onClick:C,children:b("styleSelect.backToSettings")}),(0,h.jsx)(sx,{aspectRatio:f,setAspectRatio:T,variant:null!=_&&_.name.toLowerCase().includes("gpt")?"gpt":"standard"})]})).with({type:"submenuOpen",activeSubmenu:"imageCount"},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.BackButton,{onClick:C,children:b("styleSelect.backToSettings")}),(0,h.jsx)(sf,{imageCount:j,setImageCount:I,isPaid:a,isPaidEnabled:i,onNotAllowedClick:n})]})).exhaustive()})})]})},sT=e=>(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)(l.default,{sizes:"120px",width:60,height:60,className:"flex aspect-square shrink-0 items-center justify-center rounded bg-gray-50 object-cover",...e}),(0,h.jsx)(tC.A,{className:"checkmark-overlay absolute inset-0 flex items-center justify-center",sx:{opacity:0,transition:"opacity 0.2s ease-in-out",backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:"0.5rem",pointerEvents:"none","& svg":{color:"white"}},children:(0,h.jsx)(tF.N,{})})]}),sI=e=>{let{styles:t}=e,[a,i]=(0,r.useState)(null),[n,s]=(0,r.useState)(!1),{state:o,dispatch:l}=(0,tb.A0)(),{styleId:d}=o,{t:c}=(0,u.Bd)("visual-ai"),p=(0,t2.Q)(),m=(0,q.RZ)(),g=()=>{s(!1)},x=t.find(e=>e.id===d);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tC.A,{ref:i,children:(0,h.jsx)("button",{type:"button",className:"flex h-11 items-center justify-between gap-4 rounded-lg bg-gray-400 p-2 text-base text-white lg:h-[unset] max-w-[165px] overflow-hidden",onClick:()=>{s(!0)},"aria-label":c("styleSelect.styleSelect"),"aria-haspopup":"menu","data-testid":"selected-aspect-ratio",children:x?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tW,{src:x.coverImageUrl,alt:x.name}),(0,h.jsx)("span",{className:"whitespace-nowrap overflow-hidden text-ellipsis",children:x.name})]}):c("styleSelect.selectStyle")})}),(0,h.jsx)(rU.W,{anchorElement:a,anchorOrigin:{vertical:"bottom",horizontal:"left"},isOpen:n,drawerStyle:{zIndex:0xe8d4a50fff},isDrawer:!0,menuClassName:"w-80 bg-gray-600",transformOrigin:{vertical:-10,horizontal:"left"},children:(0,h.jsx)(rB.x,{onClickAway:()=>g(),children:(0,h.jsx)("div",{className:"overflow-auto scrollbar-thin scrollbar-track-gray-600 scrollbar-thumb-gray-400 lg:h-55 max-h-155 p-4",children:t.map(e=>{let t=e.id===(null==x?void 0:x.id);return(0,h.jsx)(rU.W.MenuItem,{value:e.id,onClick:()=>{l({type:"styleChosen",payload:e.id}),g()},selected:t,className:"flex flex-col gap-3 p-4",sx:e=>({padding:"1rem",borderRadius:"0.5rem",border:"1px solid transparent",transition:e.transitions.create(["border-color","opacity"],{duration:e.transitions.duration.shortest}),"&.Mui-selected":{borderColor:"white",backgroundColor:"transparent","& .checkmark-overlay":{opacity:1}}}),children:(0,h.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[(0,h.jsx)(sT,{src:e.coverImageUrl,alt:e.name}),(0,h.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,h.jsx)(f.default,{variant:"title-medium",className:"text-white",children:e.name}),e.imageGenerationCost&&(0,h.jsxs)("div",{className:"flex items-center gap-1",children:[(0,h.jsx)(f.default,{variant:"title-small",className:"text-medium-emphasis",children:e.imageGenerationCost}),(0,h.jsx)(tX.v,{width:14,height:14,className:"text-medium-emphasis"})]})]})]}),(0,h.jsx)("div",{className:"flex items-center gap-2",children:(0,h.jsx)(L(),{href:m(`/text-to-image-ai/style-catalog/${e.id}`),className:"flex items-center justify-center px-2 py-1.5 text-highest-emphasis bg-highest-emphasis rounded",onClick:()=>{g(),p(!1)},children:(0,h.jsx)(f.default,{variant:"title-small",children:c("styleSelect.explore")})})})]})},e.id)})})})})]})},sE=e=>{let{styles:t}=e,[a,i]=(0,r.useState)(null),[n,s]=(0,r.useState)(!1),{state:o,dispatch:l}=(0,tb.A0)(),{trackImageGenEvent:d}=(0,m.W)(),c=()=>{s(!1)},u=t.map(tB),p=u.find(e=>e.modelGroupId===o.styleId)??u[0];return p?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tC.A,{ref:i,children:(0,h.jsxs)("button",{type:"button",className:"flex h-11 items-center justify-between gap-2 rounded-lg bg-gray-400 px-3 py-2 text-base text-white flex-1",onClick:()=>{s(!0)},"aria-label":"style select","aria-haspopup":"menu","data-testid":"selected-style",children:[(0,h.jsxs)("span",{className:"flex items-center gap-2",children:[p.name.toLowerCase().includes("banana")&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(t_,{})," "]}),p.name.toLowerCase().includes("flux")&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tA,{})," "]}),p.name.toLowerCase().includes("seedream")&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tS,{})," "]}),p.name.toLowerCase().includes("gpt")&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tk,{})," "]}),p.name," Model"]}),(0,h.jsx)("span",{className:"text-white text-sm",children:(0,h.jsx)(eo.g,{icon:nr.Jt})})]})}),(0,h.jsx)(rU.W,{anchorElement:a,anchorOrigin:{vertical:"bottom",horizontal:"left"},isOpen:n,drawerStyle:{zIndex:0xe8d4a50fff},isDrawer:!0,menuClassName:"w-80",transformOrigin:{vertical:-10,horizontal:"left"},children:(0,h.jsx)(rB.x,{onClickAway:()=>c(),children:(0,h.jsx)("div",{className:"overflow-auto scrollbar-thin scrollbar-track-gray-600 scrollbar-thumb-gray-400",children:(0,h.jsx)("ul",{className:"flex flex-col gap-2 p-4",children:u.map(e=>{let a=e.modelGroupId===p.modelGroupId,r=t.find(t=>t.id===e.modelGroupId),i=t.find(e=>e.id===o.styleId);return(0,h.jsx)(tG.MenuItem,{onClick:()=>{d({name:"gen AI model switched",new_value:(null==r?void 0:r.name)??"unknown",old_value:(null==i?void 0:i.name)??"unknown",aspect_ratio:(0,tv.PR)(o.aspectRatio),generate_type:"text to image"}),l({type:"styleChosen",payload:e.modelGroupId}),c()},value:e,selected:a,children:(0,h.jsxs)(tG.MenuItemContainer,{children:[(0,h.jsxs)(tG.MenuItemNameOuterContainer,{children:[(0,h.jsx)(tG.MenuItemNameInnerContainer,{children:(0,h.jsxs)(tG.MenuItemName,{children:[e.name.toLowerCase().includes("banana")&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(t_,{})," "]}),e.name]})}),a&&(0,h.jsx)(tG.MenuItemCheckIcon,{})]}),e.description&&(0,h.jsx)(tG.MenuItemDescription,{children:e.description})]})},e.modelGroupId)})})})})})]}):null},sA=e=>{let{isPaid:t,isPaidEnabled:a,onNotAllowedClick:i,selectedStyleName:n}=e,o=(0,r.useRef)(null),[l,d]=rW({type:"closed"}),{dispatch:c,state:u}=(0,tb.A0)(),{trackImageGenEvent:g}=(0,m.W)(),{aspectRatio:x,imageCount:y}=u,f=()=>{d({type:"menuOpened"})},j=e=>{g(as((0,tv.PR)(e))),c({type:"aspectRatioChosen",payload:e}),f()},v=e=>{g(al(e)),c({type:"imageCountToGenerateChosen",payload:e}),f()};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.Anchor,{ref:o,children:(0,h.jsxs)(rF.Button,{onClick:()=>{d({type:"menuOpened"})},children:[(0,h.jsx)(rF.SettingsIcon,{}),(0,h.jsx)(rF.ButtonText,{children:"Settings"})]})}),(0,h.jsx)(rF,{anchorElement:o.current,isOpen:"open"===l.type||"submenuOpen"===l.type,children:(0,h.jsx)(rF.MenuContainer,{onClickAway:()=>d({type:"menuClosed"}),children:(0,s.YW)(l).with({type:"closed"},()=>null).with({type:"open"},()=>{let e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(rF.MenuItem,{value:"aspectRatio",onClick:()=>{g(an()),d({type:"submenuActivated",payload:"aspectRatio"})},children:[(0,h.jsx)(rF.MenuItemText,{children:(e=(0,tl.Hj)(x),(0,s.YW)(x).with(p.gl.LANDSCAPE_16X9,()=>`Landscape (${e})`).with(p.gl.PORTRAIT_9X16,()=>`Portrait (${e})`).with(p.gl.SQUARE,()=>`Square (${e})`).with(p.gl.AUTO,()=>`Auto (${e})`).with(p.gl.PORTRAIT_2X3,()=>`Portrait (${e})`).with(p.gl.LANDSCAPE_3X2,()=>`Landscape (${e})`).exhaustive())}),(0,h.jsx)(rF.MenuItemChevron,{})]}),(0,h.jsxs)(rF.MenuItem,{value:"imageCount",onClick:()=>{g(ao()),d({type:"submenuActivated",payload:"imageCount"})},children:[(0,h.jsx)(rF.MenuItemText,{children:`${y} image${1===y?"":"s"}`}),(0,h.jsx)(rF.MenuItemChevron,{})]})]})}).with({type:"submenuOpen",activeSubmenu:"aspectRatio"},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.BackButton,{onClick:f,children:"Back to settings"}),(0,h.jsx)(sx,{aspectRatio:x,setAspectRatio:j,variant:n.toLowerCase().includes("gpt")?"gpt":"standard"})]})).with({type:"submenuOpen",activeSubmenu:"imageCount"},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rF.BackButton,{onClick:f,children:"Back to settings"}),(0,h.jsx)(sf,{imageCount:y,setImageCount:v,isPaid:t,isPaidEnabled:a,onNotAllowedClick:i})]})).exhaustive()})})]})},sk=r.forwardRef((e,t)=>{var a;let{selectedStyleQuery:i,generateImageMutation:n,enhancePromptMutation:o,error:l,isGenerateButtonThrottled:d,cost:c,canUndo:p,handleGeneration:g,handleUpgradeJourneys:x,handleJourneys:y,creditsLeft:f,freeGenerations:j,isPaidEnabled:v,shouldShowCost:b}=e,{trackImageGenEvent:w}=(0,m.W)(),{t:_}=(0,u.Bd)("visual-ai"),{state:C,dispatch:T}=(0,tb.A0)(),{prompt:I,aspectRatio:E,imageCount:A,styleId:k}=C,N=(0,r.useRef)(null),S=null==(a=tV().data)?void 0:a.pages.flat(),{isFeatureEnabled:M}=rV(),{isFeatureEnabled:O}=(0,tw.p)(),{isVisitor:L,isTrial:P,isSuite5m:G,isFreeTrialTeam:B}=(0,R.f)(),{isPLJourney:U}=(0,t1.T)(),{isAI4_992_500mCredits:F}=(0,aR.u)(),$=!L&&!P&&!B,D=v&&!!c&&f<c,V=B||U,X=!D&&null!==j&&!L&&!P&&j<=0&&(f<(c??0)||0===f),W=d||n.isLoading,z=null!==k&&!o.isLoading&&null===l&&!W||!!L;(0,r.useImperativeHandle)(t,()=>({focus:()=>{var e;null==(e=N.current)||e.focus()}}),[]);let K=e=>{e?x("upgrade",ea.e.DESKTOP_DURATION_SELECT):y("subscribe",ea.e.DESKTOP_DURATION_SELECT)},H=G||F?"":_(v?"prompt.moreCredits":"prompt.keepGenerating");return(0,h.jsx)(rM,{cost:c,placeholder:_("prompt.image.placeholder.mobile"),canGenerate:z,handleGenerate:g,prompt:I,promptTabs:(0,h.jsxs)(ab,{children:[(0,h.jsx)(ab.TextToImageTab,{}),(0,h.jsx)(ab.ImageToImageTab,{})]}),shouldShowCost:b,children:(0,h.jsxs)(rI,{children:[(0,h.jsxs)(ab,{children:[(0,h.jsx)(ab.TextToImageTab,{}),(0,h.jsx)(ab.ImageToImageTab,{})]}),(0,h.jsxs)(rN,{children:[(0,s.YW)({isVisualAiMobileEnabled:M,isTextToImageModelSelectEnabled:O}).with({isVisualAiMobileEnabled:!0},()=>(0,h.jsx)(sC,{styles:S??[],isPaid:$,isPaidEnabled:v,onNotAllowedClick:()=>K($),isExploreTabEnabled:!0})).with({isVisualAiMobileEnabled:!1,isTextToImageModelSelectEnabled:!0},()=>{var e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(sE,{styles:S??[]}),(0,h.jsx)(sA,{isPaid:$,isPaidEnabled:v,onNotAllowedClick:()=>K($),selectedStyleName:(null==(e=i.data)?void 0:e.name)??"unknown"})]})}).with({isVisualAiMobileEnabled:!1,isTextToImageModelSelectEnabled:!1},()=>{var e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(sI,{styles:S??[]}),(0,h.jsx)(sA,{isPaid:$,isPaidEnabled:v,onNotAllowedClick:()=>K($),selectedStyleName:(null==(e=i.data)?void 0:e.name)??"unknown"})]})}).exhaustive(),(0,h.jsx)("div",{className:"grow"}),(0,h.jsx)(sc,{children:(0,h.jsxs)(h.Fragment,{children:[p?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(sd,{onClick:()=>{var e;w(ai()),T({type:"changesUndone"}),null==(e=N.current)||e.focus()},disabled:o.isLoading}),(0,h.jsx)(su,{})]}):null,(0,h.jsx)(sl,{disabled:I.length<1||o.isLoading,isLoading:o.isLoading,onClick:()=>{L?y("enhance",ea.e.GENERATION_BOX):o.mutate({prompt:I??"",styleId:k})}})]})})]}),(0,h.jsxs)(rS,{children:[(0,h.jsx)(aI,{placeholder:_("prompt.image.placeholder.desktop"),ref:N,autoFocus:!0,value:I,className:"flex-1",onChange:e=>{let t=0===I.length&&1===e.target.value.length,a=I.length>1&&1===e.target.value.length;if(t||a){var r;w(ad({images:A,aspect_ratio:(0,tv.PR)(E),style:(null==(r=i.data)?void 0:r.name)??"",is_pasted:!1}))}T({type:"promptUpdated",payload:e.target.value})},onPaste:()=>{if(0===I.length){var e;w(ad({images:A,aspect_ratio:(0,tv.PR)(E),style:(null==(e=i.data)?void 0:e.name)??"",is_pasted:!0}))}},disabled:o.isLoading}),(0,h.jsxs)(rk,{children:[(0,s.YW)([l,C.promptWasRestored,D,X,P&&null!==j&&j<=0]).with([s.P.any,s.P.any,!0,s.P.any,s.P.any],()=>(0,h.jsx)(a5,{handleJourneys:x,isImageGenAmount:A})).with([s.P.any,s.P.any,s.P.any,!0,s.P.any],()=>(0,h.jsx)(a0,{buttonText:_(V?"prompt.contactSales":"prompt.upgrade"),text:v?_("prompt.creditsLimitReached"):_("prompt.limitReached"),keepText:H,handleJourneys:x})).with([s.P.any,s.P.any,s.P.any,s.P.any,!0],()=>(0,h.jsx)(a0,{buttonText:_(V?"prompt.contactSales":"prompt.subscribeNow"),text:_("prompt.limitReached"),keepText:_("prompt.keepGenerating"),handleJourneys:y})).with([s.P.instanceOf(t3.gN),s.P.any,s.P.any,s.P.any,s.P.any],e=>{let[t]=e;return(0,h.jsx)(a$,{"aria-label":t.message,children:t.message})}).with([s.P.instanceOf(t3.OE),s.P.any,s.P.any,s.P.any,s.P.any],()=>(0,h.jsx)(aD,{})).with([s.P.instanceOf(t3.AA),s.P.any,s.P.any,s.P.any,s.P.any],()=>(0,h.jsx)(aX,{})).with([s.P.instanceOf(t3.o1),s.P.any,s.P.any,s.P.any,s.P.any],()=>(0,h.jsx)(aV,{})).with([s.P.instanceOf(t3.bg),s.P.any,s.P.any,s.P.any,s.P.any],()=>(0,h.jsx)(aH,{})).with([s.P.instanceOf(t3.us),s.P.any,s.P.any,s.P.any,s.P.any],()=>(0,h.jsx)(aJ,{})).with([s.P.any,!0,s.P.any,s.P.any,s.P.any],()=>(0,h.jsx)(aQ,{})).otherwise(()=>null),b?(0,h.jsx)(aM,{fullWidth:!0,disabled:!z,onClick:g,cost:c,isLoading:W,children:n.isLoading?"Generating":_("prompt.generate")}):(0,h.jsx)(aM,{fullWidth:!0,cost:null,disabled:!z,onClick:g,isLoading:W,children:n.isLoading?"Generating":_("prompt.generateForFree")})]})]})]})})});var sN=a(75230);let sS=e=>{let{filterSlot:t}=e;(()=>{var e,t;let{data:a}=tV(),i=null==a||null==(e=a.pages)?void 0:e[0],n=null==i||null==(t=i[0])?void 0:t.id,{state:{styleId:s},dispatch:o}=(0,tb.A0)();(0,r.useEffect)(()=>{!s&&n&&o({type:"styleChosen",payload:n})},[s,n])})();let a=(0,r.useRef)(null),[n,o]=(0,r.useState)(!1),[,l]=(0,t2.K)(),{state:d}=(0,tb.A0)(),{isReady:c,isBelowLG:p}=(0,t0.Qs)(),g=(0,i.useRouter)(),x=(0,i.useSearchParams)(),y=(0,q.RZ)(),{imageCreditsLeft:f,imageFreeGenerations:j,isImagePaidEnabled:v,isVideoPaidEnabled:b}=(0,t4.Y)(),{handleJourneys:w,handleUpgradeJourneys:_}=(0,t4.f)(),{isVisitor:C}=(0,R.f)(),T=(0,ij.p)(d.styleId),I=(()=>{let{trackImageGenEvent:e}=(0,m.W)(),{t}=(0,u.Bd)("visual-ai"),{dispatch:a}=(0,tb.m1)(),r=(0,$.useSession)();return(0,B.useMutation)({mutationKey:["enhance-prompt"],mutationFn:e=>{var t;return(0,sN.fG)(e,null==r||null==(t=r.data)?void 0:t.accessToken)},onSuccess:t=>{e(aa({is_valid:!0})),a({type:"promptEnhanced",payload:t})},onSettled:a1.gq,onError:a=>{e(aa({is_valid:!1,message_text:(0,s.YW)(a).with(s.P.instanceOf(t3.OE),()=>t("prompt.rateLimitError")).with(s.P.instanceOf(t3.o1),()=>t("prompt.serverError")).with(s.P.instanceOf(t3.AA),()=>t("prompt.emptyImagePromptError")).with(s.P.instanceOf(t3.bg),()=>t("prompt.inappropriatePromptError")).exhaustive()}))}})})(),{closeFeatureIndicator:E}=(0,t9.Cs)(nI.jY),{prompt:A,aspectRatio:k,imageCount:N,changelog:S}=d,M=(0,r.useMemo)(()=>{let e;return T.data?(e=T.data,e.imageGenerationCost*d.imageCount):null},[T.data,N]),O=(e=>{var t;let{cost:a}=e,{trackImageGenEventWithCost:n}=(0,m.W)(),{t:o}=(0,u.Bd)("visual-ai"),l=(0,r4.useQueryClient)(),d=(0,i.useSearchParams)(),c=decodeURIComponent((null==d?void 0:d.get("source"))||""),{state:{changelog:p,prompt:g,imageCount:h,aspectRatio:x,styleId:y}}=(0,tb.A0)(),f=(0,ij.p)(y),{isFeatureEnabled:j}=(0,tw.p)(),v=(0,$.useSession)(),b=(0,r.useMemo)(()=>{var e,t;return{is_enhancement:p.length>1,style:(null==(e=f.data)?void 0:e.name)??"",total_words:r8(g),images:h,aspect_ratio:(0,tv.PR)(x),prompt_edited:p.some(e=>"editEnhanced"===e.cause),gen_AI_tier:(null==(t=f.data)?void 0:t.name)??"unknown"}},[p,g,h,x,null==(t=f.data)?void 0:t.name]);return(0,B.useMutation)({mutationKey:["generate-image"],mutationFn:e=>{var t,a;let{imageCount:r,...i}=e;if(!(null!=(t=v.data)&&t.accessToken))throw eK.e$.error("No access token when trying to generate image.",{userId:null==(a=v.data)?void 0:a.user.id}),Error("No access token when trying to generate image.");if(g.length<1)throw new t3.AA;return Promise.all(Array.from({length:r}).map(()=>(0,r6.Fz)(i,v.data.accessToken)))},onSuccess:async e=>{n(ar({...b,is_valid:!0}),a??0,"image"),e.forEach(e=>{var t,r;let{data:i}=e;n((e=>{let{total_words:t,is_enhancement:a,prompt_edited:r,style:i,images:n,aspect_ratio:s,generate_id:o,dimensions:l,format:d,image_asset_id:c,source:u,gen_AI_tier:p}=e;return{gen_AI_tier:p,name:eL.$.GENERATE_START,click_source:eL.$.TEXT_TO_IMAGE_TEXT_BOX,media_type:"image ai",generate_type:eL.$.TEXT_TO_IMAGE,generate_id:o,total_words:t,is_enhancement:a,prompt_edited:r,style:i,images:n,aspect_ratio:s,dimensions:l,format:d,image_asset_id:c,source:u}})({images:h,is_enhancement:p.length>0,aspect_ratio:(0,tv.PR)(x),style:(null==(t=f.data)?void 0:t.name)??"",total_words:r8(g),prompt_edited:p.some(e=>"editEnhanced"===e.cause),generate_id:i.generationId,dimensions:"unknown",format:"unknown",image_asset_id:i.id,source:c,gen_AI_tier:j?(null==(r=f.data)?void 0:r.name)??"unknown":"unknown"}),a??0,"image")}),await l.invalidateQueries([eM.QN])},onError:e=>{n(ar({...b,is_valid:!1,message_text:(0,s.YW)(e).with(s.P.instanceOf(t3.OE),()=>o("prompt.rateLimitError")).with(s.P.instanceOf(t3.o1),()=>o("prompt.serverError")).with(s.P.instanceOf(t3.AA),()=>o("prompt.emptyImagePromptError")).with(s.P.instanceOf(t3.bg),()=>o("prompt.inappropriatePromptError")).with(s.P.instanceOf(t3.us),()=>o("prompt.serviceUnavailableError")).exhaustive()}),a??0,"image")},onSettled:a1.gq})})({cost:M});(e=>{let{generateImageMutation:t,enhancePromptMutation:a}=e,{state:i}=(0,tb.A0)();(0,r.useEffect)(()=>{t.error&&t.reset(),a.error&&a.reset()},[i])})({enhancePromptMutation:I,generateImageMutation:O});let{error:L}=(e=>{let{generateImageMutation:t,enhancePromptMutation:a}=e,{trackImageGenEvent:i}=(0,m.W)(),n=(0,r.useMemo)(()=>(e=>{let{enhancePromptMutation:t,generateImageMutation:a}=e;return t.error?t.error:a.error?a.error:null})({generateImageMutation:t,enhancePromptMutation:a}),[t,a]);return(0,r.useEffect)(()=>{n&&i({name:"error annotated",error_message:n.message,component:"text to image text box"})},[n,i]),{error:n}})({generateImageMutation:O,enhancePromptMutation:I}),G=!!S.length,U=async()=>{if(d.styleId&&!((j??0)<=0&&w("Generate for free",ea.e.GENERATION_BOX))){let e;if(e=M||0,(!v||!(f>=e))&&!((j??0)>0))return void _(!b,"Generate",ea.e.GENERATION_BOX);E(),O.mutate({aspectRatio:k,imageCount:N,prompt:A,styleId:d.styleId},{onSuccess:()=>{l(!1),g.push(y(`/text-to-image-ai/creations?${x}`))},onError:()=>{l(!0)}}),o(!0),await new Promise(e=>setTimeout(e,3e3)),o(!1)}},F=!!v||!C&&(null===j||0===j),D=(0,h.jsx)(sk,{ref:a,selectedStyleQuery:T,enhancePromptMutation:I,generateImageMutation:O,error:L,isGenerateButtonThrottled:n,cost:M,canUndo:G,handleGeneration:U,handleUpgradeJourneys:(e,t)=>_(b,e,t),handleJourneys:w,creditsLeft:f,freeGenerations:j,isPaidEnabled:v??!1,shouldShowCost:F}),V=(0,h.jsx)(sm,{ref:a,selectedStyleQuery:T,enhancePromptMutation:I,generateImageMutation:O,error:L,isGenerateButtonThrottled:n,cost:M,canUndo:G,handleGeneration:U,handleUpgradeJourneys:(e,t)=>_(b,e,t),handleJourneys:w,creditsLeft:f,freeGenerations:j,isPaidEnabled:v??!1,shouldShowCost:F,filterSlot:t});return(0,h.jsx)("div",{className:"flex-1","aria-label":"Image generation prompt",children:(0,s.YW)({isReady:c,isBelowLG:p}).with({isReady:!1},()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(P.Nv,{children:D}),(0,h.jsx)(P.J$,{children:V})]})).with({isBelowLG:!0},()=>D).with({isBelowLG:!1},()=>V).exhaustive()})},sM=()=>((()=>{let e="authenticated"===(0,$.useSession)().status,t=(0,is.x)(),{dispatch:a}=(0,tJ.aX)(),i=(0,r.useRef)(e);(0,r.useEffect)(()=>{!e&&i.current&&a({type:"promptReset"}),i.current=e},[e,t])})(),null),sO=()=>{let e=(0,Z.D)(),t=tV(),{state:a,dispatch:r}=(0,tb.A0)(),{isBelowLG:i}=(0,t0.Qs)(),{isFeatureEnabled:o}=(0,tw.p)(),l=(0,tj.r)();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(ss,{}),(0,h.jsx)(io,{}),(0,h.jsx)(sM,{}),(0,h.jsx)(nT,{}),(0,h.jsx)(sL,{}),(0,s.YW)(e).with(eP.Nz,()=>{var e;let i=null==(e=t.data)?void 0:e.pages.flat(),n=null==i?void 0:i.find(e=>e.id===a.styleId),l=e=>{r({type:"styleChosen",payload:e.target.value})};return(0,h.jsx)(sS,{filterSlot:(0,s.YW)({allStyles:i,selectedStyle:n,isTextToImageModelSelectEnabled:o}).with({allStyles:void 0},()=>(0,h.jsx)(aw.A,{className:"w-[162px] h-[44px]"})).with({selectedStyle:void 0},()=>(0,h.jsx)(aw.A,{className:"w-[162px] h-[44px]"})).with({isTextToImageModelSelectEnabled:!0},e=>{let{allStyles:t,selectedStyle:a}=e;return(0,h.jsx)(tU,{onChange:l,styles:t??[],value:null==a?void 0:a.id})}).otherwise(e=>{let{allStyles:t,selectedStyle:a}=e;return(0,h.jsx)(tY,{onChange:l,styles:t??[],value:null==a?void 0:a.id})})})}).with(eP.ri,()=>(0,h.jsx)(nC,{children:(0,h.jsx)(tx,{})})).with(eP.ty,()=>(0,h.jsx)(sn,{children:(0,h.jsxs)("div",{className:(0,j.cn)("flex h-full items-center gap-3",l&&"min-w-34.5"),children:[(0,h.jsx)(ty,{sourceType:"firstFrame"}),(0,h.jsx)(n.N,{initial:!1,mode:"popLayout",children:l&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(ii,{}),(0,h.jsx)(tf,{})]})})]})})).with(eP.pC,()=>(0,h.jsx)(ie,{})).exhaustive(),i&&(0,h.jsx)(rC,{})]})},sL=()=>{let e=(0,Z.D)(),t=(0,eB._M)(),a=(0,i.useParams)(),n=null==a?void 0:a.modelSlug,{dispatch:o}=(0,tJ.aX)(),l=(0,eR.C$)(),{dispatch:d}=(0,eZ.kt)(),{isFeatureEnabled:c}=it();return(0,r.useEffect)(()=>{(0,s.YW)({modelSlug:n,genAIMode:e}).with({genAIMode:eP.pC,modelSlug:s.P.string},e=>{let{modelSlug:a}=e,r=(0,ia.j)(t.textToVideo,a);r&&o({type:"modelGroupChosen",payload:r})}).with({genAIMode:eP.ri,modelSlug:s.P.string},e=>{let{modelSlug:a}=e,r=(0,ia.j)(t.imageToImage,a);r&&l({type:"modelGroupSelected",payload:{modelGroupId:r.modelGroupId,...c?{aspectRatio:p.gl.AUTO}:{}}})}).with({genAIMode:eP.ty,modelSlug:s.P.string},e=>{let{modelSlug:a}=e,r=(0,ia.j)(t.imageToVideo,a);r&&d({type:"modelGroupChosen",payload:r})}).with({genAIMode:s.P.union(eP.ri,eP.Nz,eP.ty,eP.pC)},{modelSlug:void 0},e9.l).exhaustive()},[e,n,t,o,l,d,c]),null}},77204:(e,t,a)=>{"use strict";a.d(t,{d:()=>o});var r=a(439),i=a(94420),n=a(21317),s=a(54568);let o=e=>{let{assetId:t,assetType:a,isOpen:o,placement:l,exceptedCollectionIds:d,onCreateArtboard:c,onAdd:u,onRemove:p,onOpen:m,onClose:g,thumbnailUrl:h,drawerStyle:x}=e,{t:y}=(0,r.Bd)("common");return(0,s.jsx)(n.W.SubMenu,{title:y("actions.addToArtboard"),isOpen:o,onShowSubMenu:m,onCloseSubMenu:g,placement:l,drawerStyle:x,children:(0,s.jsx)(i.V,{assetId:t,assetType:a,exceptedCollectionIds:d,onCreateArtboard:c,onAdd:u,onRemove:p,thumbnailUrl:h})})}},78349:(e,t,a)=>{"use strict";a.d(t,{T:()=>p,u:()=>m});var r=a(22875),i=a(32638),n=a(21797),s=a(83614),o=a(72988),l=a(78025);let d=Object.values(s.L_),c=Object.values(s.Ji),u=async()=>{var e,t;let a=await (0,s.x6)();if(!a)return null;let{leadJourney:r}=(0,l.xA)(),i=(null==(e=a.leadInfo)?void 0:e.classification)??"",n=r??"",{journey:o,bftJourney:u}=(t=a.journey)&&0!==t.length?{journey:t.find(e=>d.includes(e))||"",bftJourney:t.find(e=>c.includes(e))||""}:{journey:"",bftJourney:""},p=o!==n;(0,l.X4)(i),(0,l.rL)(o),(0,l.Dv)(u);let m=[s.L_.UQL_S1,s.L_.UQL_S2,s.L_.UQL_S3,s.L_.UQL_S4,s.L_.UQL_S5].includes(o),g=[s.Jq.PL,s.Jq.UQL,s.Jq.SQL,s.Jq.ClosedWon,s.Jq.ClosedLost,s.Jq.Opportunity].includes(i);return{...a,hasJourneyChanged:p,previousJourney:n,updatedLeadJourney:o,isUqlJourney:m,isPLJourney:o===s.L_.PL,isSQLJourney:o===s.L_.SQL,isPLBFTJourney:u===s.Ji.PL_BFT,isSQLBFTJourney:u===s.Ji.SQL_BFT,isPLClassification:i===s.Jq.PL,isSQLClassification:i===s.Jq.SQL,isEnterpriseClassification:g}},p=()=>{var e,t,a,o,d,c,p,m,g,h,x;let y="authenticated"===(0,n.useSession)().status,f=(0,r.useQueryClient)(),j=(0,i.useQuery)({queryKey:s.y0,queryFn:async()=>{let e=await u();return f.setQueryData(s.gC,e),e},staleTime:18e5,refetchOnWindowFocus:!1,retry:!1,enabled:y}),v=(0,i.useQuery)({queryKey:[...s.y0,"cookie",j.data],queryFn:l.xA,enabled:y}),b=!!v.data&&(v.data.leadJourney===s.L_.UQL_S1||v.data.leadJourney===s.L_.UQL_S3),w=!!v.data&&(v.data.leadJourney===s.L_.UQL_S1||v.data.leadJourney===s.L_.UQL_S3||v.data.leadJourney===s.L_.UQL_S4);return{leadJourneyQuery:j,leadJourneyCookieQuery:v,shouldShowUqlJourney:b,shouldShowUqlJourneyExtended:w,isPLJourney:(null==(e=v.data)?void 0:e.isPLJourney)??!1,isSQLJourney:(null==(t=v.data)?void 0:t.isSQLJourney)??!1,isPLBFTJourney:(null==(a=j.data)?void 0:a.isPLBFTJourney)??!1,isSQLBFTJourney:(null==(o=j.data)?void 0:o.isSQLBFTJourney)??!1,isAnyBFTJourney:(null==(d=j.data)?void 0:d.isPLBFTJourney)||(null==(c=j.data)?void 0:c.isSQLBFTJourney)||!1,isSQLClassification:(null==(p=j.data)?void 0:p.isSQLClassification)??!1,isPLClassification:(null==(m=j.data)?void 0:m.isPLClassification)??!1,isEnterpriseClassification:(null==(g=j.data)?void 0:g.isEnterpriseClassification)??!1,companyName:(null==(h=j.data)||null==(x=h.leadInfo)?void 0:x.companyName)||null}},m=()=>{let e="authenticated"===(0,n.useSession)().status,{leadClassification:t}=(0,l.Nv)(),{leadJourneyQuery:a}=p();return(0,i.useQuery)({queryKey:s.gC,queryFn:async()=>{if(!a.isStale)return a.data;let e=await a.refetch();return null!=e&&e.data&&(0,o.r5)({trigger:"UQL offline solution",previousLeadJourney:e.data.previousJourney,updatedLeadJourney:e.data.updatedLeadJourney,hasJourneyChanged:e.data.hasJourneyChanged}),e},refetchInterval:18e5,refetchOnWindowFocus:!1,enabled:e&&!!t})}},85012:(e,t,a)=>{"use strict";a.d(t,{p:()=>s});var r=a(32638);a(63875);var i=a(87790),n=a(97436);let s=(e,t)=>{let{dispatch:a}=(0,n.m1)();return(0,r.useQuery)({queryKey:["styleById",e],queryFn:()=>(0,i.c)({id:e??""}),enabled:!!e,staleTime:3e5,retry:!1,onError:()=>{a({type:"styleReset"})},...t})}},87455:(e,t,a)=>{"use strict";a.d(t,{r:()=>n,v:()=>i});var r=a(54568);let i=e=>(0,r.jsx)("svg",{width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,r.jsx)("path",{d:"M8.76167 1.73584C8.83538 1.50316 9.16462 1.50317 9.23833 1.73583L10.7437 6.48795L11.4587 6.26145L10.7437 6.48795C10.9138 7.02473 11.3317 7.4469 11.8667 7.62234L16.7945 9.2382C17.0258 9.31403 17.0234 9.64202 16.791 9.71443L11.8914 11.2413C11.3423 11.4124 10.9124 11.8423 10.7413 12.3914L11.4573 12.6145L10.7413 12.3914L9.23868 17.2132C9.16571 17.4474 8.83429 17.4474 8.76132 17.2132L7.25871 12.3914C7.08761 11.8423 6.65767 11.4124 6.10861 11.2413L1.20898 9.71443C0.97663 9.64202 0.974206 9.31403 1.20547 9.2382L6.13326 7.62234C6.6683 7.4469 7.08624 7.02473 7.25628 6.48795L6.5413 6.26145L7.25628 6.48795L8.76167 1.73584Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),n=e=>(0,r.jsx)("svg",{width:"14",height:"15",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,r.jsx)("path",{d:"M8.76167 1.73584C8.83538 1.50316 9.16462 1.50317 9.23833 1.73583L10.7437 6.48795L11.4587 6.26145L10.7437 6.48795C10.9138 7.02473 11.3317 7.4469 11.8667 7.62234L16.7945 9.2382C17.0258 9.31403 17.0234 9.64202 16.791 9.71443L11.8914 11.2413C11.3423 11.4124 10.9124 11.8423 10.7413 12.3914L11.4573 12.6145L10.7413 12.3914L9.23868 17.2132C9.16571 17.4474 8.83429 17.4474 8.76132 17.2132L7.25871 12.3914C7.08761 11.8423 6.65767 11.4124 6.10861 11.2413L1.20898 9.71443C0.97663 9.64202 0.974206 9.31403 1.20547 9.2382L6.13326 7.62234C6.6683 7.4469 7.08624 7.02473 7.25628 6.48795L6.5413 6.26145L7.25628 6.48795L8.76167 1.73584Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})},87790:(e,t,a)=>{"use strict";a.d(t,{c:()=>c,p:()=>o});var r=a(26538),i=a(184),n=a(59786);let s=`
  query GenerativeMediaStyleList($page: Int!, $assetType: String, $feature: String) {
    generativeMediaStyleList(page: $page, assetType: $assetType, feature: $feature) {
      id
      coverImageUrl
      name
      upscaleCost
      videoGenerationFullHdCost
      videoGenerationHdCost
      imageGenerationCost
      description
      tags
    }
  }
`,o=async e=>{let t=await r.wr.query(s,e),a=n.ZK.safeParse(t);if(!a.success)throw i.e$.error("Invalid styles data",(0,i.Xf)(a.error)),Error("Invalid styles data.");return a.data.generativeMediaStyleList},l=`
  showcases {
    videoUrl
    videoResolution
    styleId
    prompt
    imageUrl
    id
    displayOrder
    dimensions
    aspectRatio
  }
`,d=`
  query StylesByIds($ids: [String!]!) {
    generativeMediaStyles(ids: $ids) {
      id
      coverImageUrl
      name
      upscaleCost
      videoGenerationFullHdCost
      videoGenerationHdCost
      imageGenerationCost
      description
      tags
      ${l}
    }
  }
`,c=async e=>{let t=await r.wr.query(d,{ids:[e.id]}),a=n.gH.safeParse(t);if(!a.success)throw i.e$.error("Invalid style data",(0,i.Xf)(a.error)),Error("Invalid style data.");let s=a.data.generativeMediaStyles[0];if(!s)throw i.e$.error("No style exists with ID",{id:e.id}),Error("No style exists with ID.");return s}},88878:(e,t,a)=>{"use strict";a.d(t,{x:()=>n});var r=a(7620),i=a(902);let n=()=>{let e=(0,i.useRouter)();return(0,r.useCallback)(t=>{let{to:a,search:r=""}=t;return e.push(`${a}${r}`)},[e])}},90180:(e,t,a)=>{"use strict";a.d(t,{R2:()=>o,n4:()=>s,qS:()=>d});var r=a(72466),i=a(27732);let n=`${r.w4}/artlist-images`,s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/^https?:\/\/([a-zA-Z0-9-]+\.)?imgix\.net\//.test(e)},o=(e,t)=>{let a=e;if(null!=e&&e.includes(n)&&(a=e.replace(n,r.Vs)),!s(a))return a;let o=(0,i.G)({auto:"format",w:t});return`${a}${o}`},l=[640,768,1024,1280,1440,1600,1920,3840],d=e=>l.find(t=>e<t)||l[l.length-1]},97436:(e,t,a)=>{"use strict";a.d(t,{A0:()=>p,Jw:()=>g,m1:()=>m});var r=a(96240),i=a(91608),n=a(95854),s=a(80752),o=a(3548);let l={prompt:"",aspectRatio:s.gl.SQUARE,imageCount:1,changelog:[],isTyping:!1,promptWasRestored:!1,promptWasCleared:!1,styleId:null},d=(0,r.eU)(l),c=(0,r.eU)(e=>e(d),async(e,t,a)=>{let r,i=(r=e(d),(0,o.YW)(a).with({type:"promptUpdated"},e=>{let{payload:t}=e,a=r.promptWasCleared?r.promptWasCleared:0===t.length;if(r.changelog.length>0){if(!r.isTyping){var i;let e;return{...r,prompt:t,changelog:[...r.changelog,{prompt:r.prompt,cause:"editEnhanced",styleId:null==(i=(e=r.changelog)[e.length-1])?void 0:i.styleId}],isTyping:!0,promptWasRestored:!1,promptWasCleared:a}}return{...r,prompt:t,isTyping:!0,promptWasRestored:!1,promptWasCleared:a}}return{...r,prompt:t,changelog:[],isTyping:!1,promptWasRestored:!1,promptWasCleared:a}}).with({type:"aspectRatioChosen"},e=>{let{payload:t}=e;return{...r,aspectRatio:t}}).with({type:"imageCountToGenerateChosen"},e=>{let{payload:t}=e;return{...r,imageCount:t}}).with({type:"promptEnhanced"},e=>{let{payload:t}=e;if(!r.styleId)throw Error("A style is required to enhance a prompt.");return{...r,prompt:t,changelog:[...r.changelog,{prompt:r.prompt,cause:"enhance",styleId:r.styleId}],isTyping:!1,promptWasRestored:!1,promptWasCleared:!1}}).with({type:"changesUndone"},()=>{if(0===r.changelog.length)throw Error("Cannot undo a prompt if it has never been enhanced.");let e=[...r.changelog],t=e.pop();return{...r,prompt:t.prompt,changelog:e,isTyping:!1,promptWasRestored:!1,promptWasCleared:!1}}).with({type:"creationDetailsSet"},e=>{let{payload:{aspectRatio:t,prompt:a,styleId:i}}=e;return{...r,styleId:i,aspectRatio:t,prompt:a,imageCount:1,changelog:[],promptWasRestored:!1,isTyping:!1,promptWasCleared:!1}}).with({type:"styleChosen"},e=>{let{payload:t}=e,a=(()=>{if(r.promptWasCleared)return null;let e=[...r.changelog].reverse().find(e=>"enhance"===e.cause);return e?e.prompt:null})();return{...r,prompt:a||r.prompt,promptWasRestored:null!==a,promptWasCleared:!1,changelog:[],styleId:t,aspectRatio:s.gl.SQUARE}}).with({type:"styleReset"},()=>({...r,prompt:"",changelog:[],styleId:null,isTyping:!1,promptWasRestored:!1,promptWasCleared:!1})).exhaustive());t(d,i)}),u=(0,n.Iz)(e=>(0,r.eU)(t=>t(d).styleId===e)),p=()=>{let[e,t]=(0,i.fp)(c);return{state:e,dispatch:t}},m=()=>({dispatch:(0,i.Xr)(c)}),g=e=>{let[t]=(0,i.fp)(u(e));return t}},98512:(e,t,a)=>{"use strict";a.d(t,{B:()=>d,T:()=>l});var r=a(3548),i=a(80752),n=a(54568);let s=e=>{let{aspectRatio:t}=e;return(0,n.jsx)("div",{style:{borderRadius:"0.1625rem",aspectRatio:(0,r.YW)(t).with(i.gl.LANDSCAPE_16X9,()=>"16 / 9").with(i.gl.SQUARE,()=>"1").with(i.gl.PORTRAIT_9X16,()=>"9 / 16").with(i.gl.PORTRAIT_2X3,()=>"2 / 3").with(i.gl.LANDSCAPE_3X2,()=>"3 / 2").exhaustive(),width:(0,r.YW)(t).with(i.gl.LANDSCAPE_16X9,()=>24).with(i.gl.SQUARE,()=>24).with(i.gl.PORTRAIT_9X16,()=>12).with(i.gl.PORTRAIT_2X3,()=>12).with(i.gl.LANDSCAPE_3X2,()=>24).exhaustive()},className:"border border-solid border-highest-emphasis"})},o=()=>(0,n.jsxs)("div",{className:"relative flex items-center justify-center w-6 h-6",children:[(0,n.jsx)("div",{style:{borderRadius:"0.1625rem",aspectRatio:"16/9",width:22.857},className:"absolute border border-solid border-highest-emphasis"}),(0,n.jsx)("div",{style:{borderRadius:"0.1625rem",aspectRatio:"9/16",width:12.857},className:"absolute border border-solid border-highest-emphasis"})]}),l=e=>{let{aspectRatio:t}=e;return(0,n.jsx)("div",{style:{borderRadius:"0.375rem"},className:"flex aspect-square w-7 shrink-0 items-center justify-center",children:(0,r.YW)(t).with(i.gl.AUTO,()=>(0,n.jsx)(o,{})).otherwise(()=>(0,n.jsx)(s,{aspectRatio:t}))})},d=e=>{let{aspectRatio:t}=e;return(0,n.jsx)("div",{style:{borderRadius:"0.375rem"},className:"flex aspect-square w-10 shrink-0 items-center justify-center bg-highest-emphasis text-black",children:(0,r.YW)(t).with(i.gl.AUTO,()=>(0,n.jsx)(o,{})).otherwise(()=>(0,n.jsx)(s,{aspectRatio:t}))})}},99316:(e,t,a)=>{"use strict";a.d(t,{O:()=>v});var r=a(7620),i=a(52045),n=a(25002),s=a(96240),o=a(91608),l=a(84768),d=a(37562),c=a.n(d),u=a(72466),p=a(21797),m=a(55760),g=a(7375),h=a(87992),x=a(78349),y=a(36634),f=a(75087);let j=(0,s.eU)({}),v=(e,t)=>{var a,s;let d,v,b=(()=>{let e=l.A.get(y.WT),{browser:t,operatingSystem:a,device:i}=(0,g.e)(),{geoData:n}=(0,m.M)(),s="authenticated"===(0,p.useSession)().status,{data:d}=(0,h.J)(),{isPLJourney:f,isPLBFTJourney:v}=(0,x.T)(),[b,w]=(0,o.fp)(j);return((0,r.useEffect)(()=>{(()=>{var r,o,l,p,m,g;let h={};if(h.device=i.type||"",h.os=a.name||"",h.browser=t.name||"",!u.tb&&null!=(r=window)&&null!=(o=r.location)&&o.host&&(h.host=window.location.host),e&&(h.anonymousID=e),null!=n&&n.countryCode&&(h.countryCode=null==n||null==(l=n.countryCode)?void 0:l.toUpperCase()),h.isPLJourney=f,h.isPLBFTJourney=v,s&&d){let e={...h,userID:(null==d||null==(p=d.id)?void 0:p.toString())||"",userStatus:d.subscription?"paid":"trial",userRole:(null==d||null==(m=d.subscription)||null==(g=m.team)?void 0:g.role)||""};w(t=>c()(t,e)?t:e)}else{let e={...h,userStatus:"guest"};w(t=>c()(t,e)?t:e)}})()},[n,s,d,f,v]),e)?b:{}})(),{manager:w}=(0,i.p)(),_=null==w?void 0:w.split(e),C=(d=null==b||null==(a=b.anonymousID)?void 0:a.toString(),(v=null==b||null==(s=b.userID)?void 0:s.toString())&&t?{matchingKey:v,bucketingKey:d}:(null==_?void 0:_.trafficType)===f.ol.user&&v?v:d),{client:T,isReady:I}=(0,n.V)({splitKey:C,attributes:b});return{isReady:I,getTreatment:()=>{if(I&&T)return T.getTreatmentWithConfig(e,b)}}}}},e=>{e.O(0,[30014,42757,43307,96460,60048,41935,28701,77340,74706,35055,66722,58366,12185,22820,10933,91608,95919,32638,64779,13263,95854,95702,86789,93942,10108,51050,28334,1419,14471,46799,57874,98435,78748,54858,39654,44184,7837,19397,24990,65301,11299,84176,54150,41823,90822,92748,22622,90322,587,21998,77358],()=>e(e.s=17077)),_N_E=e.O()}]);
//# sourceMappingURL=default-9b2a1bc186fa5bf8.js.map
//# debugId=8a2ca72b-3f3b-5ee1-ba4a-91ba164c4812
